const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/NewsManagement-BAY0-MEo.js","js/element-plus-B_LAMX2W.js","js/vue-C2NPAEWw.js","js/request-gBXlrDct.js","js/utils-T70AYnHr.js","js/_plugin-vue_export-helper-DlAUqK2U.js","css/NewsManagement-BXDqElU2.css","js/Login-BksWLmJk.js","js/authService-CnSN0M4T.js","css/Login-CLxKXt7e.css","js/AdminLayout-DKv1N_XD.js","css/AdminLayout-sr-Lh0S6.css","js/Dashboard-DkoiYjDr.js","js/CountUp-DhNxH7hh.js","css/CharityStatsCard-DxgyxwcW.css","js/charts-4xgvsrqt.js","js/order-DgpU5ivT.js","css/Dashboard-B9Z310De.css","css/SearchFilter-Cp9emvCt.css","css/DataTable-DuUuadFR.css","css/StatusTag-7W1y0CAS.css","css/ChartContainer-BsYzvC8Y.css","js/Products-CSIMf5wk.js","js/CommonDialog-C29ZBC5-.js","js/DataTable-DvK2rlgw.js","js/StatusTag-CbYDBx1u.js","css/Products-ypWM6L4R.css","js/Charity-Bo5E3bfX.js","css/Charity-CAfka2-M.css","js/Platforms-CwwKAM9N.js","css/Platforms-BL2whHsh.css","js/Sales-Dw3y4M2m.js","css/Sales-Dd-hSE6f.css","js/RentalAnalytics-Cj7ZU9ko.js","css/RentalAnalytics-CfKCwOPX.css","js/CustomerManagement-DtGqoTN3.js","js/CustomerFormDialog-C4eKcTzS.js","css/CustomerFormDialog-17VmTkWM.css","css/CustomerManagement-CMUmOXw0.css","js/CustomerDetail-CAI360hc.js","css/CustomerDetail-C0WAEXq5.css","js/Orders-BzIOGC6Z.js","js/OrderDetailDialog-GG31NPc3.js","css/OrderDetailDialog-CsRUz186.css","css/Orders-B4Hw_UD9.css","js/DeviceManagement-DzgXBEhj.js","js/device-DE1c5Zxf.js","css/DeviceManagement-BXgl-3Fe.css","js/DeviceMonitoring-DkSYaMyb.js","css/DeviceMonitoring-Dmwr8Spv.css","js/FirmwareManagement-C6M7Jvj7.js","css/FirmwareManagement-BtYOdE3g.css","js/CourseManagement-CM2TdL1V.js","css/CourseManagement-Ca1ci3kT.css","js/FontPackageManagement-y9_ycyDc.js","css/FontPackageManagement-DdacZdLu.css","js/LanguageManagement-BCS6j7XG.js","css/LanguageManagement-BfigaS3h.css","js/WebsiteLayout-DqXj-16z.js","css/WebsiteLayout-Dg_KVvRV.css","js/Home-C2j59F4I.js","js/mockData-DA6OAQiK.js","css/Home-C0aT7Gni.css","js/Products-pvhnEOWo.js","js/website-BP4_Dhx9.js","css/Products-DWo726Uj.css","js/Charity-D_eTufDd.js","css/Charity-CDO5AYH7.css","js/Support-CMiFTeV7.js","css/Support-SBUniCVD.css","js/Contact-Cw6iisUN.js","css/Contact-BfNik1fG.css","js/OrderTest-DoxYk4gP.js","css/OrderTest-83SM30Xa.css","js/SimpleOrderTest-D76CbYR5.js","css/SimpleOrderTest-DgpBCGDV.css","js/ApiTest-uUEFnJcI.js","css/ApiTest-smZyCGWT.css"])))=>i.map(i=>d[i]);
var T=Object.defineProperty,O=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var v=(n,e,t)=>e in n?T(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,_=(n,e)=>{for(var t in e||(e={}))D.call(e,t)&&v(n,t,e[t]);if(y)for(var t of y(e))R.call(e,t)&&v(n,t,e[t]);return n},w=(n,e)=>O(n,A(e));var u=(n,e,t)=>v(n,typeof e!="symbol"?e+"":e,t);var E=(n,e,t)=>new Promise((r,o)=>{var s=p=>{try{l(t.next(p))}catch(m){o(m)}},c=p=>{try{l(t.throw(p))}catch(m){o(m)}},l=p=>p.done?r(p.value):Promise.resolve(p.value).then(s,c);l((t=t.apply(n,e)).next())});import{x as C,al as V,y as k,z,Q as x,ax as N,ay as B,au as M}from"./vue-C2NPAEWw.js";import{E as q,a as Q,i as $}from"./element-plus-B_LAMX2W.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const W={id:"app"},F=C({__name:"App",setup(n){return(e,t)=>{const r=V("router-view");return z(),k("div",W,[x(r)])}}}),J="modulepreload",U=function(n){return"/"+n},I={},i=function(e,t,r){let o=Promise.resolve();if(t&&t.length>0){let c=function(m){return Promise.all(m.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),p=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));o=c(t.map(m=>{if(m=U(m),m in I)return;I[m]=!0;const h=m.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${f}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":J,h||(d.as="script"),d.crossOrigin="",d.href=m,p&&d.setAttribute("nonce",p),document.head.appendChild(d),h)return new Promise((S,L)=>{d.addEventListener("load",S),d.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${m}`)))})}))}function s(c){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=c,window.dispatchEvent(l),!l.defaultPrevented)throw c}return o.then(c=>{for(const l of c||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};function a(n){return()=>{const e=q.service({lock:!0,text:"页面加载中...",background:"rgba(0, 0, 0, 0.7)"});return n().then(t=>(e.close(),t)).catch(t=>{throw e.close(),console.error("Route loading failed:",t),t})}}class j{constructor(){u(this,"preloadedComponents",new Set);u(this,"preloadQueue",[])}addPreloadTask(e,t,r=0){this.preloadedComponents.has(e)||(this.preloadQueue.push({name:e,loader:t,priority:r}),this.preloadQueue.sort((o,s)=>s.priority-o.priority))}executePreload(e=3){return E(this,null,function*(){const t=[];for(;this.preloadQueue.length>0||t.length>0;){for(;t.length<e&&this.preloadQueue.length>0;){const r=this.preloadQueue.shift(),o=this.preloadComponent(r.name,r.loader);t.push(o)}if(t.length>0){yield Promise.race(t);for(let r=t.length-1;r>=0;r--)(yield Promise.race([t[r],Promise.resolve("pending")]))!=="pending"&&t.splice(r,1)}}})}preloadComponent(e,t){return E(this,null,function*(){try{yield t(),this.preloadedComponents.add(e),console.log(`Component ${e} preloaded successfully`)}catch(r){console.warn(`Failed to preload component ${e}:`,r)}})}setupIntelligentPreloading(){if(document.addEventListener("mouseover",e=>{const r=e.target.closest("[data-preload]");if(r){const o=r.getAttribute("data-preload");o&&!this.preloadedComponents.has(o)&&setTimeout(()=>{this.triggerPreload(o)},100)}}),"IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(r=>{if(r.isIntersecting){const o=r.target.getAttribute("data-preload");o&&!this.preloadedComponents.has(o)&&this.triggerPreload(o)}})},{rootMargin:"50px"});document.querySelectorAll("[data-preload]").forEach(t=>{e.observe(t)})}}triggerPreload(e){console.log(`Triggering preload for component: ${e}`)}}const H=new j;function K(){H.setupIntelligentPreloading()}const G=[{path:"/admin/content/news",name:"ContentNews",component:a(()=>i(()=>import("./NewsManagement-BAY0-MEo.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),meta:{title:"新闻管理",requiresAuth:!0,permissions:["news:view"],breadcrumb:[{title:"控制台",path:"/admin/dashboard"},{title:"官网管理",path:"/admin/content"},{title:"新闻管理",path:"/admin/content/news"}]}}],X=(n,e,t)=>{var o;(((o=n.meta)==null?void 0:o.permissions)||[]).length>0,t()},P=N({history:B("/"),routes:[{path:"/",redirect:"/admin/dashboard"},{path:"/admin/login",name:"AdminLogin",component:a(()=>i(()=>import("./Login-BksWLmJk.js"),__vite__mapDeps([7,2,1,8,5,9])))},{path:"/admin",component:a(()=>i(()=>import("./AdminLayout-DKv1N_XD.js"),__vite__mapDeps([10,2,1,8,5,11]))),meta:{requiresAuth:!0},children:[{path:"",redirect:"/admin/dashboard"},{path:"dashboard",name:"Dashboard",component:a(()=>i(()=>import("./Dashboard-DkoiYjDr.js"),__vite__mapDeps([12,1,2,13,5,14,15,16,17,18,19,20,21]))),meta:{title:"数据看板"}},{path:"content/products",name:"ContentProducts",component:a(()=>i(()=>import("./Products-CSIMf5wk.js"),__vite__mapDeps([22,1,2,23,5,19,24,25,20,15,3,4,26,18,14,21]))),meta:{title:"产品管理"}},{path:"content/charity",name:"ContentCharity",component:a(()=>i(()=>import("./Charity-Bo5E3bfX.js"),__vite__mapDeps([27,1,2,13,5,14,15,3,4,28]))),meta:{title:"公益项目管理"}},{path:"content/platforms",name:"ContentPlatforms",component:a(()=>i(()=>import("./Platforms-CwwKAM9N.js"),__vite__mapDeps([29,15,1,2,23,5,19,24,13,14,25,20,4,16,30,18,21]))),meta:{title:"平台链接管理"}},{path:"content/news",name:"ContentNews",component:a(()=>i(()=>import("./NewsManagement-BAY0-MEo.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),meta:{title:"新闻管理",requiresAuth:!0,permissions:["news:view"]}},{path:"business/sales",name:"BusinessSales",component:a(()=>i(()=>import("./Sales-Dw3y4M2m.js"),__vite__mapDeps([31,1,2,24,5,19,23,15,32,21]))),meta:{title:"销售数据"}},{path:"business/rental",name:"BusinessRental",component:a(()=>i(()=>import("./RentalAnalytics-Cj7ZU9ko.js"),__vite__mapDeps([33,1,2,13,5,14,15,34,18,19,20,21]))),meta:{title:"租赁数据分析"}},{path:"business/customers",name:"BusinessCustomers",component:a(()=>i(()=>import("./CustomerManagement-DtGqoTN3.js"),__vite__mapDeps([35,1,2,16,36,5,37,38]))),meta:{title:"客户管理"}},{path:"business/customers/:id",name:"CustomerDetail",component:a(()=>i(()=>import("./CustomerDetail-CAI360hc.js"),__vite__mapDeps([39,2,1,36,16,5,37,40]))),meta:{title:"客户详情"}},{path:"business/orders",name:"OrderManagement",component:a(()=>i(()=>import("./Orders-BzIOGC6Z.js"),__vite__mapDeps([41,2,1,16,42,5,43,44]))),meta:{title:"订单管理"}},{path:"device/management",name:"DeviceManagement",component:a(()=>i(()=>import("./DeviceManagement-DzgXBEhj.js"),__vite__mapDeps([45,1,2,46,5,47]))),meta:{title:"设备管理"}},{path:"device/monitoring",name:"DeviceMonitoring",component:a(()=>i(()=>import("./DeviceMonitoring-DkSYaMyb.js"),__vite__mapDeps([48,1,2,46,5,49]))),meta:{title:"设备监控"}},{path:"device/firmware",name:"FirmwareManagement",component:a(()=>i(()=>import("./FirmwareManagement-C6M7Jvj7.js"),__vite__mapDeps([50,1,2,5,15,51]))),meta:{title:"固件管理"}},{path:"system/courses",name:"SystemCourses",component:a(()=>i(()=>import("./CourseManagement-CM2TdL1V.js"),__vite__mapDeps([52,24,1,2,5,19,25,20,23,16,53]))),meta:{title:"课程管理"}},{path:"system/fonts",name:"SystemFonts",component:a(()=>i(()=>import("./FontPackageManagement-y9_ycyDc.js"),__vite__mapDeps([54,2,1,24,5,19,15,55,18,14,20,21]))),meta:{title:"AI字体包管理"}},{path:"system/languages",name:"SystemLanguages",component:a(()=>i(()=>import("./LanguageManagement-BCS6j7XG.js"),__vite__mapDeps([56,1,2,5,57]))),meta:{title:"多语言管理"}}]},{path:"/website",component:a(()=>i(()=>import("./WebsiteLayout-DqXj-16z.js"),__vite__mapDeps([58,2,1,5,59]))),children:[{path:"",redirect:"/website/home"},{path:"home",name:"Home",component:a(()=>i(()=>import("./Home-C2j59F4I.js"),__vite__mapDeps([60,1,2,61,5,62])))},{path:"products",name:"WebsiteProducts",component:a(()=>i(()=>import("./Products-pvhnEOWo.js"),__vite__mapDeps([63,2,1,61,64,3,4,5,65])))},{path:"charity",name:"Charity",component:a(()=>i(()=>import("./Charity-D_eTufDd.js"),__vite__mapDeps([66,1,2,61,5,67])))},...G.filter(n=>n.path.startsWith("/website/news")).map(n=>w(_({},n),{path:n.path.replace("/website/","")})),{path:"support",name:"Support",component:a(()=>i(()=>import("./Support-CMiFTeV7.js"),__vite__mapDeps([68,2,1,5,69])))},{path:"contact",name:"Contact",component:a(()=>i(()=>import("./Contact-Cw6iisUN.js"),__vite__mapDeps([70,2,1,5,71])))}]},{path:"/test",children:[{path:"orders",name:"OrderTest",component:a(()=>i(()=>import("./OrderTest-DoxYk4gP.js"),__vite__mapDeps([72,1,2,16,42,5,43,73]))),meta:{title:"订单功能测试"}},{path:"simple-orders",name:"SimpleOrderTest",component:a(()=>i(()=>import("./SimpleOrderTest-D76CbYR5.js"),__vite__mapDeps([74,1,2,5,75]))),meta:{title:"简单订单测试"}},{path:"api",name:"ApiTest",component:a(()=>i(()=>import("./ApiTest-uUEFnJcI.js"),__vite__mapDeps([76,64,3,4,1,2,5,77]))),meta:{title:"API测试"}}]}]});P.beforeEach((n,e,t)=>{if(!(n.path.includes("/news")&&(X(n,e,t),t.called))){if(n.meta.requiresAuth){const r=localStorage.getItem("token"),o=localStorage.getItem("userInfo");if(!r||!o){console.log("用户未登录，跳转到登录页"),t("/admin/login");return}try{const s=JSON.parse(o);if(!s.permissions||!s.permissions.includes("admin:all")){console.warn("权限不足，跳转到登录页"),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),t("/admin/login");return}if(r==="mock-jwt-token")console.log("用户认证通过");else{console.warn("Token无效，跳转到登录页"),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),t("/admin/login");return}}catch(s){console.error("用户信息解析失败:",s),localStorage.removeItem("token"),localStorage.removeItem("userInfo"),t("/admin/login");return}}if(n.path==="/admin/login"&&localStorage.getItem("token")){console.log("用户已登录，重定向到仪表板"),t("/admin/dashboard");return}n.meta.title?document.title=`${n.meta.title} - 练字机器人管理后台`:document.title="练字机器人管理后台",t()}});class Y{constructor(){u(this,"metrics",{});u(this,"observers",[]);this.initializeObservers()}initializeObservers(){if("PerformanceObserver"in window){try{const e=new PerformanceObserver(t=>{const r=t.getEntries(),o=r[r.length-1];this.metrics.largestContentfulPaint=o.startTime});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(e)}catch(e){console.warn("LCP observer not supported:",e)}try{const e=new PerformanceObserver(t=>{t.getEntries().forEach(o=>{this.metrics.firstInputDelay=o.processingStart-o.startTime})});e.observe({entryTypes:["first-input"]}),this.observers.push(e)}catch(e){console.warn("FID observer not supported:",e)}try{const e=new PerformanceObserver(t=>{let r=0;t.getEntries().forEach(s=>{s.hadRecentInput||(r+=s.value)}),this.metrics.cumulativeLayoutShift=r});e.observe({entryTypes:["layout-shift"]}),this.observers.push(e)}catch(e){console.warn("CLS observer not supported:",e)}}document.readyState==="complete"?this.collectBasicMetrics():window.addEventListener("load",()=>{this.collectBasicMetrics()})}collectBasicMetrics(){const e=performance.getEntriesByType("navigation")[0],t=performance.getEntriesByType("paint");e&&(this.metrics.loadTime=e.loadEventEnd-e.navigationStart,this.metrics.domContentLoaded=e.domContentLoadedEventEnd-e.navigationStart),t.forEach(r=>{r.name==="first-paint"?this.metrics.firstPaint=r.startTime:r.name==="first-contentful-paint"&&(this.metrics.firstContentfulPaint=r.startTime)})}getMetrics(){return _({},this.metrics)}mark(e){performance.mark(e)}measure(e,t,r){var s;r?performance.measure(e,t,r):performance.measure(e,t);const o=performance.getEntriesByName(e,"measure");return((s=o[o.length-1])==null?void 0:s.duration)||0}destroy(){this.observers.forEach(e=>e.disconnect()),this.observers=[]}}class Z{constructor(e={}){u(this,"observer",null);u(this,"images",new Set);"IntersectionObserver"in window&&(this.observer=new IntersectionObserver(t=>{t.forEach(r=>{if(r.isIntersecting){const o=r.target;this.loadImage(o)}})},_({rootMargin:"50px"},e)))}observe(e){this.observer?(this.images.add(e),this.observer.observe(e)):this.loadImage(e)}unobserve(e){this.observer&&(this.observer.unobserve(e),this.images.delete(e))}loadImage(e){const t=e.dataset.src;t&&(e.src=t,e.removeAttribute("data-src"),this.observer&&(this.observer.unobserve(e),this.images.delete(e)))}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.images.clear()}}const b=new Y;new Z;function ee(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?b.mark("page-visible"):b.mark("page-hidden")}),window.addEventListener("beforeunload",()=>{const n=b.getMetrics();console.log("Performance metrics:",n)})}class te{constructor(e={}){u(this,"cache",new Map);u(this,"maxSize");u(this,"defaultTTL");u(this,"cleanupTimer",null);this.maxSize=e.maxSize||100,this.defaultTTL=e.defaultTTL||300*1e3,e.cleanupInterval!==0&&(this.cleanupTimer=setInterval(()=>{this.cleanup()},e.cleanupInterval||60*1e3))}set(e,t,r){this.cache.size>=this.maxSize&&this.evictLRU(),this.cache.set(e,{data:t,timestamp:Date.now(),ttl:r||this.defaultTTL,hits:0})}get(e){const t=this.cache.get(e);return t?Date.now()-t.timestamp>t.ttl?(this.cache.delete(e),null):(t.hits++,t.data):null}has(e){return this.get(e)!==null}delete(e){return this.cache.delete(e)}clear(){this.cache.clear()}getStats(){const e=Array.from(this.cache.values());return{size:this.cache.size,maxSize:this.maxSize,totalHits:e.reduce((t,r)=>t+r.hits,0),averageAge:e.length>0?e.reduce((t,r)=>t+(Date.now()-r.timestamp),0)/e.length:0}}cleanup(){const e=Date.now();for(const[t,r]of this.cache.entries())e-r.timestamp>r.ttl&&this.cache.delete(t)}evictLRU(){let e="",t=1/0,r=1/0;for(const[o,s]of this.cache.entries())(s.hits<t||s.hits===t&&s.timestamp<r)&&(e=o,t=s.hits,r=s.timestamp);e&&this.cache.delete(e)}destroy(){this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null),this.clear()}}class re{constructor(e="app_cache_"){u(this,"prefix");this.prefix=e}set(e,t,r){const o={data:t,timestamp:Date.now(),ttl:r||864e5};try{localStorage.setItem(this.prefix+e,JSON.stringify(o))}catch(s){console.warn("LocalStorage cache set failed:",s),this.cleanup();try{localStorage.setItem(this.prefix+e,JSON.stringify(o))}catch(c){console.error("LocalStorage cache set failed after cleanup:",c)}}}get(e){try{const t=localStorage.getItem(this.prefix+e);if(!t)return null;const r=JSON.parse(t);return Date.now()-r.timestamp>r.ttl?(this.delete(e),null):r.data}catch(t){return console.warn("LocalStorage cache get failed:",t),null}}delete(e){localStorage.removeItem(this.prefix+e)}cleanup(){const e=Date.now(),t=[];for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r);if(o&&o.startsWith(this.prefix))try{const s=localStorage.getItem(o);if(s){const c=JSON.parse(s);e-c.timestamp>c.ttl&&t.push(o)}}catch(s){t.push(o)}}t.forEach(r=>localStorage.removeItem(r))}clear(){const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r&&r.startsWith(this.prefix)&&e.push(r)}e.forEach(t=>localStorage.removeItem(t))}}const oe=new te,ne=new re;function se(){window.addEventListener("beforeunload",()=>{oe.destroy()}),setInterval(()=>{ne.cleanup()},3600*1e3)}const g=M(F);for(const[n,e]of Object.entries(Q))g.component(n,e);g.use(P);g.use($);ee();se();g.mount("#app");K();export{i as _};
