import{a as n}from"./utils-T70AYnHr.js";const u={baseURL:"/",timeout:1e4,withCredentials:!0},l=n.create(u);l.interceptors.request.use(e=>{var a;const t=localStorage.getItem("token");return t&&e.headers&&(e.headers.Authorization=`Bearer ${t}`),e.params?e.params._t=Date.now():e.params={_t:Date.now()},console.log("API请求:",(a=e.method)==null?void 0:a.toUpperCase(),e.url,e.data||e.params),e},e=>(console.error("请求拦截器错误:",e),Promise.reject(e)));l.interceptors.response.use(e=>(console.log("API响应:",e.config.url,e.status,e.data),e.data&&typeof e.data=="object"?e.data:e),e=>{var t,a,s,o,r;return console.error("API响应错误:",(t=e.response)==null?void 0:t.status,((a=e.response)==null?void 0:a.data)||e.message),((s=e.response)==null?void 0:s.status)===401?(localStorage.removeItem("token"),window.location.href="/login"):((o=e.response)==null?void 0:o.status)===403?console.error("权限不足"):((r=e.response)==null?void 0:r.status)>=500&&console.error("服务器错误"),Promise.reject(e)});export{l as a};
