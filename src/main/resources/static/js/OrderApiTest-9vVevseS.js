var c=(w,u,o)=>new Promise((s,a)=>{var N=l=>{try{i(o.next(l))}catch(e){a(e)}},C=l=>{try{i(o.throw(l))}catch(e){a(e)}},i=l=>l.done?s(l.value):Promise.resolve(l.value).then(N,C);i((o=o.apply(w,u)).next())});import{o as S}from"./order-DqRMPNN_.js";import{b as n}from"./element-plus-B_LfhBgj.js";import{x as A,r as V,X as k,al as x,y as p,z as g,A as r,Q as m,K as y,I as f,M as _,O as d,D as v}from"./vue-C2NPAEWw.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./request-mSVS5ma3.js";import"./utils-T70AYnHr.js";const T={class:"order-api-test"},b={class:"test-section"},P={key:0,class:"test-result"},E={class:"test-section"},J={key:0,class:"test-result"},z={class:"test-section"},B={key:0,class:"test-result"},G={class:"test-section"},M={key:0,class:"test-result"},U={class:"test-section"},q={class:"summary"},F=A({__name:"OrderApiTest",setup(w){const u=V(""),o=k({getOrders:!1,getStats:!1,createOrder:!1,updateStatus:!1}),s=k({getOrders:null,getStats:null,createOrder:null,updateStatus:null}),a=k({getOrders:null,getStats:null,createOrder:null,updateStatus:null}),N=()=>c(null,null,function*(){o.getOrders=!0,a.getOrders=null;try{const e=yield S.getOrders({page:1,pageSize:10});s.getOrders=e.data,n.success("获取订单列表成功")}catch(e){console.error("获取订单列表失败:",e),a.getOrders=e,n.error("获取订单列表失败")}finally{o.getOrders=!1}}),C=()=>c(null,null,function*(){o.getStats=!0,a.getStats=null;try{const e=yield S.getOrderStats();s.getStats=e.data,n.success("获取订单统计成功")}catch(e){console.error("获取订单统计失败:",e),a.getStats=e,n.error("获取订单统计失败")}finally{o.getStats=!1}}),i=()=>c(null,null,function*(){o.createOrder=!0,a.createOrder=null;try{const e={orderNumber:`TEST${Date.now()}`,type:"sales",status:"pending",customerName:"测试客户",customerPhone:"13800138000",customerEmail:"test@example.com",deliveryAddress:"测试地址",items:[{productId:"test-product-1",productName:"测试产品",quantity:1,unitPrice:100,totalPrice:100}],subtotal:100,shippingFee:10,discount:0,totalAmount:110,currency:"CNY",paymentStatus:"pending",expectedDeliveryDate:new Date().toISOString().split("T")[0],salesPerson:"测试销售",notes:"这是一个测试订单",createdAt:new Date().toISOString()},t=yield S.createOrder(e);s.createOrder=t.data,u.value=t.data.id,n.success("创建订单成功")}catch(e){console.error("创建订单失败:",e),a.createOrder=e,n.error("创建订单失败")}finally{o.createOrder=!1}}),l=()=>c(null,null,function*(){if(!u.value){n.warning("请先创建订单或输入订单ID");return}o.updateStatus=!0,a.updateStatus=null;try{const e=yield S.updateOrderStatus(u.value,"confirmed");s.updateStatus=e.data,n.success("更新订单状态成功")}catch(e){console.error("更新订单状态失败:",e),a.updateStatus=e,n.error("更新订单状态失败")}finally{o.updateStatus=!1}});return(e,t)=>{const O=x("el-button"),D=x("el-input");return g(),p("div",T,[t[10]||(t[10]=r("h2",null,"订单API集成测试",-1)),r("div",b,[t[2]||(t[2]=r("h3",null,"1. 获取订单列表",-1)),m(O,{onClick:N,loading:o.getOrders},{default:f(()=>t[1]||(t[1]=[_(" 测试获取订单列表 ",-1)])),_:1,__:[1]},8,["loading"]),s.getOrders?(g(),p("div",P,[r("pre",null,d(JSON.stringify(s.getOrders,null,2)),1)])):y("",!0)]),r("div",E,[t[4]||(t[4]=r("h3",null,"2. 获取订单统计",-1)),m(O,{onClick:C,loading:o.getStats},{default:f(()=>t[3]||(t[3]=[_(" 测试获取订单统计 ",-1)])),_:1,__:[3]},8,["loading"]),s.getStats?(g(),p("div",J,[r("pre",null,d(JSON.stringify(s.getStats,null,2)),1)])):y("",!0)]),r("div",z,[t[6]||(t[6]=r("h3",null,"3. 创建订单",-1)),m(O,{onClick:i,loading:o.createOrder},{default:f(()=>t[5]||(t[5]=[_(" 测试创建订单 ",-1)])),_:1,__:[5]},8,["loading"]),s.createOrder?(g(),p("div",B,[r("pre",null,d(JSON.stringify(s.createOrder,null,2)),1)])):y("",!0)]),r("div",G,[t[8]||(t[8]=r("h3",null,"4. 更新订单状态",-1)),m(D,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=I=>u.value=I),placeholder:"输入订单ID",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),m(O,{onClick:l,loading:o.updateStatus},{default:f(()=>t[7]||(t[7]=[_(" 测试更新状态 ",-1)])),_:1,__:[7]},8,["loading"]),s.updateStatus?(g(),p("div",M,[r("pre",null,d(JSON.stringify(s.updateStatus,null,2)),1)])):y("",!0)]),r("div",U,[t[9]||(t[9]=r("h3",null,"测试结果汇总",-1)),r("div",q,[r("div",{class:v(["summary-item",{success:s.getOrders,error:a.getOrders}])}," 获取订单列表: "+d(s.getOrders?"✅ 成功":a.getOrders?"❌ 失败":"⏳ 未测试"),3),r("div",{class:v(["summary-item",{success:s.getStats,error:a.getStats}])}," 获取订单统计: "+d(s.getStats?"✅ 成功":a.getStats?"❌ 失败":"⏳ 未测试"),3),r("div",{class:v(["summary-item",{success:s.createOrder,error:a.createOrder}])}," 创建订单: "+d(s.createOrder?"✅ 成功":a.createOrder?"❌ 失败":"⏳ 未测试"),3),r("div",{class:v(["summary-item",{success:s.updateStatus,error:a.updateStatus}])}," 更新状态: "+d(s.updateStatus?"✅ 成功":a.updateStatus?"❌ 失败":"⏳ 未测试"),3)])])])}}}),H=h(F,[["__scopeId","data-v-0c20ad95"]]);export{H as default};
