var Le=Object.defineProperty,Ae=Object.defineProperties;var Fe=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Ie=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable;var De=(T,D,f)=>D in T?Le(T,D,{enumerable:!0,configurable:!0,writable:!0,value:f}):T[D]=f,_e=(T,D)=>{for(var f in D||(D={}))Ie.call(D,f)&&De(T,f,D[f]);if(he)for(var f of he(D))Xe.call(D,f)&&De(T,f,D[f]);return T},$e=(T,D)=>Ae(T,Fe(D));var le=(T,D,f)=>new Promise((N,X)=>{var z=S=>{try{O(f.next(S))}catch($){X($)}},U=S=>{try{O(f.throw(S))}catch($){X($)}},O=S=>S.done?N(S.value):Promise.resolve(S.value).then(z,U);O((f=f.apply(T,D)).next())});import{a3 as ge,ab as be,ac as ye,t as Ce,e as Be,k as Se,F as Pe,T as Re,a9 as He,O as qe,b as k,r as je,a6 as xe,q as Ge,m as Je,j as Ke,n as ke}from"./element-plus-BHn0tN3r.js";import{m as M}from"./device-DE1c5Zxf.js";import{x as me,c as ce,r as y,al as p,H as w,z as _,I as t,y as F,K as I,A as a,Q as e,M as i,u as C,O as m,P as ne,a6 as ie,j as re,n as We,ar as Ue,J as Te,D as ze,h as Qe}from"./vue-C2NPAEWw.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Ze={online:"在线",offline:"离线",error:"故障",maintenance:"维护中"},et={"YX-EDU-2024":"教育版练字机器人","YX-HOME-2024":"家庭版练字机器人","YX-PRO-2024":"专业版练字机器人"},tt={repair:"维修",upgrade:"升级",inspection:"检查",replacement:"更换"},lt={key:0,class:"device-detail-content"},at={class:"device-header"},ot={class:"device-status"},st={class:"firmware-version"},nt={class:"device-actions"},it={class:"tab-content"},dt={class:"info-section"},ut={class:"info-section"},rt={class:"info-section"},ct={class:"info-section"},mt={class:"notes-content"},pt={class:"tab-content"},vt={class:"specs-section"},ft={class:"connectivity-tags"},_t={class:"tab-content"},gt={class:"usage-section"},bt={class:"usage-card"},yt={class:"usage-icon"},Vt={class:"usage-info"},wt={class:"usage-value"},ht={class:"usage-card"},Dt={class:"usage-icon"},$t={class:"usage-info"},kt={class:"usage-value"},Ct={class:"usage-card"},St={class:"usage-icon"},Ut={class:"usage-info"},Tt={class:"usage-value"},zt={class:"usage-card"},Et={class:"usage-icon"},Mt={class:"usage-info"},Nt={class:"usage-value"},Ot={class:"tab-content"},Yt={class:"maintenance-section"},Lt={key:0},At={key:1},Ft={class:"tab-content"},It={class:"config-section"},Xt={class:"custom-settings",style:{"margin-top":"24px"}},Bt={class:"dialog-footer"},Pt=me({__name:"DeviceDetailDialog",props:{modelValue:{type:Boolean},device:{default:null}},emits:["update:modelValue","edit","status-change"],setup(T,{emit:D}){const f=T,N=D,X=ce({get:()=>f.modelValue,set:l=>N("update:modelValue",l)}),z=y("basic"),U=()=>{f.device&&N("edit",f.device)},O=l=>le(null,null,function*(){if(f.device)try{let s="";switch(l){case"reboot":yield M.rebootDevice(f.device.id),s="设备重启指令已发送";break;case"maintenance":yield M.updateDeviceStatus(f.device.id,"maintenance"),s="设备已进入维护模式";break;case"activate":yield M.activateDevice(f.device.id),s="设备激活指令已发送";break;case"firmware":yield M.pushFirmware(f.device.id),s="固件推送已启动";break;case"logs":k.info("查看设备日志功能开发中");return}k.success(s),N("status-change")}catch(s){console.error("设备操作失败:",s),k.error("操作失败")}}),S=()=>{N("update:modelValue",!1)},$=l=>({online:"success",offline:"info",error:"danger",maintenance:"warning"})[l]||"info",R=l=>Ze[l]||l,d=l=>({"YX-EDU-2024":"primary","YX-HOME-2024":"success","YX-PRO-2024":"warning"})[l]||"info",Y=l=>et[l]||l,H=l=>({repair:"danger",upgrade:"primary",inspection:"info",replacement:"warning"})[l]||"info",q=l=>tt[l]||l,j=l=>({pending:"warning",in_progress:"primary",completed:"success",cancelled:"info"})[l]||"info",K=l=>({pending:"待处理",in_progress:"进行中",completed:"已完成",cancelled:"已取消"})[l]||l,W=l=>({"zh-CN":"简体中文","en-US":"English","ja-JP":"日本語","ko-KR":"한국어"})[l]||l,ae=l=>({brightness:"屏幕亮度",volume:"音量",sleepTimeout:"休眠时间"})[l]||l,Q=(l,s)=>l==="brightness"||l==="volume"?`${s}%`:l==="sleepTimeout"?`${s}分钟`:s,B=l=>l?new Date(l).toLocaleString("zh-CN"):"无",V=l=>{if(!l)return"0分钟";const s=Math.floor(l/60),r=l%60;return s>0?`${s}小时${r}分钟`:`${r}分钟`};return(l,s)=>{var n;const r=p("el-icon"),c=p("el-tag"),g=p("el-button"),L=p("el-dropdown-item"),E=p("el-dropdown-menu"),Z=p("el-dropdown"),b=p("el-descriptions-item"),P=p("el-descriptions"),A=p("el-col"),x=p("el-row"),G=p("el-tab-pane"),u=p("el-table-column"),de=p("el-table"),oe=p("el-tabs"),se=p("el-dialog");return _(),w(se,{modelValue:X.value,"onUpdate:modelValue":s[1]||(s[1]=o=>X.value=o),title:`设备详情 - ${((n=l.device)==null?void 0:n.serialNumber)||""}`,width:"90%","before-close":S,class:"device-detail-dialog"},{footer:t(()=>[a("div",Bt,[e(g,{onClick:S},{default:t(()=>s[18]||(s[18]=[i("关闭",-1)])),_:1,__:[18]}),e(g,{type:"primary",onClick:U},{default:t(()=>s[19]||(s[19]=[i("编辑设备",-1)])),_:1,__:[19]})])]),default:t(()=>[l.device?(_(),F("div",lt,[a("div",at,[a("div",ot,[e(c,{type:$(l.device.status),size:"large"},{default:t(()=>[e(r,null,{default:t(()=>[l.device.status==="online"?(_(),w(C(ge),{key:0})):l.device.status==="offline"?(_(),w(C(be),{key:1})):l.device.status==="error"?(_(),w(C(ye),{key:2})):(_(),w(C(Ce),{key:3}))]),_:1}),i(" "+m(R(l.device.status)),1)]),_:1},8,["type"]),a("span",st,"固件版本: "+m(l.device.firmwareVersion),1)]),a("div",nt,[e(g,{type:"primary",onClick:U},{default:t(()=>[e(r,null,{default:t(()=>[e(C(Be))]),_:1}),s[2]||(s[2]=i(" 编辑设备 ",-1))]),_:1,__:[2]}),e(Z,{onCommand:O,trigger:"click"},{dropdown:t(()=>[e(E,null,{default:t(()=>[l.device.status==="online"?(_(),w(L,{key:0,command:"reboot"},{default:t(()=>s[4]||(s[4]=[i(" 重启设备 ",-1)])),_:1,__:[4]})):I("",!0),l.device.status!=="maintenance"?(_(),w(L,{key:1,command:"maintenance"},{default:t(()=>s[5]||(s[5]=[i(" 进入维护 ",-1)])),_:1,__:[5]})):I("",!0),l.device.status==="offline"?(_(),w(L,{key:2,command:"activate"},{default:t(()=>s[6]||(s[6]=[i(" 激活设备 ",-1)])),_:1,__:[6]})):I("",!0),e(L,{command:"firmware"},{default:t(()=>s[7]||(s[7]=[i(" 推送固件 ",-1)])),_:1,__:[7]}),e(L,{command:"logs"},{default:t(()=>s[8]||(s[8]=[i(" 查看日志 ",-1)])),_:1,__:[8]})]),_:1})]),default:t(()=>[e(g,{type:"success"},{default:t(()=>[s[3]||(s[3]=i(" 设备操作",-1)),e(r,{class:"el-icon--right"},{default:t(()=>[e(C(Se))]),_:1})]),_:1,__:[3]})]),_:1})])]),e(oe,{modelValue:z.value,"onUpdate:modelValue":s[0]||(s[0]=o=>z.value=o),type:"border-card",class:"device-tabs"},{default:t(()=>[e(G,{label:"基本信息",name:"basic"},{default:t(()=>[a("div",it,[e(x,{gutter:24},{default:t(()=>[e(A,{span:12},{default:t(()=>[a("div",dt,[s[9]||(s[9]=a("h3",null,"设备信息",-1)),e(P,{column:1,border:""},{default:t(()=>[e(b,{label:"设备序列号"},{default:t(()=>[i(m(l.device.serialNumber),1)]),_:1}),e(b,{label:"设备型号"},{default:t(()=>[e(c,{type:d(l.device.model)},{default:t(()=>[i(m(Y(l.device.model)),1)]),_:1},8,["type"])]),_:1}),e(b,{label:"设备状态"},{default:t(()=>[e(c,{type:$(l.device.status)},{default:t(()=>[i(m(R(l.device.status)),1)]),_:1},8,["type"])]),_:1}),e(b,{label:"固件版本"},{default:t(()=>[i(m(l.device.firmwareVersion),1)]),_:1}),e(b,{label:"创建时间"},{default:t(()=>[i(m(B(l.device.createdAt)),1)]),_:1}),e(b,{label:"激活时间"},{default:t(()=>[i(m(B(l.device.activatedAt)),1)]),_:1}),e(b,{label:"最后在线"},{default:t(()=>[i(m(B(l.device.lastOnlineAt)),1)]),_:1})]),_:1})])]),_:1}),e(A,{span:12},{default:t(()=>[a("div",ut,[s[10]||(s[10]=a("h3",null,"客户信息",-1)),e(P,{column:1,border:""},{default:t(()=>[e(b,{label:"客户姓名"},{default:t(()=>[i(m(l.device.customerName),1)]),_:1}),e(b,{label:"联系电话"},{default:t(()=>[i(m(l.device.customerPhone),1)]),_:1}),e(b,{label:"客户ID"},{default:t(()=>[i(m(l.device.customerId),1)]),_:1})]),_:1})])]),_:1})]),_:1}),l.device.location?(_(),w(x,{key:0,gutter:24,style:{"margin-top":"24px"}},{default:t(()=>[e(A,{span:24},{default:t(()=>[a("div",rt,[s[11]||(s[11]=a("h3",null,"位置信息",-1)),e(P,{column:2,border:""},{default:t(()=>[e(b,{label:"地址"},{default:t(()=>[i(m(l.device.location.address),1)]),_:1}),e(b,{label:"坐标"},{default:t(()=>[i(m(l.device.location.latitude.toFixed(6))+", "+m(l.device.location.longitude.toFixed(6)),1)]),_:1}),e(b,{label:"位置更新时间",span:2},{default:t(()=>[i(m(B(l.device.location.lastUpdated)),1)]),_:1})]),_:1})])]),_:1})]),_:1})):I("",!0),l.device.notes?(_(),w(x,{key:1,gutter:24,style:{"margin-top":"24px"}},{default:t(()=>[e(A,{span:24},{default:t(()=>[a("div",ct,[s[12]||(s[12]=a("h3",null,"备注信息",-1)),a("div",mt,m(l.device.notes),1)])]),_:1})]),_:1})):I("",!0)])]),_:1}),e(G,{label:"技术参数",name:"specs"},{default:t(()=>[a("div",pt,[a("div",vt,[e(P,{column:2,border:""},{default:t(()=>[e(b,{label:"处理器"},{default:t(()=>[i(m(l.device.specifications.cpu),1)]),_:1}),e(b,{label:"内存"},{default:t(()=>[i(m(l.device.specifications.memory),1)]),_:1}),e(b,{label:"存储"},{default:t(()=>[i(m(l.device.specifications.storage),1)]),_:1}),e(b,{label:"显示屏"},{default:t(()=>[i(m(l.device.specifications.display),1)]),_:1}),e(b,{label:"电池"},{default:t(()=>[i(m(l.device.specifications.battery),1)]),_:1}),e(b,{label:"连接方式"},{default:t(()=>[a("div",ft,[(_(!0),F(ne,null,ie(l.device.specifications.connectivity,o=>(_(),w(c,{key:o,size:"small",style:{margin:"2px"}},{default:t(()=>[i(m(o),1)]),_:2},1024))),128))])]),_:1})]),_:1})])])]),_:1}),e(G,{label:"使用统计",name:"usage"},{default:t(()=>[a("div",_t,[a("div",gt,[e(x,{gutter:24},{default:t(()=>[e(A,{span:12},{default:t(()=>[a("div",bt,[a("div",yt,[e(r,null,{default:t(()=>[e(C(Pe))]),_:1})]),a("div",Vt,[a("div",wt,m(V(l.device.usageStats.totalRuntime)),1),s[13]||(s[13]=a("div",{class:"usage-label"},"总运行时间",-1))])])]),_:1}),e(A,{span:12},{default:t(()=>[a("div",ht,[a("div",Dt,[e(r,null,{default:t(()=>[e(C(Re))]),_:1})]),a("div",$t,[a("div",kt,m(l.device.usageStats.usageCount),1),s[14]||(s[14]=a("div",{class:"usage-label"},"使用次数",-1))])])]),_:1})]),_:1}),e(x,{gutter:24,style:{"margin-top":"16px"}},{default:t(()=>[e(A,{span:12},{default:t(()=>[a("div",Ct,[a("div",St,[e(r,null,{default:t(()=>[e(C(He))]),_:1})]),a("div",Ut,[a("div",Tt,m(V(l.device.usageStats.averageSessionTime)),1),s[15]||(s[15]=a("div",{class:"usage-label"},"平均使用时长",-1))])])]),_:1}),e(A,{span:12},{default:t(()=>[a("div",zt,[a("div",Et,[e(r,null,{default:t(()=>[e(C(qe))]),_:1})]),a("div",Mt,[a("div",Nt,m(B(l.device.usageStats.lastUsedAt)),1),s[16]||(s[16]=a("div",{class:"usage-label"},"最后使用时间",-1))])])]),_:1})]),_:1})])])]),_:1}),e(G,{label:"维护记录",name:"maintenance"},{default:t(()=>[a("div",Ot,[a("div",Yt,[e(de,{data:l.device.maintenanceRecords,border:""},{default:t(()=>[e(u,{prop:"type",label:"维护类型",width:"100"},{default:t(({row:o})=>[e(c,{type:H(o.type),size:"small"},{default:t(()=>[i(m(q(o.type)),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"description",label:"描述","min-width":"150"}),e(u,{prop:"technician",label:"技术员",width:"100"}),e(u,{prop:"status",label:"状态",width:"100"},{default:t(({row:o})=>[e(c,{type:j(o.status),size:"small"},{default:t(()=>[i(m(K(o.status)),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"startTime",label:"开始时间",width:"150"},{default:t(({row:o})=>[i(m(B(o.startTime)),1)]),_:1}),e(u,{prop:"endTime",label:"结束时间",width:"150"},{default:t(({row:o})=>[i(m(B(o.endTime)),1)]),_:1}),e(u,{prop:"cost",label:"费用",width:"100"},{default:t(({row:o})=>[i(m(o.cost?`¥${o.cost}`:"-"),1)]),_:1}),e(u,{prop:"parts",label:"更换配件","min-width":"120"},{default:t(({row:o})=>[o.parts&&o.parts.length>0?(_(),F("div",Lt,[(_(!0),F(ne,null,ie(o.parts,h=>(_(),w(c,{key:h,size:"small",style:{margin:"1px"}},{default:t(()=>[i(m(h),1)]),_:2},1024))),128))])):(_(),F("span",At,"-"))]),_:1})]),_:1},8,["data"])])])]),_:1}),e(G,{label:"设备配置",name:"config"},{default:t(()=>[a("div",Ft,[a("div",It,[e(P,{column:2,border:""},{default:t(()=>[e(b,{label:"系统语言"},{default:t(()=>[i(m(W(l.device.configuration.language)),1)]),_:1}),e(b,{label:"时区"},{default:t(()=>[i(m(l.device.configuration.timezone),1)]),_:1}),e(b,{label:"自动更新"},{default:t(()=>[e(c,{type:l.device.configuration.autoUpdate?"success":"info",size:"small"},{default:t(()=>[i(m(l.device.configuration.autoUpdate?"已启用":"已禁用"),1)]),_:1},8,["type"])]),_:1}),e(b,{label:"调试模式"},{default:t(()=>[e(c,{type:l.device.configuration.debugMode?"warning":"info",size:"small"},{default:t(()=>[i(m(l.device.configuration.debugMode?"已启用":"已禁用"),1)]),_:1},8,["type"])]),_:1})]),_:1}),a("div",Xt,[s[17]||(s[17]=a("h4",null,"自定义设置",-1)),e(P,{column:3,border:""},{default:t(()=>[(_(!0),F(ne,null,ie(l.device.configuration.customSettings,(o,h)=>(_(),w(b,{key:h,label:ae(h)},{default:t(()=>[i(m(Q(h,o)),1)]),_:2},1032,["label"]))),128))]),_:1})])])])]),_:1})]),_:1},8,["modelValue"])])):I("",!0)]),_:1},8,["modelValue","title"])}}}),Rt=pe(Pt,[["__scopeId","data-v-f8babf66"]]),Ht={class:"form-section"},qt={class:"form-section"},jt={class:"form-section"},xt={class:"form-section"},Gt={class:"section-title"},Jt={key:0},Kt={class:"form-section"},Wt={class:"dialog-footer"},Qt=me({__name:"DeviceFormDialog",props:{modelValue:{type:Boolean},device:{default:null}},emits:["update:modelValue","success"],setup(T,{emit:D}){const f=T,N=D,X=ce({get:()=>f.modelValue,set:V=>N("update:modelValue",V)}),z=y(),U=y(!1),O=y(!1),S=y(!1),$=y(!1),R=()=>({serialNumber:"",model:"YX-HOME-2024",customerId:"",specifications:{cpu:"",memory:"",storage:"",display:"",battery:"",connectivity:[]},configuration:{language:"zh-CN",timezone:"Asia/Shanghai",autoUpdate:!0,debugMode:!1,customSettings:{brightness:80,volume:50,sleepTimeout:10}},location:{latitude:0,longitude:0,address:"",lastUpdated:new Date().toISOString()},notes:"",status:"offline",firmwareVersion:"1.0.0"}),d=y(R()),Y=ce(()=>!!f.device),H=y([]),q={serialNumber:[{required:!0,message:"请输入设备序列号",trigger:"blur"}],model:[{required:!0,message:"请选择设备型号",trigger:"change"}],customerId:[{required:!0,message:"请选择所属客户",trigger:"change"}],"specifications.cpu":[{required:!0,message:"请输入处理器型号",trigger:"blur"}],"specifications.memory":[{required:!0,message:"请输入内存大小",trigger:"blur"}],"specifications.storage":[{required:!0,message:"请输入存储容量",trigger:"blur"}],"specifications.display":[{required:!0,message:"请输入显示屏规格",trigger:"blur"}],"specifications.battery":[{required:!0,message:"请输入电池规格",trigger:"blur"}],"configuration.language":[{required:!0,message:"请选择系统语言",trigger:"change"}],"configuration.timezone":[{required:!0,message:"请选择时区",trigger:"change"}]};re(()=>f.modelValue,V=>{V&&(j(),K())}),re(()=>f.device,V=>{V&&f.modelValue&&j()}),re($,V=>{V?d.value.location||(d.value.location={latitude:0,longitude:0,address:"",lastUpdated:new Date().toISOString()}):d.value.location=void 0});const j=()=>{f.device?(d.value=$e(_e({},f.device),{location:f.device.location||{latitude:0,longitude:0,address:"",lastUpdated:new Date().toISOString()}}),$.value=!!f.device.location):(d.value=R(),$.value=!1),We(()=>{var V;(V=z.value)==null||V.clearValidate()})},K=()=>le(null,null,function*(){O.value=!0;try{const V=yield M.getCustomerOptions();H.value=V.data}catch(V){console.error("加载客户选项失败:",V)}finally{O.value=!1}}),W=V=>le(null,null,function*(){}),ae=()=>{S.value=!0,"geolocation"in navigator?navigator.geolocation.getCurrentPosition(V=>{d.value.location&&(d.value.location.latitude=V.coords.latitude,d.value.location.longitude=V.coords.longitude,d.value.location.lastUpdated=new Date().toISOString()),k.success("位置获取成功"),S.value=!1},V=>{console.error("获取位置失败:",V),k.error("获取位置失败，请手动输入"),S.value=!1}):(k.error("浏览器不支持地理位置获取"),S.value=!1)},Q=()=>le(null,null,function*(){var V;try{yield(V=z.value)==null?void 0:V.validate(),U.value=!0;const l=_e({},d.value);$.value||delete l.location,Y.value?(yield M.updateDevice(f.device.id,l),k.success("设备更新成功")):(yield M.createDevice(l),k.success("设备添加成功")),N("success"),B()}catch(l){console.error("提交失败:",l),k.error("操作失败，请重试")}finally{U.value=!1}}),B=()=>{N("update:modelValue",!1)};return(V,l)=>{const s=p("el-input"),r=p("el-form-item"),c=p("el-col"),g=p("el-option"),L=p("el-select"),E=p("el-row"),Z=p("el-switch"),b=p("el-slider"),P=p("el-input-number"),A=p("el-button"),x=p("el-form"),G=p("el-dialog");return _(),w(G,{modelValue:X.value,"onUpdate:modelValue":l[23]||(l[23]=u=>X.value=u),title:Y.value?"编辑设备":"添加设备",width:"70%","before-close":B,class:"device-form-dialog"},{footer:t(()=>[a("div",Wt,[e(A,{onClick:B},{default:t(()=>l[30]||(l[30]=[i("取消",-1)])),_:1,__:[30]}),e(A,{type:"primary",onClick:Q,loading:U.value},{default:t(()=>[i(m(Y.value?"更新设备":"添加设备"),1)]),_:1},8,["loading"])])]),default:t(()=>[e(x,{ref_key:"formRef",ref:z,model:d.value,rules:q,"label-width":"120px",class:"device-form"},{default:t(()=>[a("div",Ht,[l[24]||(l[24]=a("h3",{class:"section-title"},"基本信息",-1)),e(E,{gutter:24},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(r,{label:"设备序列号",prop:"serialNumber"},{default:t(()=>[e(s,{modelValue:d.value.serialNumber,"onUpdate:modelValue":l[0]||(l[0]=u=>d.value.serialNumber=u),placeholder:"请输入设备序列号"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(r,{label:"设备型号",prop:"model"},{default:t(()=>[e(L,{modelValue:d.value.model,"onUpdate:modelValue":l[1]||(l[1]=u=>d.value.model=u),placeholder:"选择设备型号",style:{width:"100%"}},{default:t(()=>[e(g,{label:"教育版练字机器人",value:"YX-EDU-2024"}),e(g,{label:"家庭版练字机器人",value:"YX-HOME-2024"}),e(g,{label:"专业版练字机器人",value:"YX-PRO-2024"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,{gutter:24},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(r,{label:"所属客户",prop:"customerId"},{default:t(()=>[e(L,{modelValue:d.value.customerId,"onUpdate:modelValue":l[2]||(l[2]=u=>d.value.customerId=u),placeholder:"选择客户",filterable:"",remote:"","remote-method":W,loading:O.value,style:{width:"100%"}},{default:t(()=>[(_(!0),F(ne,null,ie(H.value,u=>(_(),w(g,{key:u.id,label:`${u.name} (${u.phone||""})`,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1})]),_:1}),Y.value?(_(),w(c,{key:0,span:12},{default:t(()=>[e(r,{label:"设备状态",prop:"status"},{default:t(()=>[e(L,{modelValue:d.value.status,"onUpdate:modelValue":l[3]||(l[3]=u=>d.value.status=u),placeholder:"选择设备状态",style:{width:"100%"}},{default:t(()=>[e(g,{label:"在线",value:"online"}),e(g,{label:"离线",value:"offline"}),e(g,{label:"故障",value:"error"}),e(g,{label:"维护中",value:"maintenance"})]),_:1},8,["modelValue"])]),_:1})]),_:1})):I("",!0)]),_:1}),Y.value?(_(),w(E,{key:0,gutter:24},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(r,{label:"固件版本",prop:"firmwareVersion"},{default:t(()=>[e(s,{modelValue:d.value.firmwareVersion,"onUpdate:modelValue":l[4]||(l[4]=u=>d.value.firmwareVersion=u),placeholder:"固件版本"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):I("",!0)]),a("div",qt,[l[25]||(l[25]=a("h3",{class:"section-title"},"技术参数",-1)),e(E,{gutter:24},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(r,{label:"处理器",prop:"specifications.cpu"},{default:t(()=>[e(s,{modelValue:d.value.specifications.cpu,"onUpdate:modelValue":l[5]||(l[5]=u=>d.value.specifications.cpu=u),placeholder:"处理器型号"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(r,{label:"内存",prop:"specifications.memory"},{default:t(()=>[e(s,{modelValue:d.value.specifications.memory,"onUpdate:modelValue":l[6]||(l[6]=u=>d.value.specifications.memory=u),placeholder:"内存大小"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,{gutter:24},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(r,{label:"存储",prop:"specifications.storage"},{default:t(()=>[e(s,{modelValue:d.value.specifications.storage,"onUpdate:modelValue":l[7]||(l[7]=u=>d.value.specifications.storage=u),placeholder:"存储容量"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(r,{label:"显示屏",prop:"specifications.display"},{default:t(()=>[e(s,{modelValue:d.value.specifications.display,"onUpdate:modelValue":l[8]||(l[8]=u=>d.value.specifications.display=u),placeholder:"显示屏规格"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,{gutter:24},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(r,{label:"电池",prop:"specifications.battery"},{default:t(()=>[e(s,{modelValue:d.value.specifications.battery,"onUpdate:modelValue":l[9]||(l[9]=u=>d.value.specifications.battery=u),placeholder:"电池规格"},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(r,{label:"连接方式",prop:"specifications.connectivity"},{default:t(()=>[e(L,{modelValue:d.value.specifications.connectivity,"onUpdate:modelValue":l[10]||(l[10]=u=>d.value.specifications.connectivity=u),multiple:"",placeholder:"选择连接方式",style:{width:"100%"}},{default:t(()=>[e(g,{label:"WiFi 6",value:"WiFi 6"}),e(g,{label:"WiFi 5",value:"WiFi 5"}),e(g,{label:"Bluetooth 5.0",value:"Bluetooth 5.0"}),e(g,{label:"Bluetooth 4.2",value:"Bluetooth 4.2"}),e(g,{label:"4G LTE",value:"4G LTE"}),e(g,{label:"5G",value:"5G"}),e(g,{label:"USB-C",value:"USB-C"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),a("div",jt,[l[26]||(l[26]=a("h3",{class:"section-title"},"设备配置",-1)),e(E,{gutter:24},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(r,{label:"系统语言",prop:"configuration.language"},{default:t(()=>[e(L,{modelValue:d.value.configuration.language,"onUpdate:modelValue":l[11]||(l[11]=u=>d.value.configuration.language=u),placeholder:"选择语言",style:{width:"100%"}},{default:t(()=>[e(g,{label:"简体中文",value:"zh-CN"}),e(g,{label:"English",value:"en-US"}),e(g,{label:"日本語",value:"ja-JP"}),e(g,{label:"한국어",value:"ko-KR"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(r,{label:"时区",prop:"configuration.timezone"},{default:t(()=>[e(L,{modelValue:d.value.configuration.timezone,"onUpdate:modelValue":l[12]||(l[12]=u=>d.value.configuration.timezone=u),placeholder:"选择时区",style:{width:"100%"}},{default:t(()=>[e(g,{label:"Asia/Shanghai",value:"Asia/Shanghai"}),e(g,{label:"Asia/Tokyo",value:"Asia/Tokyo"}),e(g,{label:"Asia/Seoul",value:"Asia/Seoul"}),e(g,{label:"America/New_York",value:"America/New_York"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,{gutter:24},{default:t(()=>[e(c,{span:12},{default:t(()=>[e(r,{label:"自动更新"},{default:t(()=>[e(Z,{modelValue:d.value.configuration.autoUpdate,"onUpdate:modelValue":l[13]||(l[13]=u=>d.value.configuration.autoUpdate=u)},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:12},{default:t(()=>[e(r,{label:"调试模式"},{default:t(()=>[e(Z,{modelValue:d.value.configuration.debugMode,"onUpdate:modelValue":l[14]||(l[14]=u=>d.value.configuration.debugMode=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,{gutter:24},{default:t(()=>[e(c,{span:8},{default:t(()=>[e(r,{label:"屏幕亮度"},{default:t(()=>[e(b,{modelValue:d.value.configuration.customSettings.brightness,"onUpdate:modelValue":l[15]||(l[15]=u=>d.value.configuration.customSettings.brightness=u),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:8},{default:t(()=>[e(r,{label:"音量"},{default:t(()=>[e(b,{modelValue:d.value.configuration.customSettings.volume,"onUpdate:modelValue":l[16]||(l[16]=u=>d.value.configuration.customSettings.volume=u),min:0,max:100,"show-input":""},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:8},{default:t(()=>[e(r,{label:"休眠时间(分钟)"},{default:t(()=>[e(P,{modelValue:d.value.configuration.customSettings.sleepTimeout,"onUpdate:modelValue":l[17]||(l[17]=u=>d.value.configuration.customSettings.sleepTimeout=u),min:1,max:120,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),a("div",xt,[a("h3",Gt,[l[27]||(l[27]=i(" 位置信息 ",-1)),e(Z,{modelValue:$.value,"onUpdate:modelValue":l[18]||(l[18]=u=>$.value=u),style:{"margin-left":"16px"}},null,8,["modelValue"])]),$.value?(_(),F("div",Jt,[e(E,{gutter:24},{default:t(()=>[e(c,{span:8},{default:t(()=>[e(r,{label:"纬度",prop:"location.latitude"},{default:t(()=>[e(P,{modelValue:d.value.location.latitude,"onUpdate:modelValue":l[19]||(l[19]=u=>d.value.location.latitude=u),precision:6,step:1e-6,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:8},{default:t(()=>[e(r,{label:"经度",prop:"location.longitude"},{default:t(()=>[e(P,{modelValue:d.value.location.longitude,"onUpdate:modelValue":l[20]||(l[20]=u=>d.value.location.longitude=u),precision:6,step:1e-6,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(c,{span:8},{default:t(()=>[e(A,{onClick:ae,loading:S.value},{default:t(()=>l[28]||(l[28]=[i(" 获取当前位置 ",-1)])),_:1,__:[28]},8,["loading"])]),_:1})]),_:1}),e(E,{gutter:24},{default:t(()=>[e(c,{span:24},{default:t(()=>[e(r,{label:"地址",prop:"location.address"},{default:t(()=>[e(s,{modelValue:d.value.location.address,"onUpdate:modelValue":l[21]||(l[21]=u=>d.value.location.address=u),placeholder:"详细地址"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])):I("",!0)]),a("div",Kt,[l[29]||(l[29]=a("h3",{class:"section-title"},"备注信息",-1)),e(E,{gutter:24},{default:t(()=>[e(c,{span:24},{default:t(()=>[e(r,{label:"设备备注",prop:"notes"},{default:t(()=>[e(s,{modelValue:d.value.notes,"onUpdate:modelValue":l[22]||(l[22]=u=>d.value.notes=u),type:"textarea",rows:3,placeholder:"设备备注信息"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])}}}),Zt=pe(Qt,[["__scopeId","data-v-7e92777f"]]),el={key:0,class:"logs-content"},tl={class:"logs-filters"},ll={class:"filters-left"},al={class:"filters-right"},ol={class:"logs-list"},sl={class:"log-header"},nl={class:"log-meta"},il={class:"log-timestamp"},dl={class:"log-message"},ul={key:0,class:"log-details"},rl={class:"details-content"},cl={key:0,class:"empty-logs"},ml={class:"pagination-wrapper"},pl={class:"dialog-footer"},vl=me({__name:"DeviceLogsDialog",props:{modelValue:{type:Boolean},device:{default:null}},emits:["update:modelValue"],setup(T,{emit:D}){const f=T,N=D,X=ce({get:()=>f.modelValue,set:r=>N("update:modelValue",r)}),z=y(!1),U=y(""),O=y(""),S=y(null),$=y(1),R=y(50),d=y(0),Y=y([]);re(()=>f.modelValue,r=>{r&&f.device&&H()});const H=()=>le(null,null,function*(){if(f.device){z.value=!0;try{const r=yield M.getDeviceLogs(f.device.id,{page:$.value,pageSize:R.value,level:U.value||void 0});Y.value=r.data.list,d.value=r.data.total}catch(r){console.error("加载设备日志失败:",r),k.error("加载设备日志失败")}finally{z.value=!1}}}),q=()=>{$.value=1,H()},j=()=>{H()},K=()=>{k.success("日志导出功能开发中")},W=r=>{R.value=r,$.value=1,H()},ae=r=>{$.value=r,H()},Q=()=>{N("update:modelValue",!1)},B=r=>({info:"primary",warning:"warning",error:"danger",debug:"info"})[r]||"info",V=r=>({info:"信息",warning:"警告",error:"错误",debug:"调试"})[r]||r,l=r=>({system:"系统",user:"用户",network:"网络",hardware:"硬件",software:"软件"})[r]||r,s=r=>new Date(r).toLocaleString("zh-CN");return(r,c)=>{var se;const g=p("el-option"),L=p("el-select"),E=p("el-date-picker"),Z=p("el-icon"),b=p("el-button"),P=p("el-tag"),A=p("el-collapse-item"),x=p("el-collapse"),G=p("el-empty"),u=p("el-pagination"),de=p("el-dialog"),oe=Ue("loading");return _(),w(de,{modelValue:X.value,"onUpdate:modelValue":c[5]||(c[5]=n=>X.value=n),title:`设备日志 - ${((se=r.device)==null?void 0:se.serialNumber)||""}`,width:"80%","before-close":Q,class:"device-logs-dialog"},{footer:t(()=>[a("div",pl,[e(b,{onClick:Q},{default:t(()=>c[8]||(c[8]=[i("关闭",-1)])),_:1,__:[8]}),e(b,{type:"primary",onClick:K},{default:t(()=>c[9]||(c[9]=[i("导出日志",-1)])),_:1,__:[9]})])]),default:t(()=>[r.device?(_(),F("div",el,[a("div",tl,[a("div",ll,[e(L,{modelValue:U.value,"onUpdate:modelValue":c[0]||(c[0]=n=>U.value=n),placeholder:"日志级别",clearable:"",onChange:q},{default:t(()=>[e(g,{label:"全部级别",value:""}),e(g,{label:"信息",value:"info"}),e(g,{label:"警告",value:"warning"}),e(g,{label:"错误",value:"error"}),e(g,{label:"调试",value:"debug"})]),_:1},8,["modelValue"]),e(L,{modelValue:O.value,"onUpdate:modelValue":c[1]||(c[1]=n=>O.value=n),placeholder:"日志分类",clearable:"",onChange:q},{default:t(()=>[e(g,{label:"全部分类",value:""}),e(g,{label:"系统",value:"system"}),e(g,{label:"用户",value:"user"}),e(g,{label:"网络",value:"network"}),e(g,{label:"硬件",value:"hardware"}),e(g,{label:"软件",value:"software"})]),_:1},8,["modelValue"]),e(E,{modelValue:S.value,"onUpdate:modelValue":c[2]||(c[2]=n=>S.value=n),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",onChange:q},null,8,["modelValue"])]),a("div",al,[e(b,{onClick:j,loading:z.value},{default:t(()=>[e(Z,null,{default:t(()=>[e(C(je))]),_:1}),c[6]||(c[6]=i(" 刷新 ",-1))]),_:1,__:[6]},8,["loading"]),e(b,{onClick:K},{default:t(()=>[e(Z,null,{default:t(()=>[e(C(xe))]),_:1}),c[7]||(c[7]=i(" 导出日志 ",-1))]),_:1,__:[7]})])]),Te((_(),F("div",ol,[(_(!0),F(ne,null,ie(Y.value,n=>(_(),F("div",{key:n.id,class:ze(["log-item",`log-${n.level}`])},[a("div",sl,[a("div",nl,[e(P,{type:B(n.level),size:"small"},{default:t(()=>[i(m(V(n.level)),1)]),_:2},1032,["type"]),e(P,{type:"info",size:"small",style:{"margin-left":"8px"}},{default:t(()=>[i(m(l(n.category)),1)]),_:2},1024),a("span",il,m(s(n.timestamp)),1)])]),a("div",dl,m(n.message),1),n.details?(_(),F("div",ul,[e(x,null,{default:t(()=>[e(A,{title:"详细信息",name:"details"},{default:t(()=>[a("div",rl,[a("pre",null,m(JSON.stringify(n.details,null,2)),1)])]),_:2},1024)]),_:2},1024)])):I("",!0)],2))),128)),Y.value.length===0&&!z.value?(_(),F("div",cl,[e(G,{description:"暂无日志数据"})])):I("",!0)])),[[oe,z.value]]),a("div",ml,[e(u,{"current-page":$.value,"onUpdate:currentPage":c[3]||(c[3]=n=>$.value=n),"page-size":R.value,"onUpdate:pageSize":c[4]||(c[4]=n=>R.value=n),"page-sizes":[20,50,100],total:d.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:W,onCurrentChange:ae},null,8,["current-page","page-size","total"])])])):I("",!0)]),_:1},8,["modelValue","title"])}}}),fl=pe(vl,[["__scopeId","data-v-aa5316fb"]]),_l={class:"device-management"},gl={class:"page-header"},bl={class:"header-right"},yl={class:"stats-cards"},Vl={class:"stat-card"},wl={class:"stat-icon total"},hl={class:"stat-content"},Dl={class:"stat-value"},$l={class:"stat-card"},kl={class:"stat-icon online"},Cl={class:"stat-content"},Sl={class:"stat-value"},Ul={class:"stat-card"},Tl={class:"stat-icon offline"},zl={class:"stat-content"},El={class:"stat-value"},Ml={class:"stat-card"},Nl={class:"stat-icon error"},Ol={class:"stat-content"},Yl={class:"stat-value"},Ll={class:"search-filters"},Al={class:"filters-left"},Fl={class:"filters-right"},Il={class:"table-section"},Xl={class:"customer-info"},Bl={class:"customer-name"},Pl={class:"customer-phone"},Rl={class:"status-cell"},Hl={class:"status-text"},ql={class:"usage-stats"},jl={class:"usage-item"},xl={class:"value"},Gl={class:"usage-item"},Jl={class:"value"},Kl={class:"pagination-wrapper"},Wl=me({__name:"DeviceManagement",setup(T){const D=y(!1),f=y(""),N=y(""),X=y(""),z=y(""),U=y(1),O=y(20),S=y(0),$=y([]),R=y([]),d=y(null),Y=y({total:0,online:0,offline:0,error:0,maintenance:0}),H=y([]),q=y(!1),j=y(!1),K=y(!1),W=y(null),ae=()=>{U.value=1,s()},Q=()=>{U.value=1,s()},B=n=>{O.value=n,U.value=1,s()},V=n=>{U.value=n,s()},l=n=>{R.value=n},s=()=>le(null,null,function*(){D.value=!0;try{const n=yield M.getDevices({page:U.value,pageSize:O.value,keyword:f.value,status:N.value,model:X.value,customerId:z.value});$.value=n.data.list,S.value=n.data.total,Y.value=n.data.stats}catch(n){console.error("加载设备数据失败:",n),k.error("加载设备数据失败")}finally{D.value=!1}}),r=()=>le(null,null,function*(){try{const n=yield M.getCustomerOptions();H.value=n.data}catch(n){console.error("加载客户选项失败:",n)}}),c=n=>{d.value=n,q.value=!0},g=n=>{W.value=n,j.value=!0},L=n=>{q.value=!1,g(n)},E=()=>{W.value=null,j.value=!0},Z=()=>{s(),W.value=null},b=(n,o)=>le(null,null,function*(){try{switch(n){case"reboot":yield M.rebootDevice(o.id),k.success("设备重启指令已发送");break;case"maintenance":yield M.updateDeviceStatus(o.id,"maintenance"),k.success("设备已进入维护模式");break;case"activate":yield M.activateDevice(o.id),k.success("设备激活指令已发送");break;case"firmware":yield M.pushFirmware(o.id),k.success("固件推送已启动");break;case"logs":d.value=o,K.value=!0;return;case"delete":yield ke.confirm("确定要删除这个设备吗？此操作不可恢复。","确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),yield M.deleteDevice(o.id),k.success("设备已删除");break}s()}catch(h){h!=="cancel"&&(console.error("设备操作失败:",h),k.error("操作失败"))}}),P=n=>le(null,null,function*(){const o=R.value.map(h=>h.id);try{switch(n){case"updateStatus":k.info("批量状态更新功能开发中");break;case"pushFirmware":yield M.batchPushFirmware(o),k.success(`已向 ${o.length} 个设备推送固件`);break;case"reboot":yield M.batchRebootDevices(o),k.success(`已向 ${o.length} 个设备发送重启指令`);break;case"delete":yield ke.confirm(`确定要删除选中的 ${o.length} 个设备吗？此操作不可恢复。`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),yield M.batchDeleteDevices(o),k.success(`已删除 ${o.length} 个设备`);break}s()}catch(h){h!=="cancel"&&(console.error("批量操作失败:",h),k.error("操作失败"))}}),A=()=>{s()},x=n=>({"YX-EDU-2024":"primary","YX-HOME-2024":"success","YX-PRO-2024":"warning"})[n]||"info",G=n=>({"YX-EDU-2024":"教育版","YX-HOME-2024":"家庭版","YX-PRO-2024":"专业版"})[n]||n,u=n=>({online:"online",offline:"offline",error:"error",maintenance:"maintenance"})[n]||"offline",de=n=>({online:"在线",offline:"离线",error:"故障",maintenance:"维护中"})[n]||n,oe=n=>n?new Date(n).toLocaleString("zh-CN"):"无",se=n=>{if(!n)return"0分钟";const o=Math.floor(n/60),h=n%60;return o>0?`${o}小时${h}分钟`:`${h}分钟`};return Qe(()=>{s(),r()}),(n,o)=>{const h=p("el-icon"),ue=p("el-button"),Ee=p("el-input"),J=p("el-option"),ve=p("el-select"),ee=p("el-dropdown-item"),Ve=p("el-dropdown-menu"),we=p("el-dropdown"),te=p("el-table-column"),Me=p("el-tag"),Ne=p("el-table"),Oe=p("el-pagination"),Ye=Ue("loading");return _(),F("div",_l,[a("div",gl,[o[10]||(o[10]=a("div",{class:"header-left"},[a("h2",null,"设备管理"),a("p",{class:"header-subtitle"},"机器人设备监控与管理 · 练字机器人管理系统")],-1)),a("div",bl,[e(ue,{type:"primary",onClick:E},{default:t(()=>[e(h,null,{default:t(()=>[e(C(Ge))]),_:1}),o[9]||(o[9]=i(" 添加设备 ",-1))]),_:1,__:[9]})])]),a("div",yl,[a("div",Vl,[a("div",wl,[e(h,null,{default:t(()=>[e(C(Je))]),_:1})]),a("div",hl,[a("div",Dl,m(Y.value.total),1),o[11]||(o[11]=a("div",{class:"stat-label"},"设备总数",-1))])]),a("div",$l,[a("div",kl,[e(h,null,{default:t(()=>[e(C(ge))]),_:1})]),a("div",Cl,[a("div",Sl,m(Y.value.online),1),o[12]||(o[12]=a("div",{class:"stat-label"},"在线设备",-1))])]),a("div",Ul,[a("div",Tl,[e(h,null,{default:t(()=>[e(C(be))]),_:1})]),a("div",zl,[a("div",El,m(Y.value.offline),1),o[13]||(o[13]=a("div",{class:"stat-label"},"离线设备",-1))])]),a("div",Ml,[a("div",Nl,[e(h,null,{default:t(()=>[e(C(ye))]),_:1})]),a("div",Ol,[a("div",Yl,m(Y.value.error),1),o[14]||(o[14]=a("div",{class:"stat-label"},"故障设备",-1))])])]),a("div",Ll,[a("div",Al,[e(Ee,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=v=>f.value=v),placeholder:"搜索设备序列号、客户姓名、设备型号","prefix-icon":C(Ke),clearable:"",onInput:ae,style:{width:"350px"}},null,8,["modelValue","prefix-icon"]),e(ve,{modelValue:N.value,"onUpdate:modelValue":o[1]||(o[1]=v=>N.value=v),placeholder:"设备状态",clearable:"",onChange:Q},{default:t(()=>[e(J,{label:"全部状态",value:""}),e(J,{label:"在线",value:"online"}),e(J,{label:"离线",value:"offline"}),e(J,{label:"故障",value:"error"}),e(J,{label:"维护中",value:"maintenance"})]),_:1},8,["modelValue"]),e(ve,{modelValue:X.value,"onUpdate:modelValue":o[2]||(o[2]=v=>X.value=v),placeholder:"设备型号",clearable:"",onChange:Q},{default:t(()=>[e(J,{label:"全部型号",value:""}),e(J,{label:"教育版",value:"YX-EDU-2024"}),e(J,{label:"家庭版",value:"YX-HOME-2024"}),e(J,{label:"专业版",value:"YX-PRO-2024"})]),_:1},8,["modelValue"]),e(ve,{modelValue:z.value,"onUpdate:modelValue":o[3]||(o[3]=v=>z.value=v),placeholder:"所属客户",clearable:"",onChange:Q,filterable:""},{default:t(()=>[e(J,{label:"全部客户",value:""}),(_(!0),F(ne,null,ie(H.value,v=>(_(),w(J,{key:v.id,label:v.name,value:v.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),a("div",Fl,[R.value.length>0?(_(),w(we,{key:0,onCommand:P},{dropdown:t(()=>[e(Ve,null,{default:t(()=>[e(ee,{command:"updateStatus"},{default:t(()=>o[15]||(o[15]=[i("更新状态",-1)])),_:1,__:[15]}),e(ee,{command:"pushFirmware"},{default:t(()=>o[16]||(o[16]=[i("推送固件",-1)])),_:1,__:[16]}),e(ee,{command:"reboot"},{default:t(()=>o[17]||(o[17]=[i("重启设备",-1)])),_:1,__:[17]}),e(ee,{command:"delete",divided:""},{default:t(()=>o[18]||(o[18]=[i("批量删除",-1)])),_:1,__:[18]})]),_:1})]),_:1})):I("",!0)])]),a("div",Il,[Te((_(),w(Ne,{data:$.value,stripe:"",onSelectionChange:l},{default:t(()=>[e(te,{type:"selection",width:"55"}),e(te,{prop:"serialNumber",label:"设备序列号",width:"180"}),e(te,{prop:"model",label:"设备型号",width:"150"},{default:t(({row:v})=>[e(Me,{type:x(v.model),size:"small"},{default:t(()=>[i(m(G(v.model)),1)]),_:2},1032,["type"])]),_:1}),e(te,{label:"所属客户",width:"150"},{default:t(({row:v})=>[a("div",Xl,[a("div",Bl,m(v.customerName),1),a("div",Pl,m(v.customerPhone),1)])]),_:1}),e(te,{prop:"status",label:"设备状态",width:"120"},{default:t(({row:v})=>[a("div",Rl,[e(h,{class:ze([u(v.status),"status-icon"])},{default:t(()=>[v.status==="online"?(_(),w(C(ge),{key:0})):v.status==="offline"?(_(),w(C(be),{key:1})):v.status==="error"?(_(),w(C(ye),{key:2})):(_(),w(C(Ce),{key:3}))]),_:2},1032,["class"]),a("span",Hl,m(de(v.status)),1)])]),_:1}),e(te,{prop:"firmwareVersion",label:"固件版本",width:"120"}),e(te,{prop:"lastOnlineAt",label:"最后在线时间",width:"180"},{default:t(({row:v})=>[i(m(oe(v.lastOnlineAt)),1)]),_:1}),e(te,{prop:"activatedAt",label:"激活时间",width:"180"},{default:t(({row:v})=>[i(m(oe(v.activatedAt)),1)]),_:1}),e(te,{label:"使用统计",width:"150"},{default:t(({row:v})=>[a("div",ql,[a("div",jl,[o[19]||(o[19]=a("span",{class:"label"},"运行时长:",-1)),a("span",xl,m(se(v.totalRuntime)),1)]),a("div",Gl,[o[20]||(o[20]=a("span",{class:"label"},"使用次数:",-1)),a("span",Jl,m(v.usageCount)+"次",1)])])]),_:1}),e(te,{label:"操作",width:"200",fixed:"right"},{default:t(({row:v})=>[e(ue,{text:"",type:"primary",size:"small",onClick:fe=>c(v)},{default:t(()=>o[21]||(o[21]=[i(" 查看详情 ",-1)])),_:2,__:[21]},1032,["onClick"]),e(ue,{text:"",type:"primary",size:"small",onClick:fe=>g(v)},{default:t(()=>o[22]||(o[22]=[i(" 编辑 ",-1)])),_:2,__:[22]},1032,["onClick"]),e(we,{onCommand:fe=>b(fe,v),trigger:"click"},{dropdown:t(()=>[e(Ve,null,{default:t(()=>[v.status==="online"?(_(),w(ee,{key:0,command:"reboot"},{default:t(()=>o[24]||(o[24]=[i(" 重启设备 ",-1)])),_:1,__:[24]})):I("",!0),v.status!=="maintenance"?(_(),w(ee,{key:1,command:"maintenance"},{default:t(()=>o[25]||(o[25]=[i(" 进入维护 ",-1)])),_:1,__:[25]})):I("",!0),v.status==="offline"?(_(),w(ee,{key:2,command:"activate"},{default:t(()=>o[26]||(o[26]=[i(" 激活设备 ",-1)])),_:1,__:[26]})):I("",!0),e(ee,{command:"firmware"},{default:t(()=>o[27]||(o[27]=[i(" 推送固件 ",-1)])),_:1,__:[27]}),e(ee,{command:"logs"},{default:t(()=>o[28]||(o[28]=[i(" 查看日志 ",-1)])),_:1,__:[28]}),e(ee,{command:"delete",divided:""},{default:t(()=>o[29]||(o[29]=[i(" 删除设备 ",-1)])),_:1,__:[29]})]),_:2},1024)]),default:t(()=>[e(ue,{text:"",type:"primary",size:"small"},{default:t(()=>[o[23]||(o[23]=i(" 更多",-1)),e(h,{class:"el-icon--right"},{default:t(()=>[e(C(Se))]),_:1})]),_:1,__:[23]})]),_:2},1032,["onCommand"])]),_:1})]),_:1},8,["data"])),[[Ye,D.value]]),a("div",Kl,[e(Oe,{"current-page":U.value,"onUpdate:currentPage":o[4]||(o[4]=v=>U.value=v),"page-size":O.value,"onUpdate:pageSize":o[5]||(o[5]=v=>O.value=v),"page-sizes":[10,20,50,100],total:S.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:B,onCurrentChange:V},null,8,["current-page","page-size","total"])])]),e(Rt,{modelValue:q.value,"onUpdate:modelValue":o[6]||(o[6]=v=>q.value=v),device:d.value,onEdit:L,onStatusChange:A},null,8,["modelValue","device"]),e(Zt,{modelValue:j.value,"onUpdate:modelValue":o[7]||(o[7]=v=>j.value=v),device:W.value,onSuccess:Z},null,8,["modelValue","device"]),e(fl,{modelValue:K.value,"onUpdate:modelValue":o[8]||(o[8]=v=>K.value=v),device:d.value},null,8,["modelValue","device"])])}}}),aa=pe(Wl,[["__scopeId","data-v-b1b606e2"]]);export{aa as default};
