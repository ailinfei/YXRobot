const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/request-gBXlrDct.js","js/utils-T70AYnHr.js","js/element-plus-B_LAMX2W.js","js/vue-C2NPAEWw.js"])))=>i.map(i=>d[i]);
var Jt=Object.defineProperty,Qt=Object.defineProperties;var Wt=Object.getOwnPropertyDescriptors;var Rt=Object.getOwnPropertySymbols;var Zt=Object.prototype.hasOwnProperty,te=Object.prototype.propertyIsEnumerable;var Ft=(L,r,f)=>r in L?Jt(L,r,{enumerable:!0,configurable:!0,writable:!0,value:f}):L[r]=f,Dt=(L,r)=>{for(var f in r||(r={}))Zt.call(r,f)&&Ft(L,f,r[f]);if(Rt)for(var f of Rt(r))te.call(r,f)&&Ft(L,f,r[f]);return L},Mt=(L,r)=>Qt(L,Wt(r));var A=(L,r,f)=>new Promise((g,h)=>{var V=T=>{try{n(f.next(T))}catch(z){h(z)}},w=T=>{try{n(f.throw(T))}catch(z){h(z)}},n=T=>T.done?g(T.value):Promise.resolve(T.value).then(V,w);n((f=f.apply(L,r)).next())});import{A as Pt,B as ee,C as Ct,u as ft,D as Et,o as ae,k as le,F as oe,b as Y,G as Lt,H as Ot,I as It,J as Ht,e as Nt,K as qt,L as se,M as jt,N as ne,m as ie,O as Ut,P as Kt,j as St,q as zt,n as Xt,w as re,Q as de,R as ue,S as ce,T as pe,g as me,U as _e}from"./element-plus-B_LAMX2W.js";import{C as ve}from"./CountUp-DhNxH7hh.js";import{i as ht}from"./charts-4xgvsrqt.js";import{x as rt,r as k,c as at,j as wt,h as mt,n as bt,al as u,y as B,z as I,D as vt,A as e,K as st,Q as t,I as a,H as it,L as Tt,O as m,S as fe,ar as Gt,J as xt,u as S,X as pt,M as $,P as $t,a6 as Vt,a4 as ge,C as ye,V as Yt}from"./vue-C2NPAEWw.js";/* empty css                                                                         */import{_ as dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import tt from"./request-gBXlrDct.js";import{_ as At}from"./index-BdTSZfY1.js";import"./utils-T70AYnHr.js";const he={class:"stats-content"},be={class:"stats-value"},Ce={class:"stats-title"},$e={key:0,class:"stats-change"},Ve={class:"change-period"},we={key:0,class:"stats-trend"},De=rt({__name:"CharityStatsCard",props:{title:{},value:{},unit:{default:""},change:{default:void 0},changePeriod:{default:"较上月"},theme:{default:"primary"},icon:{default:"user"},decimals:{default:0},animationDuration:{default:2e3},showTrend:{type:Boolean,default:!1},trendData:{default:()=>[]}},setup(L){const r=L,f=k();let g=null;const h=at(()=>[`stats-card-${r.theme}`]),V=at(()=>[`icon-${r.theme}`]),w=at(()=>({user:ft,building:Ct,trophy:ee,money:Pt})[r.icon]||ft),n=at(()=>r.change===void 0?"":r.change>0?"change-positive":r.change<0?"change-negative":"change-neutral"),T=at(()=>r.change===void 0?Et:r.change>0?ae:r.change<0?le:Et),z=D=>{const b=Math.abs(D);return`${D>0?"+":D<0?"-":""}${b}%`},j=()=>{if(!f.value||!r.showTrend||r.trendData.length===0)return;g&&g.dispose(),g=ht(f.value);const D={grid:{left:0,right:0,top:0,bottom:0},xAxis:{type:"category",show:!1,data:r.trendData.map((b,y)=>y)},yAxis:{type:"value",show:!1},series:[{type:"line",data:r.trendData,smooth:!0,symbol:"none",lineStyle:{width:2,color:U()},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:U(.3)},{offset:1,color:U(.05)}]}}}]};g.setOption(D)},U=(D=1)=>{const b={primary:`rgba(64, 158, 255, ${D})`,success:`rgba(103, 194, 58, ${D})`,warning:`rgba(230, 162, 60, ${D})`,info:`rgba(144, 147, 153, ${D})`,danger:`rgba(245, 108, 108, ${D})`};return b[r.theme]||b.primary};return wt(()=>r.trendData,()=>{r.showTrend&&bt(()=>{j()})},{deep:!0}),mt(()=>{r.showTrend&&bt(()=>{j()})}),(D,b)=>{const y=u("el-icon");return I(),B("div",{class:vt(["charity-stats-card",h.value])},[e("div",{class:vt(["stats-icon",V.value])},[t(y,null,{default:a(()=>[(I(),it(Tt(w.value)))]),_:1})],2),e("div",he,[e("div",be,[t(ve,{value:Number(D.value),duration:D.animationDuration,decimals:D.decimals,suffix:D.unit,class:"value-number"},null,8,["value","duration","decimals","suffix"])]),e("div",Ce,m(D.title),1),D.change!==void 0?(I(),B("div",$e,[t(y,{class:vt(n.value)},{default:a(()=>[(I(),it(Tt(T.value)))]),_:1},8,["class"]),e("span",{class:vt(n.value)},m(z(D.change)),3),e("span",Ve,m(D.changePeriod),1)])):st("",!0)]),D.showTrend&&D.trendData.length>0?(I(),B("div",we,[e("div",{ref_key:"trendChart",ref:f,class:"trend-chart"},null,512)])):st("",!0)],2)}}}),kt=dt(De,[["__scopeId","data-v-6731f0bc"]]);class nt{static getCharityStats(){return A(this,null,function*(){return tt.get("/api/admin/charity/stats")})}static getEnhancedCharityStats(){return A(this,null,function*(){return tt.get("/api/admin/charity/enhanced-stats")})}static getCharityProjects(r){return A(this,null,function*(){return tt.get("/api/admin/charity/projects",r)})}static getCharityInstitutions(r){return A(this,null,function*(){return tt.get("/api/admin/charity/institutions",r)})}static getCharityActivities(r){return A(this,null,function*(){return tt.get("/api/admin/charity/activities",r)})}static getCharityChartData(){return A(this,null,function*(){return tt.get("/api/admin/charity/chart-data")})}static getSuccessStories(){return A(this,null,function*(){return tt.get("/api/admin/charity/success-stories")})}static createCharityProject(r){return A(this,null,function*(){return tt.post("/api/admin/charity/projects",r)})}static updateCharityProject(r,f){return A(this,null,function*(){return tt.put(`/api/admin/charity/projects/${r}`,f)})}static deleteCharityProject(r){return A(this,null,function*(){return tt.delete(`/api/admin/charity/projects/${r}`)})}static createCharityInstitution(r){return A(this,null,function*(){return tt.post("/api/admin/charity/institutions",r)})}static updateCharityInstitution(r,f){return A(this,null,function*(){return tt.put(`/api/admin/charity/institutions/${r}`,f)})}static deleteCharityInstitution(r){return A(this,null,function*(){return tt.delete(`/api/admin/charity/institutions/${r}`)})}static createCharityActivity(r){return A(this,null,function*(){return tt.post("/api/admin/charity/activities",r)})}static updateCharityActivity(r,f){return A(this,null,function*(){return tt.put(`/api/admin/charity/activities/${r}`,f)})}static deleteCharityActivity(r){return A(this,null,function*(){return tt.delete(`/api/admin/charity/activities/${r}`)})}static refreshCharityStats(){return A(this,null,function*(){return tt.post("/api/admin/charity/refresh-stats")})}static exportCharityData(r){return A(this,null,function*(){return(yield tt.get(`/api/admin/charity/export/${r}`,void 0,{responseType:"blob"})).data})}static updateCharityStats(r){return A(this,null,function*(){return tt.put("/api/admin/charity/stats",r)})}}const ke={class:"charity-stats-overview"},Me={class:"stats-grid"},Se={key:0,class:"detailed-stats"},Te={class:"stat-detail-card"},xe={class:"stat-items"},Ae={class:"stat-item"},Pe={class:"value primary"},Ie={class:"stat-item"},je={class:"value success"},Ue={class:"stat-item"},ze={class:"value info"},Re={class:"stat-detail-card"},Fe={class:"stat-items"},Ee={class:"stat-item"},qe={class:"value warning"},Ye={class:"stat-item"},Be={class:"value success"},Le={class:"stat-item"},Oe={class:"value info"},He={class:"stat-detail-card"},Ne={class:"stat-items"},Ke={class:"stat-item"},Xe={class:"value primary"},Ge={class:"stat-item"},Je={class:"value success"},Qe={class:"stat-item"},We={class:"value warning"},Ze={key:1,class:"update-info"},ta=rt({__name:"CharityStatsOverview",setup(L,{expose:r}){const f=k(!0),g=k(!1),h=k(null),V=k(null),w=at(()=>{if(!h.value)return 0;const y=h.value.totalProjects,l=h.value.completedProjects;return y>0?Math.round(l/y*100):0}),n=at(()=>{if(!h.value)return 0;const y=h.value.totalRaised,l=h.value.totalDonated;return y>0?Math.round(l/y*100):0}),T=y=>(y/1e4).toFixed(1),z=y=>new Date(y).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),j=(y=!0)=>A(null,null,function*(){y&&(f.value=!0);try{const l=yield nt.getEnhancedCharityStats();h.value=l.data,y&&Y.success("统计数据加载成功")}catch(l){console.error("加载统计数据失败:",l),Y.error("加载统计数据失败")}finally{y&&(f.value=!1)}}),U=()=>A(null,null,function*(){g.value=!0;try{yield j(!1),Y.success("数据已刷新")}catch(y){Y.error("刷新数据失败")}finally{g.value=!1}}),D=()=>{V.value=setInterval(()=>{j(!1)},3e4)},b=()=>{V.value&&(clearInterval(V.value),V.value=null)};return mt(()=>A(null,null,function*(){yield j(),D()})),fe(()=>{b()}),r({refresh:U,loadData:j}),(y,l)=>{var v,M,q,N,H,R,et,J,lt,K,_,x,o,s,X,F,Q,Z,O,W,G;const p=u("el-col"),i=u("el-row"),d=u("el-icon"),c=Gt("loading");return I(),B("div",ke,[xt((I(),B("div",Me,[t(kt,{title:"累计受益人群",value:((v=h.value)==null?void 0:v.totalBeneficiaries)||0,unit:"人",change:(q=(M=h.value)==null?void 0:M.monthlyComparison)==null?void 0:q.beneficiariesChange,theme:"primary",icon:"user","show-trend":!0,"trend-data":((H=(N=h.value)==null?void 0:N.trends)==null?void 0:H.beneficiariesTrend)||[],"animation-duration":2e3},null,8,["value","change","trend-data"]),t(kt,{title:"合作机构数量",value:((R=h.value)==null?void 0:R.cooperatingInstitutions)||0,unit:"家",change:(J=(et=h.value)==null?void 0:et.monthlyComparison)==null?void 0:J.institutionsChange,theme:"success",icon:"building","show-trend":!0,"trend-data":((K=(lt=h.value)==null?void 0:lt.trends)==null?void 0:K.institutionsTrend)||[],"animation-duration":2200},null,8,["value","change","trend-data"]),t(kt,{title:"公益项目数量",value:((_=h.value)==null?void 0:_.totalProjects)||0,unit:"个",change:(o=(x=h.value)==null?void 0:x.monthlyComparison)==null?void 0:o.projectsChange,theme:"info",icon:"trophy","show-trend":!0,"trend-data":((X=(s=h.value)==null?void 0:s.trends)==null?void 0:X.projectsTrend)||[],"animation-duration":2400},null,8,["value","change","trend-data"]),t(kt,{title:"筹集资金总额",value:T(((F=h.value)==null?void 0:F.totalRaised)||0),unit:"万元",change:(Z=(Q=h.value)==null?void 0:Q.monthlyComparison)==null?void 0:Z.fundingChange,theme:"warning",icon:"money","show-trend":!0,"trend-data":((W=(O=h.value)==null?void 0:O.trends)==null?void 0:W.fundingTrend)||[],"animation-duration":2600,decimals:1},null,8,["value","change","trend-data"])])),[[c,f.value]]),h.value?(I(),B("div",Se,[t(i,{gutter:24},{default:a(()=>[t(p,{span:8},{default:a(()=>[e("div",Te,[l[3]||(l[3]=e("h4",null,"项目执行情况",-1)),e("div",xe,[e("div",Ae,[l[0]||(l[0]=e("span",{class:"label"},"进行中项目",-1)),e("span",Pe,m(h.value.activeProjects),1)]),e("div",Ie,[l[1]||(l[1]=e("span",{class:"label"},"已完成项目",-1)),e("span",je,m(h.value.completedProjects),1)]),e("div",Ue,[l[2]||(l[2]=e("span",{class:"label"},"项目完成率",-1)),e("span",ze,m(w.value)+"%",1)])])])]),_:1}),t(p,{span:8},{default:a(()=>[e("div",Re,[l[7]||(l[7]=e("h4",null,"资金使用情况",-1)),e("div",Fe,[e("div",Ee,[l[4]||(l[4]=e("span",{class:"label"},"已筹集资金",-1)),e("span",qe,m(T(h.value.totalRaised))+"万",1)]),e("div",Ye,[l[5]||(l[5]=e("span",{class:"label"},"已使用资金",-1)),e("span",Be,m(T(h.value.totalDonated))+"万",1)]),e("div",Le,[l[6]||(l[6]=e("span",{class:"label"},"资金使用率",-1)),e("span",Oe,m(n.value)+"%",1)])])])]),_:1}),t(p,{span:8},{default:a(()=>[e("div",He,[l[11]||(l[11]=e("h4",null,"志愿者参与情况",-1)),e("div",Ne,[e("div",Ke,[l[8]||(l[8]=e("span",{class:"label"},"注册志愿者",-1)),e("span",Xe,m(h.value.totalVolunteers),1)]),e("div",Ge,[l[9]||(l[9]=e("span",{class:"label"},"活跃志愿者",-1)),e("span",Je,m(h.value.activeVolunteers),1)]),e("div",Qe,[l[10]||(l[10]=e("span",{class:"label"},"本月活动",-1)),e("span",We,m(h.value.thisMonthActivities),1)])])])]),_:1})]),_:1})])):st("",!0),(G=h.value)!=null&&G.lastUpdated?(I(),B("div",Ze,[t(d,null,{default:a(()=>[t(S(oe))]),_:1}),e("span",null,"最后更新时间: "+m(z(h.value.lastUpdated)),1)])):st("",!0)])}}}),ea=dt(ta,[["__scopeId","data-v-2f3f7173"]]),aa={class:"institution-form"},la={class:"option-item"},oa={class:"option-item"},sa={class:"option-item"},na={class:"option-item"},ia={class:"option-item"},ra={class:"form-actions"},da=rt({__name:"InstitutionForm",props:{institution:{default:null},mode:{default:"add"}},emits:["submit","cancel"],setup(L,{expose:r,emit:f}){const g=L,h=f,V=k(),w=k(!1),n=pt({name:"",type:"",location:"",locationArray:[],address:"",contactPerson:"",contactPhone:"",email:"",studentCount:0,status:"active",deviceCount:0,cooperationDate:"",lastVisitDate:"",notes:""}),T=[{value:"北京市",label:"北京市",children:[{value:"朝阳区",label:"朝阳区"},{value:"海淀区",label:"海淀区"},{value:"西城区",label:"西城区"},{value:"东城区",label:"东城区"},{value:"丰台区",label:"丰台区"}]},{value:"上海市",label:"上海市",children:[{value:"浦东新区",label:"浦东新区"},{value:"黄浦区",label:"黄浦区"},{value:"静安区",label:"静安区"},{value:"徐汇区",label:"徐汇区"},{value:"长宁区",label:"长宁区"}]},{value:"广东省",label:"广东省",children:[{value:"广州市",label:"广州市"},{value:"深圳市",label:"深圳市"},{value:"珠海市",label:"珠海市"},{value:"佛山市",label:"佛山市"},{value:"东莞市",label:"东莞市"}]},{value:"浙江省",label:"浙江省",children:[{value:"杭州市",label:"杭州市"},{value:"宁波市",label:"宁波市"},{value:"温州市",label:"温州市"},{value:"嘉兴市",label:"嘉兴市"},{value:"湖州市",label:"湖州市"}]},{value:"江苏省",label:"江苏省",children:[{value:"南京市",label:"南京市"},{value:"苏州市",label:"苏州市"},{value:"无锡市",label:"无锡市"},{value:"常州市",label:"常州市"},{value:"南通市",label:"南通市"}]}],z={name:[{required:!0,message:"请输入机构名称",trigger:"blur"},{min:2,max:50,message:"机构名称长度在2-50个字符",trigger:"blur"}],type:[{required:!0,message:"请选择机构类型",trigger:"change"}],location:[{required:!0,message:"请选择所在地区",trigger:"change"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"},{min:5,max:100,message:"详细地址长度在5-100个字符",trigger:"blur"}],contactPerson:[{required:!0,message:"请输入联系人姓名",trigger:"blur"},{min:2,max:20,message:"联系人姓名长度在2-20个字符",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$|^0\d{2,3}-?\d{7,8}$/,message:"请输入正确的电话号码",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],studentCount:[{required:!0,message:"请输入受益学生数量",trigger:"blur"},{type:"number",min:0,max:1e4,message:"学生数量应在0-10000之间",trigger:"blur"}],cooperationDate:[{required:!0,message:"请选择合作开始时间",trigger:"change"}]},j=y=>{y&&y.length>0?n.location=y.join(" "):n.location=""},U=()=>{g.institution&&g.mode==="edit"?Object.assign(n,{name:g.institution.name,type:g.institution.type,location:g.institution.location,locationArray:g.institution.location.split(" "),address:g.institution.address,contactPerson:g.institution.contactPerson,contactPhone:g.institution.contactPhone,email:g.institution.email,studentCount:g.institution.studentCount,status:g.institution.status,deviceCount:g.institution.deviceCount,cooperationDate:g.institution.cooperationDate,lastVisitDate:g.institution.lastVisitDate||"",notes:g.institution.notes}):Object.assign(n,{name:"",type:"",location:"",locationArray:[],address:"",contactPerson:"",contactPhone:"",email:"",studentCount:0,status:"active",deviceCount:0,cooperationDate:"",lastVisitDate:"",notes:""})},D=()=>A(null,null,function*(){var y;if(V.value)try{yield V.value.validate(),w.value=!0;const l=Mt(Dt({},n),{id:((y=g.institution)==null?void 0:y.id)||void 0});delete l.locationArray,h("submit",l)}catch(l){Y.error("请检查表单填写是否正确")}finally{w.value=!1}}),b=()=>{h("cancel")};return wt(()=>g.institution,()=>{U()},{immediate:!0}),mt(()=>{U()}),r({resetForm:()=>{var y;(y=V.value)==null||y.resetFields(),U()}}),(y,l)=>{const p=u("el-input"),i=u("el-form-item"),d=u("el-col"),c=u("el-icon"),v=u("el-option"),M=u("el-select"),q=u("el-row"),N=u("el-cascader"),H=u("el-input-number"),R=u("el-radio"),et=u("el-radio-group"),J=u("el-date-picker"),lt=u("el-form"),K=u("el-button");return I(),B("div",aa,[t(lt,{ref_key:"formRef",ref:V,model:n,rules:z,"label-width":"120px","label-position":"left"},{default:a(()=>[t(q,{gutter:24},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(i,{label:"机构名称",prop:"name"},{default:a(()=>[t(p,{modelValue:n.name,"onUpdate:modelValue":l[0]||(l[0]=_=>n.name=_),placeholder:"请输入机构名称",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(i,{label:"机构类型",prop:"type"},{default:a(()=>[t(M,{modelValue:n.type,"onUpdate:modelValue":l[1]||(l[1]=_=>n.type=_),placeholder:"请选择机构类型",style:{width:"100%"}},{default:a(()=>[t(v,{label:"学校",value:"school"},{default:a(()=>[e("div",la,[t(c,null,{default:a(()=>[t(S(Lt))]),_:1}),l[13]||(l[13]=e("span",null,"学校",-1))])]),_:1}),t(v,{label:"社区中心",value:"community"},{default:a(()=>[e("div",oa,[t(c,null,{default:a(()=>[t(S(Ct))]),_:1}),l[14]||(l[14]=e("span",null,"社区中心",-1))])]),_:1}),t(v,{label:"福利院",value:"orphanage"},{default:a(()=>[e("div",sa,[t(c,null,{default:a(()=>[t(S(Ot))]),_:1}),l[15]||(l[15]=e("span",null,"福利院",-1))])]),_:1}),t(v,{label:"图书馆",value:"library"},{default:a(()=>[e("div",na,[t(c,null,{default:a(()=>[t(S(It))]),_:1}),l[16]||(l[16]=e("span",null,"图书馆",-1))])]),_:1}),t(v,{label:"医院",value:"hospital"},{default:a(()=>[e("div",ia,[t(c,null,{default:a(()=>[t(S(Ht))]),_:1}),l[17]||(l[17]=e("span",null,"医院",-1))])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(q,{gutter:24},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(i,{label:"所在地区",prop:"location"},{default:a(()=>[t(N,{modelValue:n.locationArray,"onUpdate:modelValue":l[2]||(l[2]=_=>n.locationArray=_),options:T,placeholder:"请选择所在地区",style:{width:"100%"},onChange:j},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(i,{label:"详细地址",prop:"address"},{default:a(()=>[t(p,{modelValue:n.address,"onUpdate:modelValue":l[3]||(l[3]=_=>n.address=_),placeholder:"请输入详细地址",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(q,{gutter:24},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(i,{label:"联系人",prop:"contactPerson"},{default:a(()=>[t(p,{modelValue:n.contactPerson,"onUpdate:modelValue":l[4]||(l[4]=_=>n.contactPerson=_),placeholder:"请输入联系人姓名",maxlength:"20"},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(i,{label:"联系电话",prop:"contactPhone"},{default:a(()=>[t(p,{modelValue:n.contactPhone,"onUpdate:modelValue":l[5]||(l[5]=_=>n.contactPhone=_),placeholder:"请输入联系电话",maxlength:"20"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(q,{gutter:24},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(i,{label:"电子邮箱",prop:"email"},{default:a(()=>[t(p,{modelValue:n.email,"onUpdate:modelValue":l[6]||(l[6]=_=>n.email=_),placeholder:"请输入电子邮箱",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(i,{label:"受益学生数",prop:"studentCount"},{default:a(()=>[t(H,{modelValue:n.studentCount,"onUpdate:modelValue":l[7]||(l[7]=_=>n.studentCount=_),min:0,max:1e4,placeholder:"请输入受益学生数量",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(q,{gutter:24},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(i,{label:"合作状态",prop:"status"},{default:a(()=>[t(et,{modelValue:n.status,"onUpdate:modelValue":l[8]||(l[8]=_=>n.status=_)},{default:a(()=>[t(R,{value:"active"},{default:a(()=>l[18]||(l[18]=[$("合作中",-1)])),_:1,__:[18]}),t(R,{value:"pending"},{default:a(()=>l[19]||(l[19]=[$("待审核",-1)])),_:1,__:[19]}),t(R,{value:"inactive"},{default:a(()=>l[20]||(l[20]=[$("暂停合作",-1)])),_:1,__:[20]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(i,{label:"设备数量",prop:"deviceCount"},{default:a(()=>[t(H,{modelValue:n.deviceCount,"onUpdate:modelValue":l[9]||(l[9]=_=>n.deviceCount=_),min:0,max:100,placeholder:"已配置设备数量",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(i,{label:"合作开始时间",prop:"cooperationDate"},{default:a(()=>[t(J,{modelValue:n.cooperationDate,"onUpdate:modelValue":l[10]||(l[10]=_=>n.cooperationDate=_),type:"date",placeholder:"请选择合作开始时间",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),t(i,{label:"最近探访时间",prop:"lastVisitDate"},{default:a(()=>[t(J,{modelValue:n.lastVisitDate,"onUpdate:modelValue":l[11]||(l[11]=_=>n.lastVisitDate=_),type:"date",placeholder:"请选择最近探访时间",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"300px"}},null,8,["modelValue"])]),_:1}),t(i,{label:"备注信息",prop:"notes"},{default:a(()=>[t(p,{modelValue:n.notes,"onUpdate:modelValue":l[12]||(l[12]=_=>n.notes=_),type:"textarea",rows:4,placeholder:"请输入备注信息",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),e("div",ra,[t(K,{onClick:b},{default:a(()=>l[21]||(l[21]=[$("取消",-1)])),_:1,__:[21]}),t(K,{type:"primary",onClick:D,loading:w.value},{default:a(()=>[$(m(y.mode==="add"?"添加":"保存"),1)]),_:1},8,["loading"])])])}}}),Bt=dt(da,[["__scopeId","data-v-3ed57bef"]]),ua={key:0,class:"institution-detail"},ca={class:"detail-section"},pa={class:"section-header"},ma={class:"institution-title"},_a={class:"action-buttons"},va={class:"info-card"},fa={class:"info-value"},ga={class:"info-card"},ya={class:"info-value"},ha={class:"info-card"},ba={class:"info-value"},Ca={class:"detail-section"},$a={class:"contact-info"},Va={class:"contact-item"},wa={class:"contact-content"},Da={class:"contact-value"},ka={class:"contact-item"},Ma={class:"contact-content"},Sa={class:"contact-value"},Ta={key:0,class:"contact-item"},xa={class:"contact-content"},Aa={class:"contact-value"},Pa={class:"address-info"},Ia={class:"address-item"},ja={class:"address-content"},Ua={class:"address-value"},za={class:"detail-section"},Ra={class:"stat-card"},Fa={class:"stat-icon student"},Ea={class:"stat-content"},qa={class:"stat-value"},Ya={class:"stat-card"},Ba={class:"stat-icon device"},La={class:"stat-content"},Oa={class:"stat-value"},Ha={class:"stat-card"},Na={class:"stat-icon cooperation"},Ka={class:"stat-content"},Xa={class:"stat-value"},Ga={class:"stat-card"},Ja={class:"stat-icon visit"},Qa={class:"stat-content"},Wa={class:"stat-value"},Za={class:"detail-section"},tl={class:"timeline-content"},el={key:0,class:"detail-section"},al={class:"notes-content"},ll=rt({__name:"InstitutionDetail",props:{institution:{}},emits:["edit","close"],setup(L,{emit:r}){const f=L,g=r,h=at(()=>{var q;if(!((q=f.institution)!=null&&q.cooperationDate))return 0;const c=new Date(f.institution.cooperationDate),M=Math.abs(new Date().getTime()-c.getTime());return Math.ceil(M/(1e3*60*60*24))}),V=at(()=>{var N;if(!((N=f.institution)!=null&&N.lastVisitDate))return"未探访";const c=new Date(f.institution.lastVisitDate),M=Math.abs(new Date().getTime()-c.getTime());return`${Math.ceil(M/(1e3*60*60*24))}天前`}),w=at(()=>f.institution?[{date:f.institution.cooperationDate,title:"开始合作",description:`与${f.institution.name}正式建立合作关系`,type:"primary"},{date:f.institution.lastVisitDate||f.institution.cooperationDate,title:"实地探访",description:"进行实地探访，了解合作进展和需求",type:"success"},{date:new Date().toISOString().slice(0,10),title:"当前状态",description:`合作状态：${p(f.institution.status)}`,type:f.institution.status==="active"?"success":"warning"}]:[]),n=()=>{g("edit")},T=()=>{f.institution&&Y.info(`联系 ${f.institution.name}：${f.institution.contactPhone}`)},z=c=>{Y.info(`拨打电话：${c}`)},j=c=>{Y.info(`发送邮件至：${c}`)},U=()=>{f.institution&&Y.info(`查看 ${f.institution.name} 的地图位置`)},D=c=>({school:Lt,community:Ct,orphanage:Ot,library:It,hospital:Ht})[c]||Ct,b=c=>`type-${c}`,y=c=>({school:"学校",community:"社区中心",orphanage:"福利院",library:"图书馆",hospital:"医院"})[c]||c,l=c=>({school:"primary",community:"success",orphanage:"warning",library:"info",hospital:"danger"})[c]||"",p=c=>({active:"合作中",inactive:"暂停合作",pending:"待审核"})[c]||c,i=c=>({active:"success",inactive:"info",pending:"warning"})[c]||"",d=c=>c?new Date(c).toLocaleDateString("zh-CN"):"";return(c,v)=>{const M=u("el-icon"),q=u("el-tag"),N=u("el-button"),H=u("el-col"),R=u("el-row"),et=u("el-link"),J=u("el-timeline-item"),lt=u("el-timeline");return c.institution?(I(),B("div",ua,[e("div",ca,[e("div",pa,[e("div",ma,[t(M,{class:vt(["type-icon",b(c.institution.type)])},{default:a(()=>[(I(),it(Tt(D(c.institution.type))))]),_:1},8,["class"]),e("h3",null,m(c.institution.name),1),t(q,{type:i(c.institution.status),size:"large"},{default:a(()=>[$(m(p(c.institution.status)),1)]),_:1},8,["type"])]),e("div",_a,[t(N,{type:"primary",onClick:n},{default:a(()=>[t(M,null,{default:a(()=>[t(S(Nt))]),_:1}),v[2]||(v[2]=$(" 编辑信息 ",-1))]),_:1,__:[2]}),t(N,{onClick:T},{default:a(()=>[t(M,null,{default:a(()=>[t(S(qt))]),_:1}),v[3]||(v[3]=$(" 联系机构 ",-1))]),_:1,__:[3]})])]),t(R,{gutter:24,class:"info-grid"},{default:a(()=>[t(H,{span:8},{default:a(()=>[e("div",va,[v[4]||(v[4]=e("div",{class:"info-label"},"机构类型",-1)),e("div",fa,[t(q,{type:l(c.institution.type)},{default:a(()=>[$(m(y(c.institution.type)),1)]),_:1},8,["type"])])])]),_:1}),t(H,{span:8},{default:a(()=>[e("div",ga,[v[5]||(v[5]=e("div",{class:"info-label"},"所在地区",-1)),e("div",ya,m(c.institution.location),1)])]),_:1}),t(H,{span:8},{default:a(()=>[e("div",ha,[v[6]||(v[6]=e("div",{class:"info-label"},"合作时间",-1)),e("div",ba,m(d(c.institution.cooperationDate)),1)])]),_:1})]),_:1})]),e("div",Ca,[v[12]||(v[12]=e("h4",{class:"section-title"},"联系信息",-1)),t(R,{gutter:24},{default:a(()=>[t(H,{span:12},{default:a(()=>[e("div",$a,[e("div",Va,[t(M,null,{default:a(()=>[t(S(ft))]),_:1}),e("div",wa,[v[7]||(v[7]=e("div",{class:"contact-label"},"联系人",-1)),e("div",Da,m(c.institution.contactPerson),1)])]),e("div",ka,[t(M,null,{default:a(()=>[t(S(qt))]),_:1}),e("div",Ma,[v[8]||(v[8]=e("div",{class:"contact-label"},"联系电话",-1)),e("div",Sa,[t(et,{type:"primary",onClick:v[0]||(v[0]=K=>z(c.institution.contactPhone))},{default:a(()=>[$(m(c.institution.contactPhone),1)]),_:1})])])]),c.institution.email?(I(),B("div",Ta,[t(M,null,{default:a(()=>[t(S(se))]),_:1}),e("div",xa,[v[9]||(v[9]=e("div",{class:"contact-label"},"电子邮箱",-1)),e("div",Aa,[t(et,{type:"primary",onClick:v[1]||(v[1]=K=>j(c.institution.email))},{default:a(()=>[$(m(c.institution.email),1)]),_:1})])])])):st("",!0)])]),_:1}),t(H,{span:12},{default:a(()=>[e("div",Pa,[e("div",Ia,[t(M,null,{default:a(()=>[t(S(jt))]),_:1}),e("div",ja,[v[11]||(v[11]=e("div",{class:"address-label"},"详细地址",-1)),e("div",Ua,m(c.institution.address),1),t(N,{type:"primary",text:"",size:"small",onClick:U},{default:a(()=>[t(M,null,{default:a(()=>[t(S(ne))]),_:1}),v[10]||(v[10]=$(" 查看地图 ",-1))]),_:1,__:[10]})])])])]),_:1})]),_:1})]),e("div",za,[v[17]||(v[17]=e("h4",{class:"section-title"},"统计数据",-1)),t(R,{gutter:24},{default:a(()=>[t(H,{span:6},{default:a(()=>[e("div",Ra,[e("div",Fa,[t(M,null,{default:a(()=>[t(S(ft))]),_:1})]),e("div",Ea,[e("div",qa,m(c.institution.studentCount),1),v[13]||(v[13]=e("div",{class:"stat-label"},"受益学生",-1))])])]),_:1}),t(H,{span:6},{default:a(()=>[e("div",Ya,[e("div",Ba,[t(M,null,{default:a(()=>[t(S(ie))]),_:1})]),e("div",La,[e("div",Oa,m(c.institution.deviceCount),1),v[14]||(v[14]=e("div",{class:"stat-label"},"配置设备",-1))])])]),_:1}),t(H,{span:6},{default:a(()=>[e("div",Ha,[e("div",Na,[t(M,null,{default:a(()=>[t(S(Ut))]),_:1})]),e("div",Ka,[e("div",Xa,m(h.value),1),v[15]||(v[15]=e("div",{class:"stat-label"},"合作天数",-1))])])]),_:1}),t(H,{span:6},{default:a(()=>[e("div",Ga,[e("div",Ja,[t(M,null,{default:a(()=>[t(S(Kt))]),_:1})]),e("div",Qa,[e("div",Wa,m(V.value),1),v[16]||(v[16]=e("div",{class:"stat-label"},"距上次探访",-1))])])]),_:1})]),_:1})]),e("div",Za,[v[18]||(v[18]=e("h4",{class:"section-title"},"合作历史",-1)),t(lt,null,{default:a(()=>[(I(!0),B($t,null,Vt(w.value,(K,_)=>(I(),it(J,{key:_,timestamp:K.date,type:K.type},{default:a(()=>[e("div",tl,[e("h5",null,m(K.title),1),e("p",null,m(K.description),1)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})]),c.institution.notes?(I(),B("div",el,[v[19]||(v[19]=e("h4",{class:"section-title"},"备注信息",-1)),e("div",al,[e("p",null,m(c.institution.notes),1)])])):st("",!0)])):st("",!0)}}}),ol=dt(ll,[["__scopeId","data-v-bfd93e3b"]]),sl={class:"institution-management"},nl={class:"search-filter-section"},il={class:"filter-row"},rl={class:"filter-item"},dl={class:"filter-item"},ul={class:"filter-item"},cl={class:"filter-actions"},pl={class:"institution-list"},ml={class:"institution-name"},_l={class:"name-info"},vl={class:"name"},fl={class:"id"},gl={class:"student-count"},yl={class:"device-count"},hl={class:"action-buttons"},bl={class:"pagination-wrapper"},Cl=rt({__name:"InstitutionManagement",setup(L,{expose:r}){const f=k(!1),g=k(),h=k([]),V=k([]),w=k(!1),n=k(!1),T=k(!1),z=k(null),j=pt({keyword:"",type:"",status:""}),U=pt({page:1,pageSize:20,total:0}),D=pt({prop:"",order:""}),b=o=>({school:"学校",orphanage:"孤儿院",community:"社区中心",hospital:"医院",library:"图书馆"})[o]||o,y=o=>({active:"活跃合作",inactive:"非活跃",pending:"待处理"})[o]||o,l=o=>({school:"primary",orphanage:"success",community:"info",hospital:"warning",library:"danger"})[o]||"",p=o=>({active:"success",inactive:"info",pending:"warning"})[o]||"",i=o=>({school:"#409EFF",orphanage:"#67C23A",community:"#909399",hospital:"#E6A23C",library:"#F56C6C"})[o]||"#909399",d=o=>o?new Date(o).toLocaleDateString("zh-CN"):"-",c=()=>A(null,null,function*(){f.value=!0;try{const o={page:U.page,pageSize:U.pageSize,keyword:j.keyword,type:j.type,status:j.status,sortBy:D.prop,sortOrder:D.order},s=yield nt.getCharityInstitutions(o);h.value=s.data.list,U.total=s.data.total}catch(o){console.error("加载机构列表失败:",o),Y.error("加载机构列表失败")}finally{f.value=!1}}),v=()=>{U.page=1,c()},M=()=>{w.value=!0},q=o=>{z.value=o,T.value=!0},N=o=>{z.value=o,n.value=!0},H=o=>{T.value=!1,z.value=o,n.value=!0},R=()=>{w.value=!1,n.value=!1,T.value=!1,z.value=null},et=o=>A(null,null,function*(){try{o.id?(yield nt.updateCharityInstitution(o.id,o),Y.success("机构信息更新成功")):(yield nt.createCharityInstitution(o),Y.success("机构添加成功")),R(),c()}catch(s){console.error("保存机构信息失败:",s),Y.error("保存机构信息失败")}}),J=o=>A(null,null,function*(){try{yield Xt.confirm(`确定要删除机构"${o.name}"吗？此操作不可恢复。`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),yield nt.deleteCharityInstitution(o.id),Y.success("删除成功");const{clearCache:s}=yield At(()=>A(null,null,function*(){const{clearCache:X}=yield import("./request-gBXlrDct.js");return{clearCache:X}}),__vite__mapDeps([0,1,2,3]));s("/admin/charity/institutions"),c()}catch(s){s!=="cancel"&&(console.error("删除机构失败:",s),Y.error("删除机构失败，请稍后重试"))}}),lt=o=>{V.value=o},K=({prop:o,order:s})=>{D.prop=o,D.order=s==="ascending"?"asc":s==="descending"?"desc":"",c()},_=o=>{U.pageSize=o,U.page=1,c()},x=o=>{U.page=o,c()};return mt(()=>{c()}),r({refresh:c,getSelectedInstitutions:()=>V.value}),(o,s)=>{const X=u("el-icon"),F=u("el-input"),Q=u("el-option"),Z=u("el-select"),O=u("el-button"),W=u("el-card"),G=u("el-table-column"),ct=u("el-avatar"),_t=u("el-tag"),ot=u("el-table"),E=u("el-pagination"),ut=u("el-dialog");return I(),B("div",sl,[e("div",nl,[t(W,{class:"filter-card"},{default:a(()=>[e("div",il,[e("div",rl,[t(F,{modelValue:j.keyword,"onUpdate:modelValue":s[0]||(s[0]=P=>j.keyword=P),placeholder:"搜索机构名称、联系人或地区",clearable:"",onClear:v,onKeyup:ge(v,["enter"])},{prefix:a(()=>[t(X,null,{default:a(()=>[t(S(St))]),_:1})]),_:1},8,["modelValue"])]),e("div",dl,[t(Z,{modelValue:j.type,"onUpdate:modelValue":s[1]||(s[1]=P=>j.type=P),placeholder:"机构类型",clearable:"",onChange:v},{default:a(()=>[t(Q,{label:"全部类型",value:""}),t(Q,{label:"学校",value:"school"}),t(Q,{label:"孤儿院",value:"orphanage"}),t(Q,{label:"社区中心",value:"community"}),t(Q,{label:"医院",value:"hospital"}),t(Q,{label:"图书馆",value:"library"})]),_:1},8,["modelValue"])]),e("div",ul,[t(Z,{modelValue:j.status,"onUpdate:modelValue":s[2]||(s[2]=P=>j.status=P),placeholder:"合作状态",clearable:"",onChange:v},{default:a(()=>[t(Q,{label:"全部状态",value:""}),t(Q,{label:"活跃合作",value:"active"}),t(Q,{label:"非活跃",value:"inactive"}),t(Q,{label:"待处理",value:"pending"})]),_:1},8,["modelValue"])]),e("div",cl,[t(O,{type:"primary",onClick:v},{default:a(()=>[t(X,null,{default:a(()=>[t(S(St))]),_:1}),s[8]||(s[8]=$(" 搜索 ",-1))]),_:1,__:[8]}),t(O,{type:"success",onClick:M},{default:a(()=>[t(X,null,{default:a(()=>[t(S(zt))]),_:1}),s[9]||(s[9]=$(" 添加机构 ",-1))]),_:1,__:[9]})])])]),_:1})]),e("div",pl,[t(W,null,{header:a(()=>s[10]||(s[10]=[e("div",{class:"card-header"},[e("span",{class:"title"},"合作机构列表")],-1)])),default:a(()=>[t(ot,{ref_key:"tableRef",ref:g,data:h.value,loading:f.value,stripe:"",onSelectionChange:lt,onSortChange:K},{default:a(()=>[t(G,{type:"selection",width:"55"}),t(G,{prop:"name",label:"机构名称","min-width":"200",sortable:"custom"},{default:a(({row:P})=>[e("div",ml,[t(ct,{size:32,style:ye({backgroundColor:i(P.type)})},{default:a(()=>[$(m(P.name.charAt(0)),1)]),_:2},1032,["style"]),e("div",_l,[e("div",vl,m(P.name),1),e("div",fl,"ID: "+m(P.id),1)])])]),_:1}),t(G,{prop:"type",label:"机构类型",width:"120",sortable:"custom"},{default:a(({row:P})=>[t(_t,{type:l(P.type),size:"small"},{default:a(()=>[$(m(b(P.type)),1)]),_:2},1032,["type"])]),_:1}),t(G,{prop:"location",label:"所在地区",width:"150",sortable:"custom"}),t(G,{prop:"studentCount",label:"受益学生",width:"100",sortable:"custom"},{default:a(({row:P})=>[e("span",gl,m(P.studentCount)+"人",1)]),_:1}),t(G,{prop:"deviceCount",label:"设备数量",width:"100",sortable:"custom"},{default:a(({row:P})=>[e("span",yl,m(P.deviceCount)+"台",1)]),_:1}),t(G,{prop:"cooperationDate",label:"合作时间",width:"120",sortable:"custom"},{default:a(({row:P})=>[$(m(d(P.cooperationDate)),1)]),_:1}),t(G,{prop:"status",label:"合作状态",width:"100",sortable:"custom"},{default:a(({row:P})=>[t(_t,{type:p(P.status),size:"small"},{default:a(()=>[$(m(y(P.status)),1)]),_:2},1032,["type"])]),_:1}),t(G,{label:"操作",width:"200",fixed:"right"},{default:a(({row:P})=>[e("div",hl,[t(O,{type:"primary",size:"small",text:"",onClick:gt=>q(P)},{default:a(()=>s[11]||(s[11]=[$(" 查看 ",-1)])),_:2,__:[11]},1032,["onClick"]),t(O,{type:"primary",size:"small",text:"",onClick:gt=>N(P)},{default:a(()=>s[12]||(s[12]=[$(" 编辑 ",-1)])),_:2,__:[12]},1032,["onClick"]),t(O,{type:"danger",size:"small",text:"",onClick:gt=>J(P)},{default:a(()=>s[13]||(s[13]=[$(" 删除 ",-1)])),_:2,__:[13]},1032,["onClick"])])]),_:1})]),_:1},8,["data","loading"]),e("div",bl,[t(E,{"current-page":U.page,"onUpdate:currentPage":s[3]||(s[3]=P=>U.page=P),"page-size":U.pageSize,"onUpdate:pageSize":s[4]||(s[4]=P=>U.pageSize=P),total:U.total,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:_,onCurrentChange:x},null,8,["current-page","page-size","total"])])]),_:1})]),t(ut,{modelValue:w.value,"onUpdate:modelValue":s[5]||(s[5]=P=>w.value=P),title:"添加合作机构",width:"800px","before-close":R},{default:a(()=>[t(Bt,{mode:"add",onSubmit:et,onCancel:R})]),_:1},8,["modelValue"]),t(ut,{modelValue:n.value,"onUpdate:modelValue":s[6]||(s[6]=P=>n.value=P),title:"编辑合作机构",width:"800px","before-close":R},{default:a(()=>[t(Bt,{institution:z.value,mode:"edit",onSubmit:et,onCancel:R},null,8,["institution"])]),_:1},8,["modelValue"]),t(ut,{modelValue:T.value,"onUpdate:modelValue":s[7]||(s[7]=P=>T.value=P),title:"机构详情",width:"900px","before-close":R},{default:a(()=>[z.value?(I(),it(ol,{key:0,institution:z.value,onEdit:H,onClose:R},null,8,["institution"])):st("",!0)]),_:1},8,["modelValue"])])}}}),$l=dt(Cl,[["__scopeId","data-v-83441c5b"]]),Vl={class:"file-upload-manager"},wl={key:0,class:"upload-tip"},Dl=rt({__name:"FileUploadManager",props:{modelValue:{},maxCount:{default:10},accept:{default:"*"},preview:{type:Boolean,default:!1},uploadText:{default:"上传文件"},tip:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(L,{emit:r}){const f=L,g=r,h=k(),V=k([]),w=at(()=>"/api/upload/temp"),n=at(()=>({Authorization:`Bearer ${localStorage.getItem("token")||""}`})),T=at(()=>({})),z=b=>!0,j=(b,y)=>{if(b.code===200){const l=[...f.modelValue,b.data.url];g("update:modelValue",l),Y.success("文件上传成功")}else Y.error(b.message||"上传失败")},U=b=>{console.error("上传失败:",b),Y.error("文件上传失败")},D=b=>{var p,i;const y=((i=(p=b.response)==null?void 0:p.data)==null?void 0:i.url)||b.url,l=f.modelValue.filter(d=>d!==y);g("update:modelValue",l)};return wt(()=>f.modelValue,b=>{Array.isArray(b)?V.value=b.map((y,l)=>({uid:l,name:`文件${l+1}`,status:"success",url:y})):V.value=[]},{immediate:!0}),(b,y)=>{const l=u("el-icon"),p=u("el-button"),i=u("el-upload");return I(),B("div",Vl,[t(i,{ref_key:"uploadRef",ref:h,action:w.value,headers:n.value,data:T.value,"before-upload":z,"on-success":j,"on-error":U,"on-remove":D,"file-list":V.value,"list-type":b.preview?"picture-card":"text",multiple:b.maxCount>1,limit:b.maxCount,accept:b.accept,disabled:b.disabled},{default:a(()=>[b.preview?(I(),it(l,{key:0},{default:a(()=>[t(S(zt))]),_:1})):(I(),it(p,{key:1,type:"primary",disabled:b.disabled},{default:a(()=>[t(l,null,{default:a(()=>[t(S(re))]),_:1}),$(" "+m(b.uploadText),1)]),_:1},8,["disabled"]))]),_:1},8,["action","headers","data","file-list","list-type","multiple","limit","accept","disabled"]),b.tip?(I(),B("div",wl,m(b.tip),1)):st("",!0)])}}}),kl=dt(Dl,[["__scopeId","data-v-7f599f04"]]),Ml={class:"activity-form"},Sl={class:"option-item"},Tl={class:"option-item"},xl={class:"option-item"},Al={class:"option-item"},Pl={class:"form-actions"},Il=rt({__name:"ActivityForm",props:{activity:{default:null},mode:{default:"add"}},emits:["submit","cancel"],setup(L,{expose:r,emit:f}){const g=L,h=f,V=k(),w=k(!1),n=pt({title:"",type:"",description:"",date:"",startTime:"",endTime:"",location:"",organizer:"",status:"planned",participants:50,budget:1e4,actualCost:0,projectId:null,photos:[],feedback:"",manager:"",managerContact:""}),T=["YX机器人公益基金会","教育发展基金会","儿童关爱协会","文化传承基金","科技助学联盟","爱心企业联合会","志愿者协会","慈善总会"],z=k([{id:1,name:"山区儿童汉字启蒙计划"},{id:2,name:"留守儿童书法教育项目"},{id:3,name:"特殊教育汉字学习支持"},{id:4,name:"乡村小学数字化教学援助"},{id:5,name:"贫困地区教育设备捐赠"}]),j={title:[{required:!0,message:"请输入活动标题",trigger:"blur"},{min:5,max:100,message:"标题长度在5-100个字符",trigger:"blur"}],type:[{required:!0,message:"请选择活动类型",trigger:"change"}],description:[{required:!0,message:"请输入活动描述",trigger:"blur"},{min:20,max:1e3,message:"描述长度在20-1000个字符",trigger:"blur"}],date:[{required:!0,message:"请选择活动日期",trigger:"change"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"change"}],endTime:[{required:!0,message:"请选择结束时间",trigger:"change"}],location:[{required:!0,message:"请输入活动地点",trigger:"blur"},{min:2,max:100,message:"地点长度在2-100个字符",trigger:"blur"}],organizer:[{required:!0,message:"请选择或输入主办方",trigger:"blur"}],participants:[{required:!0,message:"请输入参与人数",trigger:"blur"},{type:"number",min:1,max:1e4,message:"参与人数应在1-10000人之间",trigger:"blur"}],budget:[{required:!0,message:"请输入预算金额",trigger:"blur"},{type:"number",min:0,max:1e6,message:"预算金额应在0-100万元之间",trigger:"blur"}],actualCost:[{type:"number",min:0,max:1e6,message:"实际花费应在0-100万元之间",trigger:"blur"}],manager:[{required:!0,message:"请输入活动负责人",trigger:"blur"},{min:2,max:50,message:"负责人姓名长度在2-50个字符",trigger:"blur"}],managerContact:[{pattern:/^1[3-9]\d{9}$|^0\d{2,3}-?\d{7,8}$/,message:"请输入正确的手机号或电话号码",trigger:"blur"}]},U=()=>{if(g.activity&&g.mode==="edit"){let y="",l="";if(g.activity.startTime){const p=g.activity.startTime.split(" ");p.length>1&&(y=p[1])}if(g.activity.endTime){const p=g.activity.endTime.split(" ");p.length>1&&(l=p[1])}Object.assign(n,{title:g.activity.title,type:g.activity.type,description:g.activity.description,date:g.activity.date,startTime:y,endTime:l,location:g.activity.location,organizer:g.activity.organizer,status:g.activity.status,participants:g.activity.participants,budget:g.activity.budget,actualCost:g.activity.actualCost,projectId:g.activity.projectId||null,photos:g.activity.photos||[],feedback:g.activity.feedback||"",manager:g.activity.manager||"",managerContact:g.activity.managerContact||""})}else Object.assign(n,{title:"",type:"",description:"",date:"",startTime:"",endTime:"",location:"",organizer:"",status:"planned",participants:50,budget:1e4,actualCost:0,projectId:null,photos:[],feedback:"",manager:"",managerContact:""})},D=()=>A(null,null,function*(){var y;if(V.value)try{yield V.value.validate(),w.value=!0;let l="",p="";n.date&&n.startTime&&(l=`${n.date} ${n.startTime}`),n.date&&n.endTime&&(p=`${n.date} ${n.endTime}`);const i=Mt(Dt({},n),{startTime:l,endTime:p,id:((y=g.activity)==null?void 0:y.id)||void 0});h("submit",i)}catch(l){Y.error("请检查表单填写是否正确")}finally{w.value=!1}}),b=()=>{h("cancel")};return wt(()=>g.activity,()=>{U()},{immediate:!0}),mt(()=>{U()}),r({resetForm:()=>{var y;(y=V.value)==null||y.resetFields(),U()}}),(y,l)=>{const p=u("el-input"),i=u("el-form-item"),d=u("el-col"),c=u("el-icon"),v=u("el-option"),M=u("el-select"),q=u("el-row"),N=u("el-date-picker"),H=u("el-time-picker"),R=u("el-radio"),et=u("el-radio-group"),J=u("el-input-number"),lt=u("el-form"),K=u("el-button");return I(),B("div",Ml,[t(lt,{ref_key:"formRef",ref:V,model:n,rules:j,"label-width":"120px","label-position":"left"},{default:a(()=>[t(q,{gutter:24},{default:a(()=>[t(d,{span:16},{default:a(()=>[t(i,{label:"活动标题",prop:"title"},{default:a(()=>[t(p,{modelValue:n.title,"onUpdate:modelValue":l[0]||(l[0]=_=>n.title=_),placeholder:"请输入活动标题",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:8},{default:a(()=>[t(i,{label:"活动类型",prop:"type"},{default:a(()=>[t(M,{modelValue:n.type,"onUpdate:modelValue":l[1]||(l[1]=_=>n.type=_),placeholder:"请选择活动类型",style:{width:"100%"}},{default:a(()=>[t(v,{label:"实地探访",value:"visit"},{default:a(()=>[e("div",Sl,[t(c,null,{default:a(()=>[t(S(Kt))]),_:1}),l[17]||(l[17]=e("span",null,"实地探访",-1))])]),_:1}),t(v,{label:"培训活动",value:"training"},{default:a(()=>[e("div",Tl,[t(c,null,{default:a(()=>[t(S(It))]),_:1}),l[18]||(l[18]=e("span",null,"培训活动",-1))])]),_:1}),t(v,{label:"捐赠活动",value:"donation"},{default:a(()=>[e("div",xl,[t(c,null,{default:a(()=>[t(S(de))]),_:1}),l[19]||(l[19]=e("span",null,"捐赠活动",-1))])]),_:1}),t(v,{label:"特殊活动",value:"event"},{default:a(()=>[e("div",Al,[t(c,null,{default:a(()=>[t(S(ue))]),_:1}),l[20]||(l[20]=e("span",null,"特殊活动",-1))])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(i,{label:"活动描述",prop:"description"},{default:a(()=>[t(p,{modelValue:n.description,"onUpdate:modelValue":l[2]||(l[2]=_=>n.description=_),type:"textarea",rows:4,placeholder:"请详细描述活动的目的、内容和预期效果",maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(q,{gutter:24},{default:a(()=>[t(d,{span:8},{default:a(()=>[t(i,{label:"活动日期",prop:"date"},{default:a(()=>[t(N,{modelValue:n.date,"onUpdate:modelValue":l[3]||(l[3]=_=>n.date=_),type:"date",placeholder:"请选择活动日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:8},{default:a(()=>[t(i,{label:"开始时间",prop:"startTime"},{default:a(()=>[t(H,{modelValue:n.startTime,"onUpdate:modelValue":l[4]||(l[4]=_=>n.startTime=_),placeholder:"请选择开始时间",format:"HH:mm","value-format":"HH:mm:ss",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:8},{default:a(()=>[t(i,{label:"结束时间",prop:"endTime"},{default:a(()=>[t(H,{modelValue:n.endTime,"onUpdate:modelValue":l[5]||(l[5]=_=>n.endTime=_),placeholder:"请选择结束时间",format:"HH:mm","value-format":"HH:mm:ss",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(q,{gutter:24},{default:a(()=>[t(d,{span:24},{default:a(()=>[t(i,{label:"活动地点",prop:"location"},{default:a(()=>[t(p,{modelValue:n.location,"onUpdate:modelValue":l[6]||(l[6]=_=>n.location=_),placeholder:"请输入活动地点",maxlength:"100"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(q,{gutter:24},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(i,{label:"主办方",prop:"organizer"},{default:a(()=>[t(M,{modelValue:n.organizer,"onUpdate:modelValue":l[7]||(l[7]=_=>n.organizer=_),filterable:"","allow-create":"",placeholder:"请选择或输入主办方",style:{width:"100%"}},{default:a(()=>[(I(),B($t,null,Vt(T,_=>t(v,{key:_,label:_,value:_},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(i,{label:"活动状态",prop:"status"},{default:a(()=>[t(et,{modelValue:n.status,"onUpdate:modelValue":l[8]||(l[8]=_=>n.status=_)},{default:a(()=>[t(R,{value:"planned"},{default:a(()=>l[21]||(l[21]=[$("已计划",-1)])),_:1,__:[21]}),t(R,{value:"ongoing"},{default:a(()=>l[22]||(l[22]=[$("进行中",-1)])),_:1,__:[22]}),t(R,{value:"completed"},{default:a(()=>l[23]||(l[23]=[$("已完成",-1)])),_:1,__:[23]}),t(R,{value:"cancelled"},{default:a(()=>l[24]||(l[24]=[$("已取消",-1)])),_:1,__:[24]})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(q,{gutter:24},{default:a(()=>[t(d,{span:12},{default:a(()=>[t(i,{label:"活动负责人",prop:"manager"},{default:a(()=>[t(p,{modelValue:n.manager,"onUpdate:modelValue":l[9]||(l[9]=_=>n.manager=_),placeholder:"请输入活动负责人姓名",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:12},{default:a(()=>[t(i,{label:"负责人联系方式",prop:"managerContact"},{default:a(()=>[t(p,{modelValue:n.managerContact,"onUpdate:modelValue":l[10]||(l[10]=_=>n.managerContact=_),placeholder:"请输入负责人手机号或电话",maxlength:"20"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(q,{gutter:24},{default:a(()=>[t(d,{span:8},{default:a(()=>[t(i,{label:"参与人数",prop:"participants"},{default:a(()=>[t(J,{modelValue:n.participants,"onUpdate:modelValue":l[11]||(l[11]=_=>n.participants=_),min:1,max:1e4,placeholder:"预计参与人数",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:8},{default:a(()=>[t(i,{label:"预算金额",prop:"budget"},{default:a(()=>[t(J,{modelValue:n.budget,"onUpdate:modelValue":l[12]||(l[12]=_=>n.budget=_),min:0,max:1e6,precision:2,placeholder:"活动预算（元）",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),t(d,{span:8},{default:a(()=>[t(i,{label:"实际花费",prop:"actualCost"},{default:a(()=>[t(J,{modelValue:n.actualCost,"onUpdate:modelValue":l[13]||(l[13]=_=>n.actualCost=_),min:0,max:1e6,precision:2,placeholder:"实际花费（元）",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(i,{label:"关联项目",prop:"projectId"},{default:a(()=>[t(M,{modelValue:n.projectId,"onUpdate:modelValue":l[14]||(l[14]=_=>n.projectId=_),placeholder:"请选择关联的公益项目（可选）",style:{width:"300px"},clearable:""},{default:a(()=>[(I(!0),B($t,null,Vt(z.value,_=>(I(),it(v,{key:_.id,label:_.name,value:_.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"活动照片",prop:"photos"},{default:a(()=>[t(kl,{modelValue:n.photos,"onUpdate:modelValue":l[15]||(l[15]=_=>n.photos=_),"max-count":20,accept:"image/*",preview:!0,"upload-text":"上传活动照片",tip:"支持jpg、png格式，单张图片不超过5MB，最多上传20张"},null,8,["modelValue"])]),_:1}),t(i,{label:"反馈意见",prop:"feedback"},{default:a(()=>[t(p,{modelValue:n.feedback,"onUpdate:modelValue":l[16]||(l[16]=_=>n.feedback=_),type:"textarea",rows:3,placeholder:"请输入活动反馈和总结（活动完成后填写）",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),e("div",Pl,[t(K,{onClick:b},{default:a(()=>l[25]||(l[25]=[$("取消",-1)])),_:1,__:[25]}),t(K,{type:"primary",onClick:D,loading:w.value},{default:a(()=>[$(m(y.mode==="add"?"添加":"保存"),1)]),_:1},8,["loading"])])])}}}),jl=dt(Il,[["__scopeId","data-v-f4603ff5"]]),Ul={key:0,class:"activity-detail"},zl={class:"detail-header"},Rl={class:"header-left"},Fl={class:"header-tags"},El={class:"header-right"},ql={class:"detail-section"},Yl={class:"info-card"},Bl={class:"info-icon"},Ll={class:"info-content"},Ol={class:"info-value"},Hl={class:"info-card"},Nl={class:"info-icon"},Kl={class:"info-content"},Xl={class:"info-value"},Gl={class:"info-card"},Jl={class:"info-icon"},Ql={class:"info-content"},Wl={class:"info-value"},Zl={class:"info-card"},to={class:"info-icon"},eo={class:"info-content"},ao={class:"info-value"},lo={class:"detail-section"},oo={class:"description-content"},so={class:"detail-section"},no={class:"finance-card budget"},io={class:"finance-icon"},ro={class:"finance-content"},uo={class:"finance-value"},co={class:"finance-card actual"},po={class:"finance-icon"},mo={class:"finance-content"},_o={class:"finance-value"},vo={class:"finance-card balance"},fo={class:"finance-icon"},go={class:"finance-content"},yo={class:"finance-label"},ho={key:0,class:"detail-section"},bo={class:"photos-gallery"},Co=["onClick"],$o=["src","alt"],Vo={class:"photo-overlay"},wo={key:1,class:"detail-section"},Do={class:"feedback-content"},ko={class:"feedback-icon"},Mo={class:"feedback-text"},So=rt({__name:"ActivityDetail",props:{activity:{}},emits:["edit","close"],setup(L,{emit:r}){const f=L,g=r,h=k(!1),V=k([]),w=k(0),n=at(()=>f.activity?f.activity.budget-f.activity.actualCost>=0?"positive":"negative":""),T=at(()=>f.activity?f.activity.budget-f.activity.actualCost>=0?"结余金额":"超支金额":""),z=()=>{g("edit")},j=(p,i)=>{V.value=p,w.value=i,h.value=!0},U=p=>({visit:"实地探访",training:"培训活动",donation:"捐赠活动",event:"特殊活动"})[p]||p,D=p=>({visit:"primary",training:"success",donation:"warning",event:"info"})[p]||"",b=p=>({planned:"已计划",ongoing:"进行中",completed:"已完成",cancelled:"已取消"})[p]||p,y=p=>({planned:"info",ongoing:"warning",completed:"success",cancelled:"danger"})[p]||"",l=p=>p?new Date(p).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"";return(p,i)=>{const d=u("el-tag"),c=u("el-icon"),v=u("el-button"),M=u("el-col"),q=u("el-row"),N=u("el-image-viewer");return p.activity?(I(),B("div",Ul,[e("div",zl,[e("div",Rl,[e("h3",null,m(p.activity.title),1),e("div",Fl,[t(d,{type:D(p.activity.type),size:"large"},{default:a(()=>[$(m(U(p.activity.type)),1)]),_:1},8,["type"]),t(d,{type:y(p.activity.status),size:"large"},{default:a(()=>[$(m(b(p.activity.status)),1)]),_:1},8,["type"])])]),e("div",El,[t(v,{type:"primary",onClick:z},{default:a(()=>[t(c,null,{default:a(()=>[t(S(Nt))]),_:1}),i[1]||(i[1]=$(" 编辑活动 ",-1))]),_:1,__:[1]})])]),e("div",ql,[i[6]||(i[6]=e("h4",{class:"section-title"},"基本信息",-1)),t(q,{gutter:24},{default:a(()=>[t(M,{span:6},{default:a(()=>[e("div",Yl,[e("div",Bl,[t(c,null,{default:a(()=>[t(S(Ut))]),_:1})]),e("div",Ll,[i[2]||(i[2]=e("div",{class:"info-label"},"活动时间",-1)),e("div",Ol,m(l(p.activity.date)),1)])])]),_:1}),t(M,{span:6},{default:a(()=>[e("div",Hl,[e("div",Nl,[t(c,null,{default:a(()=>[t(S(jt))]),_:1})]),e("div",Kl,[i[3]||(i[3]=e("div",{class:"info-label"},"活动地点",-1)),e("div",Xl,m(p.activity.location),1)])])]),_:1}),t(M,{span:6},{default:a(()=>[e("div",Gl,[e("div",Jl,[t(c,null,{default:a(()=>[t(S(ft))]),_:1})]),e("div",Ql,[i[4]||(i[4]=e("div",{class:"info-label"},"参与人数",-1)),e("div",Wl,m(p.activity.participants)+"人",1)])])]),_:1}),t(M,{span:6},{default:a(()=>[e("div",Zl,[e("div",to,[t(c,null,{default:a(()=>[t(S(Ct))]),_:1})]),e("div",eo,[i[5]||(i[5]=e("div",{class:"info-label"},"主办方",-1)),e("div",ao,m(p.activity.organizer),1)])])]),_:1})]),_:1})]),e("div",lo,[i[7]||(i[7]=e("h4",{class:"section-title"},"活动描述",-1)),e("div",oo,[e("p",null,m(p.activity.description),1)])]),e("div",so,[i[10]||(i[10]=e("h4",{class:"section-title"},"财务信息",-1)),t(q,{gutter:24},{default:a(()=>[t(M,{span:8},{default:a(()=>[e("div",no,[e("div",io,[t(c,null,{default:a(()=>[t(S(Pt))]),_:1})]),e("div",ro,[e("div",uo,"¥"+m(p.activity.budget.toLocaleString()),1),i[8]||(i[8]=e("div",{class:"finance-label"},"预算金额",-1))])])]),_:1}),t(M,{span:8},{default:a(()=>[e("div",co,[e("div",po,[t(c,null,{default:a(()=>[t(S(ce))]),_:1})]),e("div",mo,[e("div",_o,"¥"+m(p.activity.actualCost.toLocaleString()),1),i[9]||(i[9]=e("div",{class:"finance-label"},"实际花费",-1))])])]),_:1}),t(M,{span:8},{default:a(()=>[e("div",vo,[e("div",fo,[t(c,null,{default:a(()=>[t(S(pe))]),_:1})]),e("div",go,[e("div",{class:vt(["finance-value",n.value])}," ¥"+m(Math.abs(p.activity.budget-p.activity.actualCost).toLocaleString()),3),e("div",yo,m(T.value),1)])])]),_:1})]),_:1})]),p.activity.photos&&p.activity.photos.length>0?(I(),B("div",ho,[i[11]||(i[11]=e("h4",{class:"section-title"},"活动照片",-1)),e("div",bo,[(I(!0),B($t,null,Vt(p.activity.photos,(H,R)=>(I(),B("div",{key:R,class:"photo-item",onClick:et=>j(p.activity.photos,R)},[e("img",{src:H,alt:`活动照片${R+1}`},null,8,$o),e("div",Vo,[t(c,null,{default:a(()=>[t(S(_e))]),_:1})])],8,Co))),128))])])):st("",!0),p.activity.feedback?(I(),B("div",wo,[i[12]||(i[12]=e("h4",{class:"section-title"},"活动反馈",-1)),e("div",Do,[e("div",ko,[t(c,null,{default:a(()=>[t(S(me))]),_:1})]),e("div",Mo,[e("p",null,m(p.activity.feedback),1)])])])):st("",!0),h.value?(I(),it(N,{key:2,"url-list":V.value,"initial-index":w.value,onClose:i[0]||(i[0]=H=>h.value=!1)},null,8,["url-list","initial-index"])):st("",!0)])):st("",!0)}}}),To=dt(So,[["__scopeId","data-v-045823e2"]]),xo={class:"activity-management"},Ao={class:"action-bar"},Po={class:"search-section"},Io={class:"action-buttons"},jo={class:"activity-list"},Uo={class:"list-view-toggle"},zo={key:0,class:"card-view"},Ro={class:"activity-cards"},Fo=["onClick"],Eo={class:"card-header"},qo={class:"activity-type"},Yo={class:"activity-status"},Bo={class:"card-content"},Lo={class:"activity-title"},Oo={class:"activity-description"},Ho={class:"activity-info"},No={class:"info-item"},Ko={class:"info-item"},Xo={class:"info-item"},Go={class:"info-item"},Jo={class:"card-footer"},Qo={class:"organizer"},Wo={class:"card-actions"},Zo={key:1,class:"table-view"},ts={class:"activity-title-cell"},es={class:"title-text"},as={class:"participant-count"},ls={class:"budget-amount"},os={class:"actual-cost"},ss={class:"pagination-wrapper"},ns=rt({__name:"ActivityManagement",setup(L){const r=k(!1),f=k([]),g=k([]),h=k("card"),V=pt({keyword:"",type:"",status:"",dateRange:[]}),w=pt({page:1,pageSize:12,total:0}),n=k(!1),T=k(!1),z=k("add"),j=k(null),U=k(),D=at(()=>z.value==="add"?"添加公益活动":"编辑活动信息"),b=()=>A(null,null,function*(){r.value=!0;try{const x={page:w.page,pageSize:w.pageSize,keyword:V.keyword,type:V.type,status:V.status,startDate:V.dateRange[0],endDate:V.dateRange[1]},o=yield nt.getCharityActivities(x);f.value=o.data.list,w.total=o.data.total}catch(x){console.error("加载活动列表失败:",x),Y.error("加载活动列表失败")}finally{r.value=!1}}),y=()=>{w.page=1,b()},l=x=>{w.pageSize=x,w.page=1,b()},p=x=>{w.page=x,b()},i=()=>{h.value==="card"?w.pageSize=12:w.pageSize=20,w.page=1,b()},d=x=>{g.value=x},c=()=>{j.value=null,z.value="add",n.value=!0},v=x=>{j.value=Dt({},x),z.value="edit",n.value=!0},M=x=>{j.value=x,T.value=!0},q=()=>{T.value=!1,z.value="edit",n.value=!0},N=x=>A(null,null,function*(){try{yield Xt.confirm(`确定要删除活动 "${x.title}" 吗？此操作不可恢复。`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),yield nt.deleteCharityActivity(x.id),Y.success("活动删除成功");const{clearCache:o}=yield At(()=>A(null,null,function*(){const{clearCache:s}=yield import("./request-gBXlrDct.js");return{clearCache:s}}),__vite__mapDeps([0,1,2,3]));o("/admin/charity/activities"),yield b()}catch(o){o!=="cancel"&&(console.error("删除活动失败:",o),Y.error("删除活动失败，请稍后重试"))}}),H=x=>A(null,null,function*(){try{z.value==="add"?(yield nt.createCharityActivity(x),Y.success("活动添加成功")):(yield nt.updateCharityActivity(x.id,x),Y.success("活动信息更新成功")),n.value=!1;const{clearCache:o}=yield At(()=>A(null,null,function*(){const{clearCache:s}=yield import("./request-gBXlrDct.js");return{clearCache:s}}),__vite__mapDeps([0,1,2,3]));o("/admin/charity/activities"),yield b()}catch(o){console.error("操作失败:",o),Y.error("操作失败，请稍后重试")}}),R=()=>{n.value=!1,j.value=null},et=x=>({visit:"实地探访",training:"培训活动",donation:"捐赠活动",event:"特殊活动"})[x]||x,J=x=>({visit:"primary",training:"success",donation:"warning",event:"info"})[x]||"",lt=x=>({planned:"已计划",ongoing:"进行中",completed:"已完成",cancelled:"已取消"})[x]||x,K=x=>({planned:"info",ongoing:"warning",completed:"success",cancelled:"danger"})[x]||"",_=x=>x?new Date(x).toLocaleDateString("zh-CN"):"";return mt(()=>{b()}),(x,o)=>{const s=u("el-icon"),X=u("el-input"),F=u("el-option"),Q=u("el-select"),Z=u("el-date-picker"),O=u("el-button"),W=u("el-radio-button"),G=u("el-radio-group"),ct=u("el-tag"),_t=u("el-empty"),ot=u("el-table-column"),E=u("el-table"),ut=u("el-pagination"),P=u("el-dialog"),gt=Gt("loading");return I(),B("div",xo,[e("div",Ao,[e("div",Po,[t(X,{modelValue:V.keyword,"onUpdate:modelValue":o[0]||(o[0]=C=>V.keyword=C),placeholder:"搜索活动标题、地点或组织者",style:{width:"300px"},clearable:"",onInput:y},{prefix:a(()=>[t(s,null,{default:a(()=>[t(S(St))]),_:1})]),_:1},8,["modelValue"]),t(Q,{modelValue:V.type,"onUpdate:modelValue":o[1]||(o[1]=C=>V.type=C),placeholder:"活动类型",style:{width:"150px"},clearable:"",onChange:y},{default:a(()=>[t(F,{label:"全部类型",value:""}),t(F,{label:"实地探访",value:"visit"}),t(F,{label:"培训活动",value:"training"}),t(F,{label:"捐赠活动",value:"donation"}),t(F,{label:"特殊活动",value:"event"})]),_:1},8,["modelValue"]),t(Q,{modelValue:V.status,"onUpdate:modelValue":o[2]||(o[2]=C=>V.status=C),placeholder:"活动状态",style:{width:"150px"},clearable:"",onChange:y},{default:a(()=>[t(F,{label:"全部状态",value:""}),t(F,{label:"已计划",value:"planned"}),t(F,{label:"进行中",value:"ongoing"}),t(F,{label:"已完成",value:"completed"}),t(F,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"]),t(Z,{modelValue:V.dateRange,"onUpdate:modelValue":o[3]||(o[3]=C=>V.dateRange=C),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:y},null,8,["modelValue"])]),e("div",Io,[t(O,{type:"primary",onClick:c},{default:a(()=>[t(s,null,{default:a(()=>[t(S(zt))]),_:1}),o[10]||(o[10]=$(" 添加活动 ",-1))]),_:1,__:[10]})])]),e("div",jo,[e("div",Uo,[t(G,{modelValue:h.value,"onUpdate:modelValue":o[4]||(o[4]=C=>h.value=C),onChange:i},{default:a(()=>[t(W,{value:"card"},{default:a(()=>o[11]||(o[11]=[$("卡片视图",-1)])),_:1,__:[11]}),t(W,{value:"table"},{default:a(()=>o[12]||(o[12]=[$("表格视图",-1)])),_:1,__:[12]})]),_:1},8,["modelValue"])]),h.value==="card"?xt((I(),B("div",zo,[e("div",Ro,[(I(!0),B($t,null,Vt(f.value,C=>(I(),B("div",{key:C.id,class:"activity-card",onClick:yt=>M(C)},[e("div",Eo,[e("div",qo,[t(ct,{type:J(C.type),size:"small"},{default:a(()=>[$(m(et(C.type)),1)]),_:2},1032,["type"])]),e("div",Yo,[t(ct,{type:K(C.status),size:"small"},{default:a(()=>[$(m(lt(C.status)),1)]),_:2},1032,["type"])])]),e("div",Bo,[e("h4",Lo,m(C.title),1),e("p",Oo,m(C.description),1),e("div",Ho,[e("div",No,[t(s,null,{default:a(()=>[t(S(Ut))]),_:1}),e("span",null,m(_(C.date)),1)]),e("div",Ko,[t(s,null,{default:a(()=>[t(S(jt))]),_:1}),e("span",null,m(C.location),1)]),e("div",Xo,[t(s,null,{default:a(()=>[t(S(ft))]),_:1}),e("span",null,m(C.participants)+"人参与",1)]),e("div",Go,[t(s,null,{default:a(()=>[t(S(Pt))]),_:1}),e("span",null,"预算 ¥"+m(C.budget.toLocaleString()),1)])])]),e("div",Jo,[e("div",Qo,[e("span",null,"主办："+m(C.organizer),1)]),e("div",Wo,[t(O,{type:"primary",size:"small",text:"",onClick:Yt(yt=>v(C),["stop"])},{default:a(()=>o[13]||(o[13]=[$(" 编辑 ",-1)])),_:2,__:[13]},1032,["onClick"]),t(O,{type:"danger",size:"small",text:"",onClick:Yt(yt=>N(C),["stop"])},{default:a(()=>o[14]||(o[14]=[$(" 删除 ",-1)])),_:2,__:[14]},1032,["onClick"])])])],8,Fo))),128))]),f.value.length===0&&!r.value?(I(),it(_t,{key:0,description:"暂无活动数据"})):st("",!0)])),[[gt,r.value]]):xt((I(),B("div",Zo,[t(E,{data:f.value,stripe:"",onSelectionChange:d},{default:a(()=>[t(ot,{type:"selection",width:"55"}),t(ot,{prop:"title",label:"活动标题",width:"200"},{default:a(({row:C})=>[e("div",ts,[e("span",es,m(C.title),1),t(ct,{type:J(C.type),size:"small"},{default:a(()=>[$(m(et(C.type)),1)]),_:2},1032,["type"])])]),_:1}),t(ot,{prop:"date",label:"活动时间",width:"120"},{default:a(({row:C})=>[$(m(_(C.date)),1)]),_:1}),t(ot,{prop:"location",label:"活动地点",width:"150"}),t(ot,{prop:"organizer",label:"主办方",width:"150"}),t(ot,{prop:"participants",label:"参与人数",width:"100"},{default:a(({row:C})=>[e("span",as,m(C.participants)+"人",1)]),_:1}),t(ot,{prop:"budget",label:"预算金额",width:"120"},{default:a(({row:C})=>[e("span",ls,"¥"+m(C.budget.toLocaleString()),1)]),_:1}),t(ot,{prop:"actualCost",label:"实际花费",width:"120"},{default:a(({row:C})=>[e("span",os,"¥"+m(C.actualCost.toLocaleString()),1)]),_:1}),t(ot,{prop:"status",label:"活动状态",width:"100"},{default:a(({row:C})=>[t(ct,{type:K(C.status),size:"small"},{default:a(()=>[$(m(lt(C.status)),1)]),_:2},1032,["type"])]),_:1}),t(ot,{label:"操作",width:"160",fixed:"right"},{default:a(({row:C})=>[t(O,{type:"primary",size:"small",text:"",onClick:yt=>M(C)},{default:a(()=>o[15]||(o[15]=[$(" 查看 ",-1)])),_:2,__:[15]},1032,["onClick"]),t(O,{type:"primary",size:"small",text:"",onClick:yt=>v(C)},{default:a(()=>o[16]||(o[16]=[$(" 编辑 ",-1)])),_:2,__:[16]},1032,["onClick"]),t(O,{type:"danger",size:"small",text:"",onClick:yt=>N(C)},{default:a(()=>o[17]||(o[17]=[$(" 删除 ",-1)])),_:2,__:[17]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])),[[gt,r.value]]),e("div",ss,[t(ut,{"current-page":w.page,"onUpdate:currentPage":o[5]||(o[5]=C=>w.page=C),"page-size":w.pageSize,"onUpdate:pageSize":o[6]||(o[6]=C=>w.pageSize=C),total:w.total,"page-sizes":[12,24,48,96],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:l,onCurrentChange:p},null,8,["current-page","page-size","total"])])]),t(P,{modelValue:n.value,"onUpdate:modelValue":o[7]||(o[7]=C=>n.value=C),title:D.value,width:"900px",onClose:R},{default:a(()=>[t(jl,{ref_key:"activityFormRef",ref:U,activity:j.value,mode:z.value,onSubmit:H,onCancel:R},null,8,["activity","mode"])]),_:1},8,["modelValue","title"]),t(P,{modelValue:T.value,"onUpdate:modelValue":o[9]||(o[9]=C=>T.value=C),title:"活动详情",width:"1000px"},{default:a(()=>[t(To,{activity:j.value,onEdit:q,onClose:o[8]||(o[8]=C=>T.value=!1)},null,8,["activity"])]),_:1},8,["modelValue"])])}}}),is=dt(ns,[["__scopeId","data-v-8ef4ecf1"]]),rs={class:"charity-management"},ds={class:"page-header"},us={class:"header-right"},cs={class:"charity-tabs"},ps={class:"statistics-section"},ms={class:"charts-section"},_s={class:"charts-row"},vs={class:"chart-card"},fs={class:"chart-content"},gs={class:"chart-card"},ys={class:"chart-content"},hs={class:"charts-row"},bs={class:"chart-card"},Cs={class:"chart-content"},$s={class:"chart-card"},Vs={class:"chart-content"},ws={class:"data-update-form"},Ds={class:"form-section"},ks={class:"form-tip"},Ms={class:"form-tip"},Ss={class:"form-tip"},Ts={class:"form-tip"},xs={class:"form-section"},As={class:"form-tip"},Ps={class:"form-tip"},Is={class:"form-section"},js={class:"form-tip"},Us={class:"form-tip"},zs={class:"form-tip"},Rs={class:"form-section"},Fs={class:"form-tip"},Es={class:"form-tip"},qs={class:"form-section"},Ys={class:"dialog-footer"},Bs=rt({__name:"Charity",setup(L){const r=k("institutions"),f=k(!0),g=k(),h=k(),V=k(),w=k(!1),n=k(!1),T=k(),z=k(),j=k(),U=k(),D=k();let b=null,y=null,l=null,p=null;const i=k({totalBeneficiaries:28650,totalInstitutions:342,cooperatingInstitutions:198,totalVolunteers:285,totalRaised:185e5,totalDonated:152e5,totalProjects:156,activeProjects:42,completedProjects:89,totalActivities:456,thisMonthActivities:28}),d=pt({totalBeneficiaries:0,totalInstitutions:0,cooperatingInstitutions:0,totalVolunteers:0,totalRaised:0,totalDonated:0,totalProjects:0,activeProjects:0,completedProjects:0,totalActivities:0,thisMonthActivities:0,updateReason:""}),c={totalBeneficiaries:[{required:!0,message:"请输入累计受益人数",trigger:"blur"},{type:"number",min:0,message:"受益人数不能小于0",trigger:"blur"}],totalInstitutions:[{required:!0,message:"请输入合作机构总数",trigger:"blur"},{type:"number",min:0,message:"机构总数不能小于0",trigger:"blur"}],cooperatingInstitutions:[{required:!0,message:"请输入活跃合作机构数",trigger:"blur"},{type:"number",min:0,message:"活跃机构数不能小于0",trigger:"blur"}],totalVolunteers:[{required:!0,message:"请输入志愿者总数",trigger:"blur"},{type:"number",min:0,message:"志愿者总数不能小于0",trigger:"blur"}],totalRaised:[{required:!0,message:"请输入累计筹集金额",trigger:"blur"},{type:"number",min:0,message:"筹集金额不能小于0",trigger:"blur"}],totalDonated:[{required:!0,message:"请输入累计捐赠金额",trigger:"blur"},{type:"number",min:0,message:"捐赠金额不能小于0",trigger:"blur"}],totalProjects:[{required:!0,message:"请输入项目总数",trigger:"blur"},{type:"number",min:0,message:"项目总数不能小于0",trigger:"blur"}],activeProjects:[{required:!0,message:"请输入进行中项目数",trigger:"blur"},{type:"number",min:0,message:"进行中项目数不能小于0",trigger:"blur"}],completedProjects:[{required:!0,message:"请输入已完成项目数",trigger:"blur"},{type:"number",min:0,message:"已完成项目数不能小于0",trigger:"blur"}],totalActivities:[{required:!0,message:"请输入活动总数",trigger:"blur"},{type:"number",min:0,message:"活动总数不能小于0",trigger:"blur"}],thisMonthActivities:[{required:!0,message:"请输入本月活动数",trigger:"blur"},{type:"number",min:0,message:"本月活动数不能小于0",trigger:"blur"}],updateReason:[{required:!0,message:"请输入更新原因",trigger:"blur"},{min:5,max:200,message:"更新原因长度在5到200个字符之间",trigger:"blur"}]},v=()=>A(null,null,function*(){try{const o=yield nt.getEnhancedCharityStats();o.code===200&&(i.value=o.data,Object.assign(d,{totalBeneficiaries:i.value.totalBeneficiaries,totalInstitutions:i.value.totalInstitutions,cooperatingInstitutions:i.value.cooperatingInstitutions,totalVolunteers:i.value.totalVolunteers,totalRaised:i.value.totalRaised,totalDonated:i.value.totalDonated,totalProjects:i.value.totalProjects,activeProjects:i.value.activeProjects,completedProjects:i.value.completedProjects,totalActivities:i.value.totalActivities,thisMonthActivities:i.value.thisMonthActivities,updateReason:""})),w.value=!0}catch(o){console.error("加载当前统计数据失败:",o),Y.error("加载当前数据失败，请稍后重试")}}),M=()=>{T.value&&T.value.resetFields(),Object.assign(d,{totalBeneficiaries:0,totalInstitutions:0,cooperatingInstitutions:0,totalVolunteers:0,totalRaised:0,totalDonated:0,totalProjects:0,activeProjects:0,completedProjects:0,totalActivities:0,thisMonthActivities:0,updateReason:""}),w.value=!1},q=()=>A(null,null,function*(){if(T.value)try{yield T.value.validate(),n.value=!0;const o=N();if(o.length>0){Y.error(o[0]);return}yield H(),Y.success("公益数据更新成功！"),Object.assign(i.value,{totalBeneficiaries:d.totalBeneficiaries,totalInstitutions:d.totalInstitutions,cooperatingInstitutions:d.cooperatingInstitutions,totalVolunteers:d.totalVolunteers,totalRaised:d.totalRaised,totalDonated:d.totalDonated,totalProjects:d.totalProjects,activeProjects:d.activeProjects,completedProjects:d.completedProjects,totalActivities:d.totalActivities,thisMonthActivities:d.thisMonthActivities}),g.value&&(yield g.value.refresh()),r.value==="statistics"&&(yield bt(),J()),M()}catch(o){console.error("更新公益数据失败:",o),Y.error("更新数据失败，请检查输入信息")}finally{n.value=!1}}),N=()=>{const o=[];return d.cooperatingInstitutions>d.totalInstitutions&&o.push("活跃合作机构数不能超过合作机构总数"),d.activeProjects+d.completedProjects>d.totalProjects&&o.push("进行中项目数和已完成项目数之和不能超过项目总数"),d.totalDonated>d.totalRaised&&o.push("累计捐赠金额不能超过累计筹集金额"),d.thisMonthActivities>d.totalActivities&&o.push("本月活动数不能超过活动总数"),o},H=()=>A(null,null,function*(){try{const o=yield nt.updateCharityStats(d);if(o.code!==200)throw new Error(o.message||"更新失败");return console.log("公益数据更新成功:",o.data),o}catch(o){throw console.error("更新公益数据失败:",o),o}}),R=k(null),et=()=>A(null,null,function*(){try{const o=yield nt.getCharityChartData();R.value=o.data,console.log("图表数据已加载:",R.value)}catch(o){console.error("加载图表数据失败:",o)}}),J=()=>A(null,null,function*(){yield bt(),r.value==="statistics"&&(R.value||(yield et()),lt(),K(),_(),x())}),lt=()=>{if(!z.value||!R.value)return;b&&b.dispose(),b=ht(z.value);const o=R.value.projectStatusData;let s=[];o&&o.series&&Array.isArray(o.series)?s=o.series.map((F,Q)=>({name:F.name,value:F.value,color:["#409EFF","#67C23A","#E6A23C","#F56C6C","#909399"][Q%5]})):s=[{name:"进行中",value:42,color:"#409EFF"},{name:"已完成",value:89,color:"#67C23A"},{name:"规划中",value:25,color:"#E6A23C"}];const X={title:{text:"项目状态分布",left:"center",textStyle:{fontSize:16,color:"#303133",fontWeight:"bold"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}个 ({d}%)",backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",textStyle:{color:"#fff"}},legend:{orient:"vertical",left:"left",top:"middle",data:s.map(F=>F.name),textStyle:{fontSize:12}},series:[{name:"项目状态",type:"pie",radius:["30%","60%"],center:["60%","50%"],data:s.map(F=>({value:F.value,name:F.name,itemStyle:{color:F.color}})),emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{show:!0,formatter:"{b}: {c}个"}}]};b.setOption(X)},K=()=>{if(!j.value)return;y&&y.dispose(),y=ht(j.value);const o=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],s=o.map(()=>Math.floor(Math.random()*5e4)+2e4),X=o.map(()=>Math.floor(Math.random()*4e4)+15e3),F={title:{text:"资金筹集趋势",left:"center",textStyle:{fontSize:14,color:"#303133"}},tooltip:{trigger:"axis"},legend:{data:["筹集金额","捐赠金额"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:o},yAxis:{type:"value",axisLabel:{formatter:"{value}元"}},series:[{name:"筹集金额",type:"line",stack:"Total",data:s,itemStyle:{color:"#409EFF"}},{name:"捐赠金额",type:"line",stack:"Total",data:X,itemStyle:{color:"#67C23A"}}]};y.setOption(F)},_=()=>{if(!U.value)return;l&&l.dispose(),l=ht(U.value);const s=["华北","华东","华南","华中","西南","西北","东北"].map(F=>({name:F,value:Math.floor(Math.random()*20)+5})),X={title:{text:"项目地区分布",left:"center",textStyle:{fontSize:14,color:"#303133"}},tooltip:{trigger:"item"},series:[{name:"项目数量",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:"30",fontWeight:"bold"}},labelLine:{show:!1},data:s}]};l.setOption(X)},x=()=>{if(!D.value)return;p&&p.dispose(),p=ht(D.value);const o=["1月","2月","3月","4月","5月","6月"],s=o.map(()=>Math.floor(Math.random()*100)+50),X=o.map(()=>Math.floor(Math.random()*20)+10),F={title:{text:"志愿者活动统计",left:"center",textStyle:{fontSize:14,color:"#303133"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},legend:{data:["志愿者人数","活动次数"]},xAxis:[{type:"category",data:o,axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"志愿者人数",min:0,axisLabel:{formatter:"{value} 人"}},{type:"value",name:"活动次数",min:0,axisLabel:{formatter:"{value} 次"}}],series:[{name:"志愿者人数",type:"bar",data:s,itemStyle:{color:"#409EFF"}},{name:"活动次数",type:"line",yAxisIndex:1,data:X,itemStyle:{color:"#E6A23C"}}]};p.setOption(F)};return wt(r,o=>A(null,null,function*(){o==="statistics"&&(yield bt(),J())})),mt(()=>A(null,null,function*(){f.value=!0;try{r.value==="statistics"&&(yield J())}catch(o){console.error("页面初始化失败:",o)}finally{f.value=!1}})),(o,s)=>{const X=u("el-button"),F=u("el-tab-pane"),Q=u("el-tabs"),Z=u("el-input-number"),O=u("el-form-item"),W=u("el-col"),G=u("el-row"),ct=u("el-input"),_t=u("el-form"),ot=u("el-dialog");return I(),B("div",rs,[e("div",ds,[s[15]||(s[15]=e("div",{class:"header-left"},[e("h2",null,"公益慈善管理"),e("p",{class:"header-subtitle"},"14公益慈善活动管理 · 练字机器人管理系统")],-1)),e("div",us,[t(X,{type:"primary",onClick:v},{default:a(()=>s[14]||(s[14]=[$(" 更新公益数据 ",-1)])),_:1,__:[14]})])]),t(ea,{ref_key:"statsOverviewRef",ref:g},null,512),e("div",cs,[t(Q,{modelValue:r.value,"onUpdate:modelValue":s[0]||(s[0]=E=>r.value=E),type:"border-card"},{default:a(()=>[t(F,{label:"合作机构",name:"institutions"},{default:a(()=>[t($l,{ref_key:"institutionManagementRef",ref:h},null,512)]),_:1}),t(F,{label:"公益活动",name:"activities"},{default:a(()=>[t(is,{ref_key:"activityManagementRef",ref:V},null,512)]),_:1}),t(F,{label:"统计数据",name:"statistics"},{default:a(()=>[e("div",ps,[s[20]||(s[20]=e("div",{class:"section-header"},[e("h3",null,"公益慈善统计")],-1)),e("div",ms,[e("div",_s,[e("div",vs,[s[16]||(s[16]=e("div",{class:"chart-header"},[e("h4",null,"项目状态分布")],-1)),e("div",fs,[e("div",{ref_key:"projectStatusChart",ref:z,class:"chart-container",style:{height:"300px"}},null,512)])]),e("div",gs,[s[17]||(s[17]=e("div",{class:"chart-header"},[e("h4",null,"资金筹集趋势")],-1)),e("div",ys,[e("div",{ref_key:"fundingTrendChart",ref:j,class:"chart-container",style:{height:"300px"}},null,512)])])]),e("div",hs,[e("div",bs,[s[18]||(s[18]=e("div",{class:"chart-header"},[e("h4",null,"项目地区分布")],-1)),e("div",Cs,[e("div",{ref_key:"regionDistributionChart",ref:U,class:"chart-container",style:{height:"300px"}},null,512)])]),e("div",$s,[s[19]||(s[19]=e("div",{class:"chart-header"},[e("h4",null,"志愿者活动统计")],-1)),e("div",Vs,[e("div",{ref_key:"volunteerActivityChart",ref:D,class:"chart-container",style:{height:"300px"}},null,512)])])])])])]),_:1})]),_:1},8,["modelValue"])]),t(ot,{modelValue:w.value,"onUpdate:modelValue":s[13]||(s[13]=E=>w.value=E),title:"更新公益数据",width:"800px","before-close":M},{footer:a(()=>[e("div",Ys,[t(X,{onClick:M},{default:a(()=>s[26]||(s[26]=[$("取消",-1)])),_:1,__:[26]}),t(X,{type:"primary",onClick:q,loading:n.value},{default:a(()=>s[27]||(s[27]=[$(" 更新数据 ",-1)])),_:1,__:[27]},8,["loading"])])]),default:a(()=>[e("div",ws,[t(_t,{ref_key:"dataUpdateFormRef",ref:T,model:d,rules:c,"label-width":"140px"},{default:a(()=>[e("div",Ds,[s[21]||(s[21]=e("h3",null,"基础统计数据",-1)),t(G,{gutter:24},{default:a(()=>[t(W,{span:12},{default:a(()=>[t(O,{label:"累计受益人数",prop:"totalBeneficiaries"},{default:a(()=>[t(Z,{modelValue:d.totalBeneficiaries,"onUpdate:modelValue":s[1]||(s[1]=E=>d.totalBeneficiaries=E),min:0,max:1e6,step:100,placeholder:"请输入累计受益人数",style:{width:"100%"}},null,8,["modelValue"]),e("div",ks,"当前: "+m(i.value.totalBeneficiaries)+"人",1)]),_:1})]),_:1}),t(W,{span:12},{default:a(()=>[t(O,{label:"合作机构总数",prop:"totalInstitutions"},{default:a(()=>[t(Z,{modelValue:d.totalInstitutions,"onUpdate:modelValue":s[2]||(s[2]=E=>d.totalInstitutions=E),min:0,max:1e4,step:1,placeholder:"请输入合作机构总数",style:{width:"100%"}},null,8,["modelValue"]),e("div",Ms,"当前: "+m(i.value.totalInstitutions)+"家",1)]),_:1})]),_:1})]),_:1}),t(G,{gutter:24},{default:a(()=>[t(W,{span:12},{default:a(()=>[t(O,{label:"活跃合作机构",prop:"cooperatingInstitutions"},{default:a(()=>[t(Z,{modelValue:d.cooperatingInstitutions,"onUpdate:modelValue":s[3]||(s[3]=E=>d.cooperatingInstitutions=E),min:0,max:1e4,step:1,placeholder:"请输入活跃合作机构数",style:{width:"100%"}},null,8,["modelValue"]),e("div",Ss,"当前: "+m(i.value.cooperatingInstitutions)+"家",1)]),_:1})]),_:1}),t(W,{span:12},{default:a(()=>[t(O,{label:"志愿者总数",prop:"totalVolunteers"},{default:a(()=>[t(Z,{modelValue:d.totalVolunteers,"onUpdate:modelValue":s[4]||(s[4]=E=>d.totalVolunteers=E),min:0,max:1e5,step:10,placeholder:"请输入志愿者总数",style:{width:"100%"}},null,8,["modelValue"]),e("div",Ts,"当前: "+m(i.value.totalVolunteers)+"人",1)]),_:1})]),_:1})]),_:1})]),e("div",xs,[s[22]||(s[22]=e("h3",null,"资金统计数据",-1)),t(G,{gutter:24},{default:a(()=>[t(W,{span:12},{default:a(()=>[t(O,{label:"累计筹集金额",prop:"totalRaised"},{default:a(()=>{var E;return[t(Z,{modelValue:d.totalRaised,"onUpdate:modelValue":s[5]||(s[5]=ut=>d.totalRaised=ut),min:0,max:1e8,step:1e4,placeholder:"请输入累计筹集金额",style:{width:"100%"}},null,8,["modelValue"]),e("div",As,"当前: ¥"+m((E=i.value.totalRaised)==null?void 0:E.toLocaleString()),1)]}),_:1})]),_:1}),t(W,{span:12},{default:a(()=>[t(O,{label:"累计捐赠金额",prop:"totalDonated"},{default:a(()=>{var E;return[t(Z,{modelValue:d.totalDonated,"onUpdate:modelValue":s[6]||(s[6]=ut=>d.totalDonated=ut),min:0,max:1e8,step:1e4,placeholder:"请输入累计捐赠金额",style:{width:"100%"}},null,8,["modelValue"]),e("div",Ps,"当前: ¥"+m((E=i.value.totalDonated)==null?void 0:E.toLocaleString()),1)]}),_:1})]),_:1})]),_:1})]),e("div",Is,[s[23]||(s[23]=e("h3",null,"项目统计数据",-1)),t(G,{gutter:24},{default:a(()=>[t(W,{span:12},{default:a(()=>[t(O,{label:"项目总数",prop:"totalProjects"},{default:a(()=>[t(Z,{modelValue:d.totalProjects,"onUpdate:modelValue":s[7]||(s[7]=E=>d.totalProjects=E),min:0,max:1e4,step:1,placeholder:"请输入项目总数",style:{width:"100%"}},null,8,["modelValue"]),e("div",js,"当前: "+m(i.value.totalProjects)+"个",1)]),_:1})]),_:1}),t(W,{span:12},{default:a(()=>[t(O,{label:"进行中项目",prop:"activeProjects"},{default:a(()=>[t(Z,{modelValue:d.activeProjects,"onUpdate:modelValue":s[8]||(s[8]=E=>d.activeProjects=E),min:0,max:1e4,step:1,placeholder:"请输入进行中项目数",style:{width:"100%"}},null,8,["modelValue"]),e("div",Us,"当前: "+m(i.value.activeProjects)+"个",1)]),_:1})]),_:1})]),_:1}),t(G,{gutter:24},{default:a(()=>[t(W,{span:12},{default:a(()=>[t(O,{label:"已完成项目",prop:"completedProjects"},{default:a(()=>[t(Z,{modelValue:d.completedProjects,"onUpdate:modelValue":s[9]||(s[9]=E=>d.completedProjects=E),min:0,max:1e4,step:1,placeholder:"请输入已完成项目数",style:{width:"100%"}},null,8,["modelValue"]),e("div",zs,"当前: "+m(i.value.completedProjects)+"个",1)]),_:1})]),_:1})]),_:1})]),e("div",Rs,[s[24]||(s[24]=e("h3",null,"活动统计数据",-1)),t(G,{gutter:24},{default:a(()=>[t(W,{span:12},{default:a(()=>[t(O,{label:"活动总数",prop:"totalActivities"},{default:a(()=>[t(Z,{modelValue:d.totalActivities,"onUpdate:modelValue":s[10]||(s[10]=E=>d.totalActivities=E),min:0,max:1e5,step:10,placeholder:"请输入活动总数",style:{width:"100%"}},null,8,["modelValue"]),e("div",Fs,"当前: "+m(i.value.totalActivities)+"个",1)]),_:1})]),_:1}),t(W,{span:12},{default:a(()=>[t(O,{label:"本月活动数",prop:"thisMonthActivities"},{default:a(()=>[t(Z,{modelValue:d.thisMonthActivities,"onUpdate:modelValue":s[11]||(s[11]=E=>d.thisMonthActivities=E),min:0,max:1e3,step:1,placeholder:"请输入本月活动数",style:{width:"100%"}},null,8,["modelValue"]),e("div",Es,"当前: "+m(i.value.thisMonthActivities)+"个",1)]),_:1})]),_:1})]),_:1})]),e("div",qs,[s[25]||(s[25]=e("h3",null,"更新说明",-1)),t(O,{label:"更新原因",prop:"updateReason"},{default:a(()=>[t(ct,{modelValue:d.updateReason,"onUpdate:modelValue":s[12]||(s[12]=E=>d.updateReason=E),type:"textarea",rows:3,placeholder:"请输入数据更新的原因或说明",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"])])]),_:1},8,["modelValue"])])}}}),Zs=dt(Bs,[["__scopeId","data-v-5a5b58e5"]]);export{Zs as default};
