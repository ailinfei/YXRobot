var R=Object.defineProperty,A=Object.defineProperties;var C=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var v=(n,t,e)=>t in n?R(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,y=(n,t)=>{for(var e in t||(t={}))T.call(t,e)&&v(n,e,t[e]);if(S)for(var e of S(t))b.call(t,e)&&v(n,e,t[e]);return n},p=(n,t)=>A(n,C(t));var w=(n,t,e)=>v(n,typeof t!="symbol"?t+"":t,e);var l=(n,t,e)=>new Promise((a,o)=>{var r=c=>{try{i(e.next(c))}catch(g){o(g)}},s=c=>{try{i(e.throw(c))}catch(g){o(g)}},i=c=>c.done?a(c.value):Promise.resolve(c.value).then(r,s);i((e=e.apply(n,t)).next())});class m{static generateDevices(t=100){const e=[],a={online:.6,offline:.25,error:.1,maintenance:.05};for(let o=1;o<=t;o++){const r=this.deviceModels[Math.floor(Math.random()*this.deviceModels.length)],s=this.weightedRandomSelect(a),i=this.customerNames[Math.floor(Math.random()*this.customerNames.length)],c=this.generateRandomDate(365),g=s!=="offline"?this.generateRandomDate(300):void 0,u=s==="online"?this.generateRandomDate(1):s==="offline"?this.generateRandomDate(30):this.generateRandomDate(7),D={id:o.toString(),serialNumber:`${r.split("-")[1]}-${String(o).padStart(6,"0")}`,model:r,status:s,firmwareVersion:this.generateFirmwareVersion(),customerId:Math.floor(Math.random()*50+1).toString(),customerName:i,customerPhone:`138****${String(Math.floor(Math.random()*1e4)).padStart(4,"0")}`,lastOnlineAt:u,activatedAt:g,createdAt:c,updatedAt:this.generateRandomDate(30),specifications:this.generateSpecifications(r),usageStats:this.generateUsageStats(s,g),maintenanceRecords:this.generateMaintenanceRecords(o.toString(),s),configuration:this.generateConfiguration(),location:Math.random()>.3?this.generateLocation():void 0,notes:Math.random()>.7?this.generateNotes():void 0};e.push(D)}return e.sort((o,r)=>new Date(r.createdAt).getTime()-new Date(o.createdAt).getTime())}static generateDeviceStats(t){const e={total:t.length,online:0,offline:0,error:0,maintenance:0};return t.forEach(a=>{e[a.status]++}),e}static generateDeviceLogs(t,e=50){const a=[],o=["info","warning","error","debug"],r=["system","user","network","hardware","software"],s={info:["设备启动成功","用户登录","课程下载完成","系统自检通过","网络连接正常"],warning:["电池电量低","网络连接不稳定","存储空间不足","温度过高","固件版本过旧"],error:["网络连接失败","硬件故障","系统崩溃","文件损坏","传感器异常"],debug:["调试模式启动","性能监控数据","内存使用情况","CPU使用率","网络延迟测试"]};for(let i=1;i<=e;i++){const c=o[Math.floor(Math.random()*o.length)],g=r[Math.floor(Math.random()*r.length)],u=s[c],D=u[Math.floor(Math.random()*u.length)];a.push({id:i.toString(),deviceId:t,timestamp:this.generateRandomDate(30),level:c,category:g,message:D,details:Math.random()>.5?this.generateLogDetails(c,g):void 0})}return a.sort((i,c)=>new Date(c.timestamp).getTime()-new Date(i.timestamp).getTime())}static applyFilters(t,e){let a=[...t];if(e.keyword){const o=e.keyword.toLowerCase();a=a.filter(r=>r.serialNumber.toLowerCase().includes(o)||r.customerName.toLowerCase().includes(o)||r.customerPhone.includes(o)||r.model.toLowerCase().includes(o))}if(e.status&&(a=a.filter(o=>o.status===e.status)),e.model&&(a=a.filter(o=>o.model===e.model)),e.customerId&&(a=a.filter(o=>o.customerId===e.customerId)),e.dateRange&&e.dateRange.length===2){const[o,r]=e.dateRange;a=a.filter(s=>{const i=new Date(s.createdAt);return i>=new Date(o)&&i<=new Date(r)})}return a}static weightedRandomSelect(t){const e=Math.random();let a=0;for(const[o,r]of Object.entries(t))if(a+=r,e<=a)return o;return Object.keys(t)[0]}static generateRandomDate(t){const e=new Date;return e.setDate(e.getDate()-Math.floor(Math.random()*t)),e.toISOString()}static generateFirmwareVersion(){const t=Math.floor(Math.random()*3)+1,e=Math.floor(Math.random()*10),a=Math.floor(Math.random()*20);return`${t}.${e}.${a}`}static generateSpecifications(t){const e={"YX-EDU-2024":{cpu:"ARM Cortex-A72 四核 1.5GHz",memory:"4GB LPDDR4",storage:"64GB eMMC",display:"10.1英寸 1920x1200 IPS",battery:"8000mAh 锂电池",connectivity:["WiFi 6","Bluetooth 5.0","4G LTE"]},"YX-HOME-2024":{cpu:"ARM Cortex-A55 四核 1.2GHz",memory:"2GB LPDDR4",storage:"32GB eMMC",display:"8英寸 1280x800 IPS",battery:"5000mAh 锂电池",connectivity:["WiFi 5","Bluetooth 4.2"]},"YX-PRO-2024":{cpu:"ARM Cortex-A78 八核 2.0GHz",memory:"8GB LPDDR5",storage:"128GB UFS",display:"12.9英寸 2732x2048 OLED",battery:"12000mAh 锂电池",connectivity:["WiFi 6E","Bluetooth 5.2","5G","USB-C"]}};return e[t]||e["YX-HOME-2024"]}static generateUsageStats(t,e){if(!e||t==="offline")return{totalRuntime:0,usageCount:0,averageSessionTime:0};const a=Math.floor((Date.now()-new Date(e).getTime())/(1e3*60*60*24)),o=Math.floor(Math.random()*a*2),r=Math.floor(Math.random()*a*60),s=o>0?Math.floor(r/o):0;return{totalRuntime:r,usageCount:o,lastUsedAt:Math.random()>.3?this.generateRandomDate(7):void 0,averageSessionTime:s}}static generateMaintenanceRecords(t,e){const a=[],o=e==="maintenance"?Math.floor(Math.random()*3)+1:Math.floor(Math.random()*2);for(let r=1;r<=o;r++){const s=["repair","upgrade","inspection","replacement"],i=s[Math.floor(Math.random()*s.length)],c=this.technicians[Math.floor(Math.random()*this.technicians.length)];a.push({id:`${t}-${r}`,deviceId:t,type:i,description:this.generateMaintenanceDescription(i),technician:c,startTime:this.generateRandomDate(90),endTime:Math.random()>.2?this.generateRandomDate(85):void 0,status:Math.random()>.1?"completed":"in_progress",cost:Math.random()>.5?Math.floor(Math.random()*1e3)+100:void 0,parts:Math.random()>.6?this.generateParts():void 0,notes:Math.random()>.7?"维护顺利完成":void 0})}return a.sort((r,s)=>new Date(s.startTime).getTime()-new Date(r.startTime).getTime())}static generateConfiguration(){const t=["zh-CN","en-US","ja-JP","ko-KR"],e=["Asia/Shanghai","Asia/Tokyo","Asia/Seoul","America/New_York"];return{language:t[Math.floor(Math.random()*t.length)],timezone:e[Math.floor(Math.random()*e.length)],autoUpdate:Math.random()>.3,debugMode:Math.random()>.8,customSettings:{brightness:Math.floor(Math.random()*100),volume:Math.floor(Math.random()*100),sleepTimeout:Math.floor(Math.random()*60)+5}}}static generateLocation(){const t=[{name:"北京",lat:39.9042,lng:116.4074},{name:"上海",lat:31.2304,lng:121.4737},{name:"广州",lat:23.1291,lng:113.2644},{name:"深圳",lat:22.5431,lng:114.0579},{name:"杭州",lat:30.2741,lng:120.1551}],e=t[Math.floor(Math.random()*t.length)];return{latitude:e.lat+(Math.random()-.5)*.1,longitude:e.lng+(Math.random()-.5)*.1,address:`${e.name}市某某区某某街道`,lastUpdated:this.generateRandomDate(30)}}static generateNotes(){const t=["设备运行正常","客户反馈良好","需要定期维护","教学效果显著","使用频率较高","偶有网络问题"];return t[Math.floor(Math.random()*t.length)]}static generateMaintenanceDescription(t){const a={repair:["屏幕维修","电池更换","主板维修","外壳修复","按键维修"],upgrade:["固件升级","系统更新","硬件升级","功能增强","性能优化"],inspection:["定期检查","安全检测","性能测试","功能验证","质量检查"],replacement:["配件更换","零件替换","模块更新","组件升级","部件维修"]}[t];return a[Math.floor(Math.random()*a.length)]}static generateParts(){const t=["屏幕","电池","主板","外壳","按键","摄像头","扬声器","充电器"],e=Math.floor(Math.random()*3)+1,a=[];for(let o=0;o<e;o++){const r=t[Math.floor(Math.random()*t.length)];a.includes(r)||a.push(r)}return a}static generateLogDetails(t,e){const a={};return e==="system"?(a.cpu_usage=Math.floor(Math.random()*100),a.memory_usage=Math.floor(Math.random()*100),a.temperature=Math.floor(Math.random()*40)+20):e==="network"?(a.signal_strength=Math.floor(Math.random()*100),a.latency=Math.floor(Math.random()*100)+10,a.bandwidth=Math.floor(Math.random()*1e3)+100):e==="user"&&(a.session_duration=Math.floor(Math.random()*3600),a.actions_count=Math.floor(Math.random()*100)),a}}w(m,"deviceModels",["YX-EDU-2024","YX-HOME-2024","YX-PRO-2024"]),w(m,"customerNames",["张明华","李晓红","王建国","陈志强","刘美丽","赵建华","孙小明","周雅琴","吴大伟","郑小红","马建国","朱丽娜","胡志明","林小芳","黄大明"]),w(m,"technicians",["技术员A","技术员B","技术员C","维修师傅","工程师小王","工程师小李"]);const h=(n=500)=>new Promise(t=>setTimeout(t,n)),d=(n,t=200,e="success")=>({code:t,message:e,data:n,timestamp:Date.now()}),P={getDevices(){return l(this,arguments,function*(n={}){yield h();const t=m.generateDevices(100);let e=m.applyFilters(t,n);n.sortBy&&e.sort((u,D)=>{let M=u[n.sortBy],f=D[n.sortBy];return(n.sortBy==="createdAt"||n.sortBy==="lastOnlineAt")&&(M=new Date(M||0).getTime(),f=new Date(f||0).getTime()),typeof M=="number"&&typeof f=="number"?n.sortOrder==="asc"?M-f:f-M:typeof M=="string"&&typeof f=="string"?n.sortOrder==="asc"?M.localeCompare(f):f.localeCompare(M):0});const a=m.generateDeviceStats(e),o=n.page||1,r=n.pageSize||20,s=e.length,i=(o-1)*r,c=i+r,g=e.slice(i,c);return d({list:g,total:s,page:o,pageSize:r,totalPages:Math.ceil(s/r),stats:a})})},getDeviceById(n){return l(this,null,function*(){yield h();const e=m.generateDevices(100).find(a=>a.id===n);return e?d(e):d(null,404,"设备不存在")})},createDevice(n){return l(this,null,function*(){yield h();const t=p(y({id:Date.now().toString()},n),{status:"offline",firmwareVersion:"1.0.0",customerName:"新客户",customerPhone:"138****0000",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),usageStats:{totalRuntime:0,usageCount:0,averageSessionTime:0},maintenanceRecords:[]});return d(t)})},updateDevice(n,t){return l(this,null,function*(){yield h();const e=p(y({id:n},t),{updatedAt:new Date().toISOString()});return d(e)})},deleteDevice(n){return l(this,null,function*(){return yield h(),d(null)})},updateDeviceStatus(n,t){return l(this,null,function*(){return yield h(),d({id:n,status:t,updatedAt:new Date().toISOString()})})},rebootDevice(n){return l(this,null,function*(){return yield h(),d({message:"重启指令已发送"})})},activateDevice(n){return l(this,null,function*(){return yield h(),d({id:n,status:"online",activatedAt:new Date().toISOString()})})},pushFirmware(n,t){return l(this,null,function*(){return yield h(),d({message:"固件推送已启动",version:t||"2.0.0"})})},getDeviceLogs(n,t){return l(this,null,function*(){yield h();const e=m.generateDeviceLogs(n,100);let a=e;t!=null&&t.level&&(a=e.filter(u=>u.level===t.level));const o=(t==null?void 0:t.page)||1,r=(t==null?void 0:t.pageSize)||50,s=a.length,i=(o-1)*r,c=i+r,g=a.slice(i,c);return d({list:g,total:s,page:o,pageSize:r})})},getCustomerOptions(){return l(this,null,function*(){yield h();const n=m.customerNames.map((t,e)=>({id:(e+1).toString(),name:t}));return d(n)})},batchPushFirmware(n){return l(this,null,function*(){return yield h(),d({updatedCount:n.length,message:"批量固件推送已启动"})})},batchRebootDevices(n){return l(this,null,function*(){return yield h(),d({updatedCount:n.length,message:"批量重启指令已发送"})})},batchDeleteDevices(n){return l(this,null,function*(){return yield h(),d({deletedCount:n.length})})},exportDevices(n){return l(this,null,function*(){return yield h(),d({downloadUrl:"/api/devices/export/devices.xlsx",filename:`devices_${new Date().toISOString().split("T")[0]}.xlsx`})})}};export{P as m};
