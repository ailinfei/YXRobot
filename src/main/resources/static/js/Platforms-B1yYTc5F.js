var $e=Object.defineProperty,Te=Object.defineProperties;var De=Object.getOwnPropertyDescriptors;var le=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable;var ne=(p,v,s)=>v in p?$e(p,v,{enumerable:!0,configurable:!0,writable:!0,value:s}):p[v]=s,se=(p,v)=>{for(var s in v||(v={}))Ee.call(v,s)&&ne(p,s,v[s]);if(le)for(var s of le(v))Ue.call(v,s)&&ne(p,s,v[s]);return p},re=(p,v)=>Te(p,De(v));var B=(p,v,s)=>new Promise((D,z)=>{var f=L=>{try{V(s.next(L))}catch(T){z(T)}},n=L=>{try{V(s.throw(L))}catch(T){z(T)}},V=L=>L.done?D(L.value):Promise.resolve(L.value).then(f,n);V((s=s.apply(p,v)).next())});import{i as J}from"./charts-4xgvsrqt.js";import{B as ie,o as Re,k as Pe,T as Be,U as xe,V as ze,p as Ae,x as Fe,b as W,n as Ne}from"./element-plus-B_LfhBgj.js";/* empty css                                                                     *//* empty css                                                                         */import{C as ce}from"./CommonDialog-DmvKEX1O.js";import{D as Ie}from"./DataTable-BfvT2meh.js";import{C as Me}from"./CountUp-DhNxH7hh.js";import{x as te,c as I,al as _,y as k,z as r,D as Y,K as q,A as b,B as Z,O as x,Q as t,I as l,u as R,M as O,C as We,H as N,L as ue,P as X,a6 as K,r as E,X as qe,h as Oe,aB as He,n as Xe}from"./vue-C2NPAEWw.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as de}from"./StatusTag-C08vtP-K.js";/* empty css                                                                       */import{a as H}from"./config-Da9KhdDy.js";/* empty css                                                                  *//* empty css                                                                  */import"./utils-T70AYnHr.js";const Ke={key:0,class:"card-header"},Qe={class:"header-left"},je={class:"card-title-section"},Ge={class:"card-title"},Je={key:0,class:"card-subtitle"},Ye={class:"header-right"},Ze={class:"card-content"},et={key:0,class:"card-loading"},tt={key:1,class:"card-error"},ot={key:2,class:"card-empty"},at={key:3,class:"card-body"},lt={key:0,class:"number-display"},nt={key:0,class:"card-title-inline"},st={class:"main-value"},rt={key:1,class:"value-change"},it={key:1,class:"progress-display"},ct={class:"progress-info"},ut={class:"progress-label"},dt={class:"progress-value"},mt={key:2,class:"list-display"},pt={class:"item-label"},vt={class:"item-value"},ft={key:3,class:"custom-content"},gt={key:1,class:"card-footer"},ht={class:"footer-info"},yt={key:0,class:"update-time"},kt=te({__name:"DataCard",props:{title:{default:""},subtitle:{default:""},type:{default:"custom"},value:{default:0},unit:{default:""},change:{default:void 0},changeType:{default:"percent"},icon:{default:void 0},iconClass:{default:""},valueColor:{default:""},progressLabel:{default:""},progressColor:{default:"#409eff"},progressStrokeWidth:{default:6},listData:{default:()=>[]},loading:{type:Boolean,default:!1},loadingText:{default:"åŠ è½½ä¸­..."},error:{default:""},isEmpty:{type:Boolean,default:!1},emptyText:{default:"æš‚æ— æ•°æ®"},showHeader:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!1},showActions:{type:Boolean,default:!1},updateTime:{default:""},moreLink:{default:""},theme:{default:"default"},size:{default:"default"},clickable:{type:Boolean,default:!1},customClass:{default:""}},emits:["click","action","retry"],setup(p,{emit:v}){const s=p,D=v,z=I(()=>[`card-${s.theme}`,`card-${s.size}`,s.customClass,{clickable:s.clickable,"has-error":s.error,"is-loading":s.loading,"is-empty":s.isEmpty}]),f=I(()=>s.change===void 0?"":s.change>0?"change-positive":s.change<0?"change-negative":"change-neutral"),n=I(()=>s.change===void 0?ie:s.change>0?Re:s.change<0?Pe:ie),V=o=>{const g=Math.abs(o),c=o>0?"+":o<0?"-":"",i=s.changeType==="percent"?"%":"";return`${c}${g}${i}`},L=o=>o?new Date(o).toLocaleString("zh-CN"):"",T=o=>{D("action",o)},A=()=>{D("retry")};return(o,g)=>{const c=_("el-icon"),i=_("el-button"),U=_("el-dropdown-item"),S=_("el-dropdown-menu"),$=_("el-dropdown"),M=_("el-progress"),y=_("el-link");return r(),k("div",{class:Y(["data-card",z.value])},[o.showHeader?(r(),k("div",Ke,[b("div",Qe,[o.icon||o.$slots.icon?(r(),k("div",{key:0,class:Y(["card-icon",o.iconClass])},[Z(o.$slots,"icon",{},()=>[o.icon?(r(),N(c,{key:0},{default:l(()=>[(r(),N(ue(o.icon)))]),_:1})):q("",!0)],!0)],2)):q("",!0),b("div",je,[b("h3",Ge,x(o.title),1),o.subtitle?(r(),k("p",Je,x(o.subtitle),1)):q("",!0)])]),b("div",Ye,[Z(o.$slots,"header-actions",{},()=>[o.showActions?(r(),N($,{key:0,onCommand:T},{dropdown:l(()=>[t(S,null,{default:l(()=>[t(U,{command:"refresh"},{default:l(()=>g[0]||(g[0]=[O("åˆ·æ–°",-1)])),_:1,__:[0]}),t(U,{command:"export"},{default:l(()=>g[1]||(g[1]=[O("å¯¼å‡º",-1)])),_:1,__:[1]}),t(U,{command:"settings"},{default:l(()=>g[2]||(g[2]=[O("è®¾ç½®",-1)])),_:1,__:[2]})]),_:1})]),default:l(()=>[t(i,{text:"",icon:R(Ae)},null,8,["icon"])]),_:1})):q("",!0)],!0)])])):q("",!0),b("div",Ze,[o.loading?(r(),k("div",et,[t(c,{class:"is-loading"},{default:l(()=>[t(R(Be))]),_:1}),b("span",null,x(o.loadingText),1)])):o.error?(r(),k("div",tt,[t(c,null,{default:l(()=>[t(R(xe))]),_:1}),b("span",null,x(o.error),1),t(i,{type:"primary",size:"small",onClick:A},{default:l(()=>g[3]||(g[3]=[O("é‡è¯•",-1)])),_:1,__:[3]})])):o.isEmpty?(r(),k("div",ot,[t(c,null,{default:l(()=>[t(R(ze))]),_:1}),b("span",null,x(o.emptyText),1)])):(r(),k("div",at,[o.type==="number"?(r(),k("div",lt,[o.title?(r(),k("div",nt,x(o.title),1)):q("",!0),b("div",st,[t(Me,{value:Number(o.value),duration:1500,decimals:0,suffix:o.unit,class:"value-number",style:We({color:o.valueColor})},null,8,["value","suffix","style"])]),o.change!==void 0?(r(),k("div",rt,[t(c,{class:Y(f.value)},{default:l(()=>[(r(),N(ue(n.value)))]),_:1},8,["class"]),b("span",{class:Y(f.value)},x(V(o.change)),3)])):q("",!0)])):o.type==="progress"?(r(),k("div",it,[b("div",ct,[b("span",ut,x(o.progressLabel),1),b("span",dt,x(o.value)+x(o.unit||"%"),1)]),t(M,{percentage:Number(o.value),color:o.progressColor,"stroke-width":o.progressStrokeWidth,"show-text":!1},null,8,["percentage","color","stroke-width"])])):o.type==="list"?(r(),k("div",mt,[(r(!0),k(X,null,K(o.listData,(F,h)=>(r(),k("div",{key:h,class:"list-item"},[b("div",pt,x(F.label),1),b("div",vt,x(F.value),1)]))),128))])):(r(),k("div",ft,[Z(o.$slots,"default",{},void 0,!0)]))]))]),o.showFooter||o.$slots.footer?(r(),k("div",gt,[Z(o.$slots,"footer",{},()=>[b("div",ht,[o.updateTime?(r(),k("span",yt," æ›´æ–°æ—¶é—´: "+x(L(o.updateTime)),1)):q("",!0),o.moreLink?(r(),N(y,{key:1,type:"primary",href:o.moreLink,underline:!1},{default:l(()=>g[4]||(g[4]=[O(" æŸ¥çœ‹æ›´å¤š ",-1)])),_:1,__:[4]},8,["href"])):q("",!0)])],!0)])):q("",!0)],2)}}}),ee=oe(kt,[["__scopeId","data-v-42bdc7bd"]]),Ct=p=>H.get("/api/platform-links",{params:p}),bt=p=>H.post("/api/platform-links",p),_t=(p,v)=>H.put(`/api/platform-links/${p}`,v),wt=p=>H.delete(`/api/platform-links/${p}`),Vt=p=>H.put("/api/platform-links/batch",p),Lt=()=>H.get("/api/platform-stats"),St=()=>H.get("/api/platform-stats/regions"),$t=(p,v)=>H.patch(`/api/platform-links/${p}/toggle`,{isEnabled:v}),Tt={class:"platform-link-form"},Dt=te({__name:"PlatformLinkForm",props:{modelValue:{},regions:{},editing:{type:Boolean}},emits:["update:modelValue"],setup(p,{expose:v,emit:s}){const D=p,z=s,f=E(),n=I({get:()=>D.modelValue,set:c=>z("update:modelValue",c)}),V=I(()=>D.regions.find(c=>c.region===n.value.region)),L=I(()=>{const c=new Set;return D.regions.forEach(i=>{i.country&&c.add(i.country)}),Array.from(c).map(i=>({name:i,code:i}))}),T=I(()=>{var c;return((c=V.value)==null?void 0:c.languages)||[]}),A={platformName:[{required:!0,message:"è¯·è¾“å…¥å¹³å°åç§°",trigger:"blur"}],platformType:[{required:!0,message:"è¯·é€‰æ‹©å¹³å°ç±»å‹",trigger:"change"}],linkUrl:[{required:!0,message:"è¯·è¾“å…¥é“¾æ¥åœ°å€",trigger:"blur"},{type:"url",message:"è¯·è¾“å…¥æœ‰æ•ˆçš„URLåœ°å€",trigger:"blur"}],region:[{required:!0,message:"è¯·é€‰æ‹©åœ°åŒº",trigger:"change"}],country:[{required:!0,message:"è¯·é€‰æ‹©å›½å®¶",trigger:"change"}],languageCode:[{required:!0,message:"è¯·é€‰æ‹©è¯­è¨€",trigger:"change"}]},o=()=>{n.value.country="",n.value.languageCode=""};return v({validate:()=>B(null,null,function*(){if(!f.value)return!1;try{return yield f.value.validate(),!0}catch(c){return!1}})}),(c,i)=>{const U=_("el-input"),S=_("el-form-item"),$=_("el-option"),M=_("el-select"),y=_("el-switch"),F=_("el-form");return r(),k("div",Tt,[t(F,{ref_key:"formRef",ref:f,model:n.value,rules:A,"label-width":"120px"},{default:l(()=>[t(S,{label:"å¹³å°åç§°",prop:"platformName"},{default:l(()=>[t(U,{modelValue:n.value.platformName,"onUpdate:modelValue":i[0]||(i[0]=h=>n.value.platformName=h),placeholder:"è¯·è¾“å…¥å¹³å°åç§°"},null,8,["modelValue"])]),_:1}),t(S,{label:"å¹³å°ç±»å‹",prop:"platformType"},{default:l(()=>[t(M,{modelValue:n.value.platformType,"onUpdate:modelValue":i[1]||(i[1]=h=>n.value.platformType=h),placeholder:"è¯·é€‰æ‹©å¹³å°ç±»å‹",style:{width:"100%"}},{default:l(()=>[t($,{label:"ç”µå•†å¹³å°",value:"ecommerce"}),t($,{label:"ç§Ÿèµå¹³å°",value:"rental"})]),_:1},8,["modelValue"])]),_:1}),t(S,{label:"é“¾æ¥åœ°å€",prop:"linkUrl"},{default:l(()=>[t(U,{modelValue:n.value.linkUrl,"onUpdate:modelValue":i[2]||(i[2]=h=>n.value.linkUrl=h),placeholder:"è¯·è¾“å…¥é“¾æ¥åœ°å€",type:"url"},null,8,["modelValue"])]),_:1}),t(S,{label:"åœ°åŒº",prop:"region"},{default:l(()=>[t(M,{modelValue:n.value.region,"onUpdate:modelValue":i[3]||(i[3]=h=>n.value.region=h),placeholder:"è¯·é€‰æ‹©åœ°åŒº",style:{width:"100%"},onChange:o},{default:l(()=>[(r(!0),k(X,null,K(c.regions,h=>(r(),N($,{key:h.region,label:h.region,value:h.region},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(S,{label:"å›½å®¶",prop:"country"},{default:l(()=>[t(M,{modelValue:n.value.country,"onUpdate:modelValue":i[4]||(i[4]=h=>n.value.country=h),placeholder:"è¯·é€‰æ‹©å›½å®¶",style:{width:"100%"}},{default:l(()=>[(r(!0),k(X,null,K(L.value,h=>(r(),N($,{key:h.code,label:h.name,value:h.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(S,{label:"è¯­è¨€",prop:"languageCode"},{default:l(()=>[t(M,{modelValue:n.value.languageCode,"onUpdate:modelValue":i[5]||(i[5]=h=>n.value.languageCode=h),placeholder:"è¯·é€‰æ‹©è¯­è¨€",style:{width:"100%"}},{default:l(()=>[(r(!0),k(X,null,K(T.value,h=>(r(),N($,{key:h.code,label:h.name,value:h.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(S,{label:"å¯ç”¨çŠ¶æ€"},{default:l(()=>[t(y,{modelValue:n.value.isEnabled,"onUpdate:modelValue":i[6]||(i[6]=h=>n.value.isEnabled=h),"active-text":"å¯ç”¨","inactive-text":"ç¦ç”¨"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])}}}),Et=oe(Dt,[["__scopeId","data-v-1e01c480"]]),Ut={class:"batch-update-form"},Rt={class:"form-tip"},Pt=te({__name:"BatchUpdateForm",props:{modelValue:{},regions:{}},emits:["update:modelValue"],setup(p,{expose:v,emit:s}){const D=p,z=s,f=E(),n=I({get:()=>D.modelValue,set:g=>z("update:modelValue",g)}),V=I(()=>D.regions.find(g=>g.region===n.value.region)),L=I(()=>{var g;return((g=V.value)==null?void 0:g.countries)||[]}),T=I(()=>{var g;return((g=V.value)==null?void 0:g.languages)||[]}),A=()=>{n.value.country=void 0,n.value.languageCode=void 0};return v({validate:()=>B(null,null,function*(){return!0})}),(g,c)=>{const i=_("el-option"),U=_("el-select"),S=_("el-form-item"),$=_("el-form"),M=_("el-alert");return r(),k("div",Ut,[t($,{ref_key:"formRef",ref:f,model:n.value,"label-width":"120px"},{default:l(()=>[t(S,{label:"å¹³å°ç±»å‹"},{default:l(()=>[t(U,{modelValue:n.value.platformType,"onUpdate:modelValue":c[0]||(c[0]=y=>n.value.platformType=y),placeholder:"è¯·é€‰æ‹©å¹³å°ç±»å‹ï¼ˆå¯é€‰ï¼‰",style:{width:"100%"},clearable:""},{default:l(()=>[t(i,{label:"ç”µå•†å¹³å°",value:"ecommerce"}),t(i,{label:"ç§Ÿèµå¹³å°",value:"rental"})]),_:1},8,["modelValue"])]),_:1}),t(S,{label:"åœ°åŒº"},{default:l(()=>[t(U,{modelValue:n.value.region,"onUpdate:modelValue":c[1]||(c[1]=y=>n.value.region=y),placeholder:"è¯·é€‰æ‹©åœ°åŒºï¼ˆå¯é€‰ï¼‰",style:{width:"100%"},clearable:"",onChange:A},{default:l(()=>[(r(!0),k(X,null,K(g.regions,y=>(r(),N(i,{key:y.region,label:y.region,value:y.region},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(S,{label:"å›½å®¶"},{default:l(()=>[t(U,{modelValue:n.value.country,"onUpdate:modelValue":c[2]||(c[2]=y=>n.value.country=y),placeholder:"è¯·é€‰æ‹©å›½å®¶ï¼ˆå¯é€‰ï¼‰",style:{width:"100%"},clearable:""},{default:l(()=>[(r(!0),k(X,null,K(L.value,y=>(r(),N(i,{key:y.code,label:y.name,value:y.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(S,{label:"è¯­è¨€"},{default:l(()=>[t(U,{modelValue:n.value.languageCode,"onUpdate:modelValue":c[3]||(c[3]=y=>n.value.languageCode=y),placeholder:"è¯·é€‰æ‹©è¯­è¨€ï¼ˆå¯é€‰ï¼‰",style:{width:"100%"},clearable:""},{default:l(()=>[(r(!0),k(X,null,K(T.value,y=>(r(),N(i,{key:y.code,label:y.name,value:y.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(S,{label:"å¯ç”¨çŠ¶æ€"},{default:l(()=>[t(U,{modelValue:n.value.isEnabled,"onUpdate:modelValue":c[4]||(c[4]=y=>n.value.isEnabled=y),placeholder:"è¯·é€‰æ‹©å¯ç”¨çŠ¶æ€ï¼ˆå¯é€‰ï¼‰",style:{width:"100%"},clearable:""},{default:l(()=>[t(i,{label:"å¯ç”¨",value:!0}),t(i,{label:"ç¦ç”¨",value:!1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),b("div",Rt,[t(M,{title:"æ‰¹é‡æ›´æ–°è¯´æ˜",description:"åªæœ‰é€‰æ‹©äº†å€¼çš„å­—æ®µæ‰ä¼šè¢«æ›´æ–°ï¼Œæœªé€‰æ‹©çš„å­—æ®µä¿æŒåŸå€¼ä¸å˜",type:"info",closable:!1,"show-icon":""})])])}}}),Bt=oe(Pt,[["__scopeId","data-v-3a1e801e"]]),xt={class:"platforms-management"},zt={class:"page-header"},At={class:"header-right"},Ft={class:"stats-cards"},Nt=te({__name:"Platforms",setup(p){const v=E(!1),s=E([]),D=E([]),z=E([]),f=E({totalLinks:0,activeLinks:0,inactiveLinks:0,totalClicks:0,totalConversions:0,conversionRate:0,topPerformingLinks:[],regionStats:[],languageStats:[]}),n=qe({page:1,pageSize:20,total:0}),V=E(!1),L=E(!1),T=E(null),A=E({platformName:"",platformType:"ecommerce",linkUrl:"",region:"",country:"",languageCode:"",isEnabled:!0}),o=E({}),g=E(),c=E(),i=[{prop:"platformName",label:"å¹³å°åç§°",minWidth:120},{prop:"platformType",label:"å¹³å°ç±»å‹",width:100,type:"tag"},{prop:"linkUrl",label:"é“¾æ¥åœ°å€",minWidth:200,showOverflowTooltip:!0},{prop:"region",label:"åœ°åŒº",width:100},{prop:"languageName",label:"è¯­è¨€",width:100},{prop:"linkStatus",label:"çŠ¶æ€",width:100,type:"tag"},{prop:"isEnabled",label:"å¯ç”¨",width:80},{prop:"clickCount",label:"ç‚¹å‡»é‡",width:100,align:"right"},{prop:"conversionCount",label:"è½¬åŒ–é‡",width:100,align:"right"},{prop:"lastCheckedAt",label:"æœ€åæ£€æŸ¥",width:150,type:"date"},{prop:"actions",label:"æ“ä½œ",width:180,fixed:"right"}],U={ecommerce:{text:"ç”µå•†å¹³å°",type:"success"},rental:{text:"ç§Ÿèµå¹³å°",type:"info"}},S={active:{text:"æ­£å¸¸",type:"success"},inactive:{text:"å¼‚å¸¸",type:"danger"},checking:{text:"æ£€æŸ¥ä¸­",type:"warning"},error:{text:"é”™è¯¯",type:"danger"}},$=()=>B(null,null,function*(){try{v.value=!0;const e=yield Ct({page:n.page,pageSize:n.pageSize});e.code===200&&(s.value=e.data.list,n.total=e.data.total)}catch(e){console.error("åŠ è½½æ•°æ®å¤±è´¥:",e),W.error("åŠ è½½æ•°æ®å¤±è´¥")}finally{v.value=!1}}),M=()=>({totalLinks:80,activeLinks:65,inactiveLinks:15,totalClicks:285420,totalConversions:18650,conversionRate:6.53,topPerformingLinks:[{name:"æ·˜å®",clicks:45680,conversions:3245},{name:"äº¬ä¸œ",clicks:32450,conversions:2156},{name:"äºšé©¬é€Š",clicks:28900,conversions:1890},{name:"æ‹¼å¤šå¤š",clicks:18650,conversions:1654},{name:"å¤©çŒ«",clicks:15420,conversions:1234},{name:"eBay",clicks:12340,conversions:987}],regionStats:[{region:"ä¸­å›½å¤§é™†",linkCount:25,clicks:125680,conversions:8945},{region:"ç¾å›½",linkCount:18,clicks:89420,conversions:5234},{region:"æ—¥æœ¬",linkCount:12,clicks:45890,conversions:2890},{region:"éŸ©å›½",linkCount:10,clicks:24430,conversions:1581},{region:"å¾·å›½",linkCount:8,clicks:18650,conversions:1104},{region:"æ³•å›½",linkCount:7,clicks:15420,conversions:953}],languageStats:[{language:"ç®€ä½“ä¸­æ–‡",linkCount:28,clicks:145230,conversions:9876},{language:"è‹±è¯­",linkCount:22,clicks:98450,conversions:6234},{language:"æ—¥è¯­",linkCount:12,clicks:41740,conversions:2540},{language:"éŸ©è¯­",linkCount:10,clicks:24430,conversions:1581},{language:"å¾·è¯­",linkCount:8,clicks:18650,conversions:1104}]}),y=e=>{if(!e)return!1;const C=["totalLinks","activeLinks","totalClicks","conversionRate"].every(u=>e[u]!==void 0),d=Array.isArray(e.regionStats)&&e.regionStats.length>0,w=Array.isArray(e.topPerformingLinks);return C&&d&&w},F=()=>B(null,null,function*(){try{console.log("ğŸ“Š å¼€å§‹åŠ è½½ç»Ÿè®¡æ•°æ®..."),v.value=!0;const e=yield Lt();if(console.log("ğŸ“Š ç»Ÿè®¡æ•°æ®å“åº”:",e),e.code===200&&y(e.data))f.value=e.data,console.log("ğŸ“Š APIç»Ÿè®¡æ•°æ®å·²è®¾ç½®:",f.value);else throw new Error("APIæ•°æ®æ— æ•ˆæˆ–ä¸å®Œæ•´")}catch(e){console.warn("ğŸ“Š APIåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®:",e),f.value=M(),console.log("ğŸ“Š é»˜è®¤ç»Ÿè®¡æ•°æ®å·²è®¾ç½®:",f.value)}finally{v.value=!1,yield Xe(),console.log("ğŸ“Š æ•°æ®åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–å›¾è¡¨..."),ae()}}),h=E({regionChart:{isLoading:!0,hasError:!1,isInitialized:!1,retryCount:0},platformTypeChart:{isLoading:!0,hasError:!1,isInitialized:!1,retryCount:0},clickTrendChart:{isLoading:!0,hasError:!1,isInitialized:!1,retryCount:0},conversionChart:{isLoading:!0,hasError:!1,isInitialized:!1,retryCount:0}}),me=(e,a=10)=>new Promise((C,d)=>{let w=0;const u=()=>{const m=document.getElementById(e);m&&m.offsetWidth>0&&m.offsetHeight>0?(console.log(`âœ… å®¹å™¨ ${e} å·²å°±ç»ª:`,{width:m.offsetWidth,height:m.offsetHeight}),C(m)):w<a?(w++,console.log(`â³ ç­‰å¾…å®¹å™¨ ${e} å°±ç»ª... (${w}/${a})`),setTimeout(u,200)):(console.error(`âŒ å®¹å™¨ ${e} è¶…æ—¶æœªå°±ç»ª`),d(new Error(`Container ${e} not ready after ${a} retries`)))};u()}),Q=(e,a,C=3)=>B(null,null,function*(){var w;const d=h.value[e];try{console.log(`ğŸ“Š å¼€å§‹åˆå§‹åŒ–å›¾è¡¨: ${e}`),d.isLoading=!0,d.hasError=!1,yield me(e),(!f.value||!((w=f.value.regionStats)!=null&&w.length)&&e==="regionChart")&&console.log(`ğŸ“Š ${e} æ•°æ®æœªå°±ç»ªï¼Œä½¿ç”¨é»˜è®¤æ•°æ®`),a(),d.isInitialized=!0,d.isLoading=!1,console.log(`âœ… å›¾è¡¨ ${e} åˆå§‹åŒ–æˆåŠŸ`)}catch(u){console.error(`âŒ å›¾è¡¨ ${e} åˆå§‹åŒ–å¤±è´¥:`,u),d.hasError=!0,d.isLoading=!1,d.retryCount++,d.retryCount<C?(console.log(`ğŸ”„ é‡è¯•åˆå§‹åŒ–å›¾è¡¨ ${e} (${d.retryCount}/${C})`),setTimeout(()=>{Q(e,a,C)},1e3*d.retryCount)):console.error(`ğŸ’¥ å›¾è¡¨ ${e} åˆå§‹åŒ–æœ€ç»ˆå¤±è´¥ï¼Œå·²è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°`)}}),ae=()=>B(null,null,function*(){var a;console.log("ğŸš€ å¼€å§‹åˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨..."),(a=f.value.regionStats)!=null&&a.length||(console.log("ğŸ“Š è®¾ç½®é»˜è®¤å›¾è¡¨æ•°æ®..."),f.value=re(se({},f.value),{regionStats:[{region:"ä¸­å›½å¤§é™†",linkCount:25,clicks:125680,conversions:8945},{region:"ç¾å›½",linkCount:18,clicks:89420,conversions:5234},{region:"æ—¥æœ¬",linkCount:12,clicks:45890,conversions:2890},{region:"éŸ©å›½",linkCount:10,clicks:24430,conversions:1581},{region:"å¾·å›½",linkCount:8,clicks:18650,conversions:1104},{region:"æ³•å›½",linkCount:7,clicks:15420,conversions:953}],topPerformingLinks:[{name:"æ·˜å®",clicks:45680,conversions:3245},{name:"äº¬ä¸œ",clicks:32450,conversions:2156},{name:"äºšé©¬é€Š",clicks:28900,conversions:1890},{name:"æ‹¼å¤šå¤š",clicks:18650,conversions:1654}]}));const e=[Q("regionChart",pe),Q("platformTypeChart",ve),Q("clickTrendChart",fe),Q("conversionChart",ge)];try{yield Promise.allSettled(e),console.log("ğŸ‰ æ‰€æœ‰å›¾è¡¨åˆå§‹åŒ–å®Œæˆ!")}catch(C){console.error("ğŸ’¥ å›¾è¡¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯:",C)}}),pe=()=>{const e=document.getElementById("regionChart");if(!e){console.error("åœ°åŒºåˆ†å¸ƒå›¾è¡¨å®¹å™¨æœªæ‰¾åˆ°");return}console.log("ğŸ“Š åˆå§‹åŒ–åœ°åŒºåˆ†å¸ƒå›¾è¡¨ï¼Œæ•°æ®:",f.value.regionStats);const a=J(e),C=f.value.regionStats.length>0?f.value.regionStats.map(w=>({value:w.linkCount,name:w.region})):[{value:25,name:"ä¸­å›½å¤§é™†"},{value:18,name:"ç¾å›½"},{value:12,name:"æ—¥æœ¬"},{value:10,name:"éŸ©å›½"},{value:8,name:"å¾·å›½"},{value:7,name:"å…¶ä»–åœ°åŒº"}],d={title:{text:"åœ°åŒºåˆ†å¸ƒç»Ÿè®¡",left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}ä¸ªé“¾æ¥ ({d}%)"},legend:{orient:"vertical",left:"left",top:"middle"},series:[{name:"åœ°åŒºåˆ†å¸ƒ",type:"pie",radius:["40%","70%"],center:["60%","50%"],data:C,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{show:!0,formatter:"{b}: {c}"},labelLine:{show:!0}}],color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452"]};a.setOption(d),console.log("âœ… åœ°åŒºåˆ†å¸ƒå›¾è¡¨åˆå§‹åŒ–å®Œæˆ")},ve=()=>{const e=document.getElementById("platformTypeChart");if(!e){console.error("å¹³å°ç±»å‹å›¾è¡¨å®¹å™¨æœªæ‰¾åˆ°");return}const a=J(e),C=s.value.filter(m=>m.platformType==="ecommerce").length,d=s.value.filter(m=>m.platformType==="rental").length;console.log("ğŸ“Š å¹³å°ç±»å‹ç»Ÿè®¡:",{ecommerceCount:C,rentalCount:d});const u={title:{text:"å¹³å°ç±»å‹åˆ†å¸ƒ",left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}ä¸ªé“¾æ¥ ({d}%)"},legend:{orient:"horizontal",bottom:"10%",left:"center"},series:[{name:"å¹³å°ç±»å‹",type:"pie",radius:["30%","60%"],center:["50%","45%"],data:[{value:C||52,name:"ç”µå•†å¹³å°"},{value:d||28,name:"ç§Ÿèµå¹³å°"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{show:!0,formatter:"{b}: {c}ä¸ª\\n({d}%)"},labelLine:{show:!1}}],color:["#5470c6","#91cc75"]};a.setOption(u),console.log("ğŸ“Š å¹³å°ç±»å‹å›¾è¡¨åˆå§‹åŒ–å®Œæˆ")},fe=()=>{const e=document.getElementById("clickTrendChart");if(!e){console.error("ç‚¹å‡»é‡è¶‹åŠ¿å›¾è¡¨å®¹å™¨æœªæ‰¾åˆ°");return}const a=J(e),C=[],d=[],w=[],u=new Date;for(let P=29;P>=0;P--){const j=new Date(u);j.setDate(j.getDate()-P),C.push(j.toLocaleDateString("zh-CN",{month:"short",day:"numeric"}));const G=3e3+Math.sin(P*.2)*1e3+Math.random()*800,Se=G*(.05+Math.random()*.03);d.push(Math.floor(G)),w.push(Math.floor(Se))}console.log("ğŸ“Š ç‚¹å‡»é‡è¶‹åŠ¿æ•°æ®:",{dates:C.slice(-7),clicks:d.slice(-7)});const m={title:{text:"ç‚¹å‡»é‡è¶‹åŠ¿ï¼ˆæœ€è¿‘30å¤©ï¼‰",left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:["ç‚¹å‡»é‡","è½¬åŒ–é‡"],top:"10%"},grid:{left:"3%",right:"4%",bottom:"3%",top:"20%",containLabel:!0},xAxis:{type:"category",data:C,axisLabel:{rotate:45}},yAxis:[{type:"value",name:"ç‚¹å‡»é‡",position:"left",axisLabel:{formatter:"{value}"}},{type:"value",name:"è½¬åŒ–é‡",position:"right",axisLabel:{formatter:"{value}"}}],series:[{name:"ç‚¹å‡»é‡",type:"line",yAxisIndex:0,data:d,smooth:!0,itemStyle:{color:"#5470c6"},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(84, 112, 198, 0.3)"},{offset:1,color:"rgba(84, 112, 198, 0.1)"}]}}},{name:"è½¬åŒ–é‡",type:"line",yAxisIndex:1,data:w,smooth:!0,itemStyle:{color:"#91cc75"}}]};a.setOption(m),console.log("ğŸ“Š ç‚¹å‡»é‡è¶‹åŠ¿å›¾è¡¨åˆå§‹åŒ–å®Œæˆ")},ge=()=>{var w,u;const e=document.getElementById("conversionChart");if(!e){console.error("è½¬åŒ–ç‡å¯¹æ¯”å›¾è¡¨å®¹å™¨æœªæ‰¾åˆ°");return}const a=J(e),C=((u=(w=f.value)==null?void 0:w.regionStats)==null?void 0:u.map(m=>({region:m.region,conversionRate:(m.conversions/m.clicks*100).toFixed(2),clicks:m.clicks,conversions:m.conversions})))||[{region:"ä¸­å›½å¤§é™†",conversionRate:"7.12",clicks:125680,conversions:8945},{region:"ç¾å›½",conversionRate:"5.85",clicks:89420,conversions:5234},{region:"æ—¥æœ¬",conversionRate:"6.30",clicks:45890,conversions:2890},{region:"éŸ©å›½",conversionRate:"6.47",clicks:24430,conversions:1581},{region:"å¾·å›½",conversionRate:"5.92",clicks:18650,conversions:1104},{region:"æ³•å›½",conversionRate:"6.18",clicks:15420,conversions:953}];console.log("ğŸ“Š è½¬åŒ–ç‡å¯¹æ¯”æ•°æ®:",C);const d={title:{text:"å„åœ°åŒºè½¬åŒ–ç‡å¯¹æ¯”",left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(m){const P=C[m[0].dataIndex];if(!P)return"";const j=P.clicks||0,G=P.conversions||0;return`${P.region}<br/>è½¬åŒ–ç‡: ${P.conversionRate}%<br/>ç‚¹å‡»é‡: ${j.toLocaleString()}<br/>è½¬åŒ–é‡: ${G.toLocaleString()}`}},grid:{left:"3%",right:"4%",bottom:"3%",top:"15%",containLabel:!0},xAxis:{type:"category",data:C.map(m=>m.region),axisLabel:{rotate:45}},yAxis:{type:"value",axisLabel:{formatter:"{value}%"},min:0,max:10},series:[{name:"è½¬åŒ–ç‡",type:"bar",data:C.map(m=>parseFloat(m.conversionRate)),itemStyle:{color:function(m){const P=["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272"];return P[m.dataIndex%P.length]}},label:{show:!0,position:"top",formatter:"{c}%"}}]};a.setOption(d),console.log("ğŸ“Š è½¬åŒ–ç‡å¯¹æ¯”å›¾è¡¨åˆå§‹åŒ–å®Œæˆ")},he=()=>B(null,null,function*(){try{const e=yield St();e.code===200&&(z.value=e.data)}catch(e){console.error("åŠ è½½åŒºåŸŸé…ç½®å¤±è´¥:",e)}}),ye=e=>{n.page=e,$()},ke=e=>{n.pageSize=e,n.page=1,$()},Ce=e=>{D.value=e},be=e=>{T.value=e,A.value={platformName:e.platformName,platformType:e.platformType,linkUrl:e.linkUrl,region:e.region,country:e.country,languageCode:e.languageCode,isEnabled:e.isEnabled},V.value=!0},_e=()=>B(null,null,function*(){var e;try{if(!((e=g.value)!=null&&e.validate()))return;T.value?(yield _t(T.value.id,A.value)).code===200&&(W.success("æ›´æ–°æˆåŠŸ"),V.value=!1,T.value=null,$(),F()):(yield bt(A.value)).code===200&&(W.success("åˆ›å»ºæˆåŠŸ"),V.value=!1,$(),F())}catch(a){console.error("ä¿å­˜å¤±è´¥:",a),W.error("ä¿å­˜å¤±è´¥")}}),we=e=>B(null,null,function*(){try{yield Ne.confirm("ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé“¾æ¥å—ï¼Ÿ","ç¡®è®¤åˆ é™¤",{type:"warning"}),(yield wt(e)).code===200&&(W.success("åˆ é™¤æˆåŠŸ"),$(),F())}catch(a){a!=="cancel"&&(console.error("åˆ é™¤å¤±è´¥:",a),W.error("åˆ é™¤å¤±è´¥"))}}),Ve=()=>B(null,null,function*(){var e;try{if(!((e=c.value)!=null&&e.validate()))return;const a=D.value.map(d=>d.id);(yield Vt({linkIds:a,updates:o.value})).code===200&&(W.success("æ‰¹é‡æ›´æ–°æˆåŠŸ"),L.value=!1,o.value={},D.value=[],$(),F())}catch(a){console.error("æ‰¹é‡æ›´æ–°å¤±è´¥:",a),W.error("æ‰¹é‡æ›´æ–°å¤±è´¥")}}),Le=e=>B(null,null,function*(){try{(yield $t(e.id,e.isEnabled)).code===200&&(W.success(e.isEnabled?"å·²å¯ç”¨":"å·²ç¦ç”¨"),F())}catch(a){console.error("åˆ‡æ¢çŠ¶æ€å¤±è´¥:",a),W.error("åˆ‡æ¢çŠ¶æ€å¤±è´¥"),e.isEnabled=!e.isEnabled}});return Oe(()=>B(null,null,function*(){console.log("ğŸš€ å¹³å°é“¾æ¥ç®¡ç†é¡µé¢åŠ è½½ä¸­...");try{yield he(),yield $(),yield F(),setTimeout(()=>{console.log("ğŸ”„ å¼ºåˆ¶é‡æ–°åˆå§‹åŒ–å›¾è¡¨..."),ae()},1e3),console.log("âœ… å¹³å°é“¾æ¥ç®¡ç†é¡µé¢æ•°æ®åŠ è½½å®Œæˆ")}catch(e){console.error("âŒ å¹³å°é“¾æ¥ç®¡ç†é¡µé¢æ•°æ®åŠ è½½å¤±è´¥:",e),f.value={totalLinks:80,activeLinks:65,inactiveLinks:15,totalClicks:285420,totalConversions:18650,conversionRate:6.53,topPerformingLinks:[{name:"æ·˜å®",clicks:45680,conversions:3245},{name:"äº¬ä¸œ",clicks:32450,conversions:2156},{name:"äºšé©¬é€Š",clicks:28900,conversions:1890},{name:"æ‹¼å¤šå¤š",clicks:18650,conversions:1654}],regionStats:[{region:"ä¸­å›½å¤§é™†",linkCount:25,clicks:125680,conversions:8945},{region:"ç¾å›½",linkCount:18,clicks:89420,conversions:5234},{region:"æ—¥æœ¬",linkCount:12,clicks:45890,conversions:2890},{region:"éŸ©å›½",linkCount:10,clicks:24430,conversions:1581},{region:"å¾·å›½",linkCount:8,clicks:18650,conversions:1104},{region:"æ³•å›½",linkCount:7,clicks:15420,conversions:953}],languageStats:[{language:"ç®€ä½“ä¸­æ–‡",linkCount:28,clicks:145230,conversions:9876},{language:"è‹±è¯­",linkCount:22,clicks:98450,conversions:6234},{language:"æ—¥è¯­",linkCount:12,clicks:41740,conversions:2540},{language:"éŸ©è¯­",linkCount:10,clicks:24430,conversions:1581},{language:"å¾·è¯­",linkCount:8,clicks:18650,conversions:1104}]},setTimeout(()=>{console.log("ğŸ”„ åŠ è½½å¤±è´¥åå¼ºåˆ¶åˆå§‹åŒ–å›¾è¡¨..."),ae()},1e3)}})),(e,a)=>{const C=_("el-icon"),d=_("el-button"),w=_("el-switch");return r(),k("div",xt,[b("div",zt,[a[6]||(a[6]=b("div",{class:"header-left"},[b("h2",null,"å¹³å°é“¾æ¥ç®¡ç†"),b("p",{class:"page-description"},"ç®¡ç†ç”µå•†å¹³å°å’Œç§Ÿèµå¹³å°çš„é“¾æ¥é…ç½®")],-1)),b("div",At,[t(d,{type:"primary",onClick:a[0]||(a[0]=u=>V.value=!0)},{default:l(()=>[t(C,null,{default:l(()=>[t(R(Fe))]),_:1}),a[5]||(a[5]=O(" æ·»åŠ é“¾æ¥ ",-1))]),_:1,__:[5]})])]),b("div",Ft,[t(R(ee),{title:"æ€»é“¾æ¥æ•°",type:"number",value:f.value.totalLinks,theme:"primary","show-header":!1},null,8,["value"]),t(R(ee),{title:"æ´»è·ƒé“¾æ¥",type:"number",value:f.value.activeLinks,theme:"success","show-header":!1},null,8,["value"]),t(R(ee),{title:"æ€»ç‚¹å‡»é‡",type:"number",value:f.value.totalClicks,theme:"warning","show-header":!1},null,8,["value"]),t(R(ee),{title:"è½¬åŒ–ç‡",type:"number",value:f.value.conversionRate,unit:"%",theme:"danger","show-header":!1},null,8,["value"])]),a[9]||(a[9]=He('<div class="charts-section" data-v-25f8251a><div class="chart-row" data-v-25f8251a><div class="chart-item" data-v-25f8251a><div class="chart-header" data-v-25f8251a><h3 class="chart-title" data-v-25f8251a>ğŸ“ åœ°åŒºåˆ†å¸ƒç»Ÿè®¡</h3></div><div class="chart-content" data-v-25f8251a><div id="regionChart" class="chart-canvas" style="width:100%;height:300px;" data-v-25f8251a></div></div></div><div class="chart-item" data-v-25f8251a><div class="chart-header" data-v-25f8251a><h3 class="chart-title" data-v-25f8251a>ğŸª å¹³å°ç±»å‹åˆ†å¸ƒ</h3></div><div class="chart-content" data-v-25f8251a><div id="platformTypeChart" class="chart-canvas" style="width:100%;height:300px;" data-v-25f8251a></div></div></div></div><div class="chart-row" data-v-25f8251a><div class="chart-item" data-v-25f8251a><div class="chart-header" data-v-25f8251a><h3 class="chart-title" data-v-25f8251a>ğŸ“ˆ ç‚¹å‡»é‡è¶‹åŠ¿</h3></div><div class="chart-content" data-v-25f8251a><div id="clickTrendChart" class="chart-canvas" style="width:100%;height:300px;" data-v-25f8251a></div></div></div><div class="chart-item" data-v-25f8251a><div class="chart-header" data-v-25f8251a><h3 class="chart-title" data-v-25f8251a>ğŸ“Š è½¬åŒ–ç‡å¯¹æ¯”</h3></div><div class="chart-content" data-v-25f8251a><div id="conversionChart" class="chart-canvas" style="width:100%;height:300px;" data-v-25f8251a></div></div></div></div></div>',1)),t(R(Ie),{data:s.value,columns:i,loading:v.value,"show-toolbar":!1,"show-selection":!0,"show-actions":!0,"show-edit":!1,"show-delete":!1,onSelectionChange:Ce,onPageChange:ye,onSizeChange:ke},{platformType:l(({row:u})=>[t(R(de),{status:u.platformType,"status-map":U},null,8,["status"])]),linkStatus:l(({row:u})=>[t(R(de),{status:u.linkStatus,"status-map":S},null,8,["status"])]),isEnabled:l(({row:u})=>[t(w,{modelValue:u.isEnabled,"onUpdate:modelValue":m=>u.isEnabled=m,onChange:m=>Le(u)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),actions:l(({row:u})=>[t(d,{size:"small",type:"primary",onClick:m=>be(u)},{default:l(()=>a[7]||(a[7]=[O(" ç¼–è¾‘ ",-1)])),_:2,__:[7]},1032,["onClick"]),t(d,{size:"small",type:"danger",onClick:m=>we(u.id)},{default:l(()=>a[8]||(a[8]=[O(" åˆ é™¤ ",-1)])),_:2,__:[8]},1032,["onClick"])]),_:1},8,["data","loading"]),t(R(ce),{modelValue:V.value,"onUpdate:modelValue":a[2]||(a[2]=u=>V.value=u),title:T.value?"ç¼–è¾‘é“¾æ¥":"æ·»åŠ é“¾æ¥",width:"600px",onConfirm:_e},{default:l(()=>[t(Et,{ref_key:"linkFormRef",ref:g,modelValue:A.value,"onUpdate:modelValue":a[1]||(a[1]=u=>A.value=u),regions:z.value,editing:!!T.value},null,8,["modelValue","regions","editing"])]),_:1},8,["modelValue","title"]),t(R(ce),{modelValue:L.value,"onUpdate:modelValue":a[4]||(a[4]=u=>L.value=u),title:"æ‰¹é‡æ›´æ–°é“¾æ¥",width:"500px",onConfirm:Ve},{default:l(()=>[t(Bt,{ref_key:"batchFormRef",ref:c,modelValue:o.value,"onUpdate:modelValue":a[3]||(a[3]=u=>o.value=u),regions:z.value},null,8,["modelValue","regions"])]),_:1},8,["modelValue"])])}}}),oo=oe(Nt,[["__scopeId","data-v-25f8251a"]]);export{oo as default};
