var A=(P,f,b)=>new Promise((g,v)=>{var i=r=>{try{p(b.next(r))}catch(t){v(t)}},c=r=>{try{p(b.throw(r))}catch(t){v(t)}},p=r=>r.done?g(r.value):Promise.resolve(r.value).then(i,c);p((b=b.apply(P,f)).next())});import{x as j,aA as x,az as E,r as B,c as H,j as L,h as O,al as y,y as C,z as o,A as e,O as a,Q as l,I as n,M as d,P as D,a6 as I,D as w,H as m,u as _}from"./vue-C2NPAEWw.js";import{ax as R,am as z,b as M}from"./element-plus-B_LfhBgj.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"route-test"},G={class:"test-sections"},J={class:"test-section"},K={class:"info-card"},U={class:"info-item"},W={class:"info-item"},X={class:"info-item"},Y={class:"info-item"},Z={class:"info-item"},h={class:"test-section"},ss={class:"nav-buttons"},es={class:"test-section"},ts={class:"breadcrumb-demo"},ns={class:"test-section"},ls={class:"permission-info"},os={class:"info-item"},is={class:"info-item"},as={class:"permissions-list"},us={class:"info-item"},rs={class:"test-section"},ds={class:"route-history"},ms={class:"history-time"},vs={class:"history-path"},ps={class:"history-title"},_s={class:"test-section"},fs={class:"test-results"},bs=j({__name:"RouteTest",setup(P){const f=x(),b=E(),g=B({name:"测试用户",permissions:["admin:all","business:order:manage","business:manage"]}),v=B([]),i=B({routeConfig:!1,navigation:!1,permissions:!1,breadcrumb:!1}),c=H(()=>["business:order:manage","business:manage","admin:all"].some(s=>g.value.permissions.includes(s))),p=t=>A(null,null,function*(){try{yield b.push(t),M.success(`成功跳转到 ${t}`),i.value.navigation=!0}catch(s){M.error(`跳转失败: ${s}`),i.value.navigation=!1}}),r=()=>{const s=new Date().toLocaleTimeString();v.value.unshift({time:s,path:f.path,title:f.meta.title||"未知"}),v.value.length>10&&(v.value=v.value.slice(0,10))};return L(f,()=>{r()},{immediate:!0}),O(()=>{console.log("路由测试页面已加载"),console.log("当前路由:",f)}),(t,s)=>{const k=y("el-button"),N=y("router-link"),T=y("el-breadcrumb-item"),S=y("el-breadcrumb"),q=y("el-tag"),$=y("el-icon");return o(),C("div",Q,[s[29]||(s[29]=e("div",{class:"page-header"},[e("h2",null,"路由测试页面"),e("p",null,"测试订单管理路由和导航功能")],-1)),e("div",G,[e("div",J,[s[9]||(s[9]=e("h3",null,"当前路由信息",-1)),e("div",K,[e("div",U,[s[4]||(s[4]=e("label",null,"路由路径:",-1)),e("span",null,a(t.$route.path),1)]),e("div",W,[s[5]||(s[5]=e("label",null,"路由名称:",-1)),e("span",null,a(t.$route.name),1)]),e("div",X,[s[6]||(s[6]=e("label",null,"页面标题:",-1)),e("span",null,a(t.$route.meta.title),1)]),e("div",Y,[s[7]||(s[7]=e("label",null,"需要认证:",-1)),e("span",null,a(t.$route.meta.requiresAuth?"是":"否"),1)]),e("div",Z,[s[8]||(s[8]=e("label",null,"权限要求:",-1)),e("span",null,a(t.$route.meta.permissions?t.$route.meta.permissions.join(", "):"无"),1)])])]),e("div",h,[s[14]||(s[14]=e("h3",null,"导航测试",-1)),e("div",ss,[l(k,{type:"primary",onClick:s[0]||(s[0]=u=>p("/admin/business/orders"))},{default:n(()=>s[10]||(s[10]=[d(" 跳转到订单管理 ",-1)])),_:1,__:[10]}),l(k,{type:"success",onClick:s[1]||(s[1]=u=>p("/admin/business/customers"))},{default:n(()=>s[11]||(s[11]=[d(" 跳转到客户管理 ",-1)])),_:1,__:[11]}),l(k,{type:"info",onClick:s[2]||(s[2]=u=>p("/admin/business/sales"))},{default:n(()=>s[12]||(s[12]=[d(" 跳转到销售数据 ",-1)])),_:1,__:[12]}),l(k,{type:"warning",onClick:s[3]||(s[3]=u=>p("/admin/dashboard"))},{default:n(()=>s[13]||(s[13]=[d(" 跳转到数据看板 ",-1)])),_:1,__:[13]})])]),e("div",es,[s[18]||(s[18]=e("h3",null,"面包屑导航测试",-1)),e("div",ts,[l(S,{separator:"/"},{default:n(()=>[l(T,null,{default:n(()=>[l(N,{to:"/admin/dashboard"},{default:n(()=>s[15]||(s[15]=[d("控制台",-1)])),_:1,__:[15]})]),_:1}),l(T,null,{default:n(()=>s[16]||(s[16]=[d("业务管理",-1)])),_:1,__:[16]}),l(T,null,{default:n(()=>s[17]||(s[17]=[d("订单管理",-1)])),_:1,__:[17]})]),_:1})])]),e("div",ns,[s[22]||(s[22]=e("h3",null,"权限测试",-1)),e("div",ls,[e("div",os,[s[19]||(s[19]=e("label",null,"当前用户:",-1)),e("span",null,a(g.value.name||"未登录"),1)]),e("div",is,[s[20]||(s[20]=e("label",null,"用户权限:",-1)),e("div",as,[(o(!0),C(D,null,I(g.value.permissions,u=>(o(),m(q,{key:u,size:"small",style:{margin:"2px"}},{default:n(()=>[d(a(u),1)]),_:2},1024))),128))])]),e("div",us,[s[21]||(s[21]=e("label",null,"订单管理权限:",-1)),l(q,{type:c.value?"success":"danger",size:"small"},{default:n(()=>[d(a(c.value?"有权限":"无权限"),1)]),_:1},8,["type"])])])]),e("div",rs,[s[23]||(s[23]=e("h3",null,"路由历史",-1)),e("div",ds,[(o(!0),C(D,null,I(v.value,(u,V)=>(o(),C("div",{key:V,class:"history-item"},[e("span",ms,a(u.time),1),e("span",vs,a(u.path),1),e("span",ps,a(u.title),1)]))),128))])]),e("div",_s,[s[28]||(s[28]=e("h3",null,"测试结果",-1)),e("div",fs,[e("div",{class:w(["result-item",{success:i.value.routeConfig}])},[l($,null,{default:n(()=>[i.value.routeConfig?(o(),m(_(R),{key:0})):(o(),m(_(z),{key:1}))]),_:1}),s[24]||(s[24]=e("span",null,"路由配置正确",-1))],2),e("div",{class:w(["result-item",{success:i.value.navigation}])},[l($,null,{default:n(()=>[i.value.navigation?(o(),m(_(R),{key:0})):(o(),m(_(z),{key:1}))]),_:1}),s[25]||(s[25]=e("span",null,"导航功能正常",-1))],2),e("div",{class:w(["result-item",{success:i.value.permissions}])},[l($,null,{default:n(()=>[i.value.permissions?(o(),m(_(R),{key:0})):(o(),m(_(z),{key:1}))]),_:1}),s[26]||(s[26]=e("span",null,"权限检查正确",-1))],2),e("div",{class:w(["result-item",{success:i.value.breadcrumb}])},[l($,null,{default:n(()=>[i.value.breadcrumb?(o(),m(_(R),{key:0})):(o(),m(_(z),{key:1}))]),_:1}),s[27]||(s[27]=e("span",null,"面包屑导航正确",-1))],2)])])])])}}}),$s=F(bs,[["__scopeId","data-v-e246467c"]]);export{$s as default};
