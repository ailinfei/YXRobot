var Be=Object.defineProperty,je=Object.defineProperties;var He=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var Oe=(B,x,g)=>x in B?Be(B,x,{enumerable:!0,configurable:!0,writable:!0,value:g}):B[x]=g,Ce=(B,x)=>{for(var g in x||(x={}))Ye.call(x,g)&&Oe(B,g,x[g]);if(Me)for(var g of Me(x))We.call(x,g)&&Oe(B,g,x[g]);return B},Ve=(B,x)=>je(B,He(x));var oe=(B,x,g)=>new Promise((L,h)=>{var S=M=>{try{O(g.next(M))}catch(b){h(b)}},U=M=>{try{O(g.throw(M))}catch(b){h(b)}},O=M=>M.done?L(M.value):Promise.resolve(M.value).then(S,U);O((g=g.apply(B,x)).next())});import{x as _e,r as R,al as m,y as C,z as y,A as e,Q as t,I as l,M as f,u as A,K as q,O as o,P as pe,a6 as ve,H as Z,c as ie,D as he,X as xe,h as $e,S as Pe,ar as Le,J as Fe,V as Xe,aA as Je,az as Ke,n as Ge}from"./vue-C2NPAEWw.js";import{e as Te,a3 as Ie,F as ze,a4 as Qe,c as ge,y as Ze,a5 as et,w as Ne,t as Ee,b as j,q as Ae,r as Re,n as tt,m as Ue,a6 as st,u as lt,A as qe,W as ot,g as at,a7 as nt,a2 as it}from"./element-plus-BHn0tN3r.js";import{C as dt}from"./CustomerFormDialog-TKD8j06k.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{a as me,c as rt}from"./customer-CaCup1_C.js";import"./request-DpZIA5Wt.js";import"./utils-T70AYnHr.js";const ut={class:"customer-basic-info"},ct={class:"info-header"},mt={class:"info-content"},pt={class:"info-grid"},vt={class:"info-item"},_t={class:"info-item"},ft={class:"info-item"},gt={class:"info-item"},yt={class:"info-item"},bt={class:"info-item"},ht={class:"info-item"},$t={class:"info-item"},wt={class:"info-item full-width"},Dt={key:0,class:"info-item full-width"},kt={class:"tags-container"},St={key:1,class:"info-item full-width"},Ct={class:"notes-content"},Vt=_e({__name:"CustomerBasicInfo",props:{customer:{}},emits:["update"],setup(B,{emit:x}){const g=B,L=x,h=R(!1),S=()=>{h.value=!0},U=()=>{L("update")},O=w=>({regular:"",vip:"warning",premium:"success"})[w||""]||"",M=w=>({regular:"普通客户",vip:"VIP客户",premium:"高级客户"})[w||""]||w||"",b=w=>({active:"success",inactive:"warning",suspended:"danger"})[w||""]||"info",H=w=>({active:"活跃",inactive:"非活跃",suspended:"已暂停"})[w||""]||w||"",p=w=>w?new Date(w).toLocaleString("zh-CN"):"-",ee=()=>{var D;if(!((D=g.customer)!=null&&D.address))return"-";const{province:w,city:$,detail:Y}=g.customer.address,k=[w,$,Y].filter(Boolean);return k.length>0?k.join(" "):"-"};return(w,$)=>{var F,W,c,i,a,s,V,I,X,K,N;const Y=m("el-icon"),k=m("el-button"),D=m("el-tag");return y(),C("div",ut,[e("div",ct,[$[2]||($[2]=e("h4",null,"基本信息",-1)),t(k,{type:"primary",size:"small",onClick:S},{default:l(()=>[t(Y,null,{default:l(()=>[t(A(Te))]),_:1}),$[1]||($[1]=f(" 编辑信息 ",-1))]),_:1,__:[1]})]),e("div",mt,[e("div",pt,[e("div",vt,[$[3]||($[3]=e("label",null,"客户姓名",-1)),e("span",null,o(((F=w.customer)==null?void 0:F.name)||"-"),1)]),e("div",_t,[$[4]||($[4]=e("label",null,"客户等级",-1)),t(D,{type:O((W=w.customer)==null?void 0:W.level)},{default:l(()=>{var T;return[f(o(M((T=w.customer)==null?void 0:T.level)),1)]}),_:1},8,["type"])]),e("div",ft,[$[5]||($[5]=e("label",null,"联系电话",-1)),e("span",null,o(((c=w.customer)==null?void 0:c.phone)||"-"),1)]),e("div",gt,[$[6]||($[6]=e("label",null,"邮箱地址",-1)),e("span",null,o(((i=w.customer)==null?void 0:i.email)||"-"),1)]),e("div",yt,[$[7]||($[7]=e("label",null,"公司名称",-1)),e("span",null,o(((a=w.customer)==null?void 0:a.company)||"-"),1)]),e("div",bt,[$[8]||($[8]=e("label",null,"客户状态",-1)),t(D,{type:b((s=w.customer)==null?void 0:s.status)},{default:l(()=>{var T;return[f(o(H((T=w.customer)==null?void 0:T.status)),1)]}),_:1},8,["type"])]),e("div",ht,[$[9]||($[9]=e("label",null,"注册时间",-1)),e("span",null,o(p((V=w.customer)==null?void 0:V.registeredAt)),1)]),e("div",$t,[$[10]||($[10]=e("label",null,"最后活跃",-1)),e("span",null,o(p((I=w.customer)==null?void 0:I.lastActiveAt)),1)]),e("div",wt,[$[11]||($[11]=e("label",null,"联系地址",-1)),e("span",null,o(ee()),1)]),(K=(X=w.customer)==null?void 0:X.tags)!=null&&K.length?(y(),C("div",Dt,[$[12]||($[12]=e("label",null,"客户标签",-1)),e("div",kt,[(y(!0),C(pe,null,ve(w.customer.tags,T=>(y(),Z(D,{key:T,size:"small",type:"info",class:"tag-item"},{default:l(()=>[f(o(T),1)]),_:2},1024))),128))])])):q("",!0),(N=w.customer)!=null&&N.notes?(y(),C("div",St,[$[13]||($[13]=e("label",null,"备注信息",-1)),e("div",Ct,o(w.customer.notes),1)])):q("",!0)])]),t(dt,{modelValue:h.value,"onUpdate:modelValue":$[0]||($[0]=T=>h.value=T),customer:w.customer,onSuccess:U},null,8,["modelValue","customer"])])}}}),It=fe(Vt,[["__scopeId","data-v-f2d16cba"]]),Tt={key:0,class:"device-detail"},zt={class:"detail-section"},At={class:"section-header"},Rt={class:"device-status"},Ut={class:"online-indicator"},Mt={class:"info-grid"},Ot={class:"info-item"},xt={class:"serial-number"},Lt={class:"info-item"},Ft={class:"info-item"},Nt={class:"info-item"},Et={class:"info-item"},qt={class:"info-item"},Bt={class:"detail-section"},jt={class:"health-overview"},Ht={class:"health-score"},Yt={class:"score-circle"},Wt={class:"score-text"},Pt={class:"health-details"},Xt={class:"health-item"},Jt={key:0,class:"detail-section"},Kt={class:"usage-stats"},Gt={class:"stat-card"},Qt={class:"stat-icon"},Zt={class:"stat-content"},es={class:"stat-value"},ts={class:"stat-card"},ss={class:"stat-icon"},ls={class:"stat-content"},os={class:"stat-value"},as={class:"stat-card"},ns={class:"stat-icon"},is={class:"stat-content"},ds={class:"stat-value"},rs={class:"stat-card"},us={class:"stat-icon"},cs={class:"stat-content"},ms={class:"stat-value"},ps={class:"detail-section"},vs={class:"device-actions"},_s={class:"detail-section"},fs={class:"device-logs"},gs={class:"log-content"},ys={class:"log-message"},bs={key:0,class:"log-details"},hs={class:"dialog-footer"},$s=_e({__name:"DeviceDetailDialog",props:{modelValue:{type:Boolean},device:{default:null}},emits:["update:modelValue","edit"],setup(B,{emit:x}){const g=B,L=x,h=ie({get:()=>g.modelValue,set:c=>L("update:modelValue",c)}),S=R([{id:"1",timestamp:new Date(Date.now()-1e3*60*30).toISOString(),level:"info",message:"设备正常启动",details:"所有系统组件初始化完成"},{id:"2",timestamp:new Date(Date.now()-1e3*60*60*2).toISOString(),level:"info",message:"用户开始练字课程",details:"课程：楷书基础练习"},{id:"3",timestamp:new Date(Date.now()-1e3*60*60*4).toISOString(),level:"warning",message:"网络连接不稳定",details:"检测到间歇性网络中断"},{id:"4",timestamp:new Date(Date.now()-1e3*60*60*6).toISOString(),level:"info",message:"固件更新完成",details:"版本更新至 v2.1.0"}]),U=()=>{h.value=!1},O=()=>{g.device&&(L("edit",g.device),U())},M=()=>{j.info("远程控制功能开发中...")},b=()=>{j.info("设备重启指令已发送")},H=()=>{j.info("固件更新功能开发中...")},p=()=>{j.info("查看完整日志功能开发中...")},ee=()=>{j.info("维护模式功能开发中...")},w=c=>({pending:"info",active:"success",offline:"warning",maintenance:"primary",retired:"danger"})[c]||"info",$=c=>({pending:"待激活",active:"使用中",offline:"离线",maintenance:"维护中",retired:"已退役"})[c]||c,Y=c=>{if(!c)return"offline";const i=new Date,a=new Date(c),s=(i.getTime()-a.getTime())/(1e3*60);return s<5?"online":s<60?"warning":"offline"},k=c=>c>=80?"#67C23A":c>=60?"#E6A23C":"#F56C6C",D=c=>({info:"primary",warning:"warning",error:"danger",success:"success"})[c]||"primary",F=c=>c?new Date(c).toLocaleString("zh-CN"):"-",W=c=>{if(!c)return"从未在线";const i=new Date,a=new Date(c),s=i.getTime()-a.getTime(),V=Math.floor(s/(1e3*60));if(V<1)return"刚刚在线";if(V<5)return"在线";if(V<60)return`${V}分钟前`;const I=Math.floor(V/60);return I<24?`${I}小时前`:`${Math.floor(I/24)}天前`};return(c,i)=>{const a=m("el-tag"),s=m("el-icon"),V=m("el-progress"),I=m("el-button"),X=m("el-timeline-item"),K=m("el-timeline"),N=m("el-dialog");return y(),Z(N,{modelValue:h.value,"onUpdate:modelValue":i[0]||(i[0]=T=>h.value=T),title:"设备详情",width:"900px","before-close":U,"destroy-on-close":""},{footer:l(()=>[e("div",hs,[t(I,{onClick:U},{default:l(()=>i[26]||(i[26]=[f("关闭",-1)])),_:1,__:[26]}),t(I,{type:"primary",onClick:O},{default:l(()=>i[27]||(i[27]=[f("编辑设备",-1)])),_:1,__:[27]})])]),default:l(()=>[c.device?(y(),C("div",Tt,[e("div",zt,[e("div",At,[i[1]||(i[1]=e("h4",null,"基本信息",-1)),e("div",Rt,[t(a,{type:w(c.device.status),size:"large"},{default:l(()=>[f(o($(c.device.status)),1)]),_:1},8,["type"]),e("div",Ut,[t(s,{class:he(Y(c.device.lastOnlineAt))},{default:l(()=>[t(A(Ie))]),_:1},8,["class"]),e("span",null,o(W(c.device.lastOnlineAt)),1)])])]),e("div",Mt,[e("div",Ot,[i[2]||(i[2]=e("label",null,"设备序列号",-1)),e("span",xt,o(c.device.serialNumber),1)]),e("div",Lt,[i[3]||(i[3]=e("label",null,"设备型号",-1)),e("span",null,o(c.device.model),1)]),e("div",Ft,[i[4]||(i[4]=e("label",null,"设备类型",-1)),t(a,{type:c.device.type==="purchased"?"success":"warning",size:"small"},{default:l(()=>[f(o(c.device.type==="purchased"?"购买":"租赁"),1)]),_:1},8,["type"])]),e("div",Nt,[i[5]||(i[5]=e("label",null,"固件版本",-1)),e("span",null,o(c.device.firmwareVersion),1)]),e("div",Et,[i[6]||(i[6]=e("label",null,"激活时间",-1)),e("span",null,o(F(c.device.activatedAt)),1)]),e("div",qt,[i[7]||(i[7]=e("label",null,"最后在线",-1)),e("span",null,o(F(c.device.lastOnlineAt)),1)])])]),e("div",Bt,[i[13]||(i[13]=e("h4",null,"设备健康状况",-1)),e("div",jt,[e("div",Ht,[e("div",Yt,[t(V,{type:"circle",percentage:c.device.healthScore,color:k(c.device.healthScore),width:120,"stroke-width":8},{default:l(({percentage:T})=>[e("span",Wt,o(T)+"%",1),i[8]||(i[8]=e("span",{class:"score-label"},"健康度",-1))]),_:1},8,["percentage","color"])])]),e("div",Pt,[i[10]||(i[10]=e("div",{class:"health-item"},[e("div",{class:"health-label"},"运行状态"),e("div",{class:"health-value good"},"正常")],-1)),i[11]||(i[11]=e("div",{class:"health-item"},[e("div",{class:"health-label"},"硬件状态"),e("div",{class:"health-value good"},"良好")],-1)),e("div",Xt,[i[9]||(i[9]=e("div",{class:"health-label"},"网络连接",-1)),e("div",{class:he(["health-value",c.device.lastOnlineAt?"good":"warning"])},o(c.device.lastOnlineAt?"正常":"离线"),3)]),i[12]||(i[12]=e("div",{class:"health-item"},[e("div",{class:"health-label"},"存储空间"),e("div",{class:"health-value good"},"充足")],-1))])])]),c.device.usageStats?(y(),C("div",Jt,[i[18]||(i[18]=e("h4",null,"使用统计",-1)),e("div",Kt,[e("div",Gt,[e("div",Qt,[t(s,null,{default:l(()=>[t(A(ze))]),_:1})]),e("div",Zt,[e("div",es,o(c.device.usageStats.totalUsageHours)+"h",1),i[14]||(i[14]=e("div",{class:"stat-label"},"总使用时长",-1))])]),e("div",ts,[e("div",ss,[t(s,null,{default:l(()=>[t(A(Qe))]),_:1})]),e("div",ls,[e("div",os,o(c.device.usageStats.dailyAverageUsage)+"h",1),i[15]||(i[15]=e("div",{class:"stat-label"},"日均使用",-1))])]),e("div",as,[e("div",ns,[t(s,null,{default:l(()=>[t(A(ge))]),_:1})]),e("div",is,[e("div",ds,o(c.device.usageStats.coursesCompleted),1),i[16]||(i[16]=e("div",{class:"stat-label"},"完成课程",-1))])]),e("div",rs,[e("div",us,[t(s,null,{default:l(()=>[t(A(Te))]),_:1})]),e("div",cs,[e("div",ms,o(c.device.usageStats.charactersWritten),1),i[17]||(i[17]=e("div",{class:"stat-label"},"练习字数",-1))])])])])):q("",!0),e("div",ps,[i[24]||(i[24]=e("h4",null,"设备操作",-1)),e("div",vs,[t(I,{type:"primary",onClick:M},{default:l(()=>[t(s,null,{default:l(()=>[t(A(Ze))]),_:1}),i[19]||(i[19]=f(" 远程控制 ",-1))]),_:1,__:[19]}),t(I,{onClick:b},{default:l(()=>[t(s,null,{default:l(()=>[t(A(et))]),_:1}),i[20]||(i[20]=f(" 重启设备 ",-1))]),_:1,__:[20]}),t(I,{onClick:H},{default:l(()=>[t(s,null,{default:l(()=>[t(A(Ne))]),_:1}),i[21]||(i[21]=f(" 固件更新 ",-1))]),_:1,__:[21]}),t(I,{onClick:p},{default:l(()=>[t(s,null,{default:l(()=>[t(A(ge))]),_:1}),i[22]||(i[22]=f(" 查看日志 ",-1))]),_:1,__:[22]}),t(I,{type:"warning",onClick:ee},{default:l(()=>[t(s,null,{default:l(()=>[t(A(Ee))]),_:1}),i[23]||(i[23]=f(" 维护模式 ",-1))]),_:1,__:[23]})])]),e("div",_s,[i[25]||(i[25]=e("h4",null,"最近日志",-1)),e("div",fs,[t(K,null,{default:l(()=>[(y(!0),C(pe,null,ve(S.value,T=>(y(),Z(X,{key:T.id,timestamp:F(T.timestamp),type:D(T.level)},{default:l(()=>[e("div",gs,[e("div",ys,o(T.message),1),T.details?(y(),C("div",bs,o(T.details),1)):q("",!0)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})])])])):q("",!0)]),_:1},8,["modelValue"])}}}),ws=fe($s,[["__scopeId","data-v-29917aa2"]]),Ds={class:"customer-device-list"},ks={class:"device-header"},Ss={class:"header-left"},Cs={class:"connection-status"},Vs={class:"status-text"},Is={class:"header-actions"},Ts={class:"device-stats"},zs={class:"stat-item"},As={class:"stat-value"},Rs={class:"stat-item"},Us={class:"stat-value"},Ms={class:"stat-item"},Os={class:"stat-value"},xs={class:"stat-item"},Ls={class:"stat-value"},Fs={class:"device-table"},Ns={class:"online-status"},Es={class:"health-score"},qs={class:"score-text"},Bs={class:"usage-stats"},js={class:"stat-line"},Hs={class:"stat-value"},Ys={class:"stat-line"},Ws={class:"stat-value"},Ps={class:"dialog-footer"},Xs=_e({__name:"CustomerDeviceList",props:{customerId:{},devices:{}},emits:["refresh"],setup(B,{emit:x}){const g=B,L=x,h=R(!1),S=R([]),U=R(!1),O=R(!1),M=R();let b=null;const H=R(!1),p=xe({serialNumber:"",model:"",type:"purchased",status:"pending",activatedAt:"",notes:""}),ee={serialNumber:[{required:!0,message:"请输入设备序列号",trigger:"blur"},{min:5,max:50,message:"设备序列号长度在5-50个字符",trigger:"blur"}],model:[{required:!0,message:"请选择设备型号",trigger:"change"}],type:[{required:!0,message:"请选择设备类型",trigger:"change"}],status:[{required:!0,message:"请选择设备状态",trigger:"change"}]},w=ie(()=>{const _={total:S.value.length,purchased:0,rental:0,active:0};return S.value.forEach(r=>{r.type==="purchased"&&_.purchased++,r.type==="rental"&&_.rental++,r.status==="active"&&_.active++}),_}),$=()=>oe(null,null,function*(){h.value=!0;try{const _=yield me.getCustomerDevices(g.customerId);S.value=_.data.list||_.data}catch(_){console.error("加载设备列表失败:",_),j.error("加载设备列表失败")}finally{h.value=!1}}),Y=()=>{$(),L("refresh")},k=()=>{Object.assign(p,{serialNumber:"",model:"",type:"purchased",status:"pending",activatedAt:"",notes:""}),U.value=!0},D=()=>oe(null,null,function*(){if(M.value)try{yield M.value.validate(),O.value=!0;const _={customerId:g.customerId,serialNumber:p.serialNumber,model:p.model,type:p.type,status:p.status,activatedAt:p.activatedAt||void 0,notes:p.notes};yield me.addDeviceToCustomer(g.customerId,_),j.success("设备添加成功"),U.value=!1,Y()}catch(_){console.error("添加设备失败:",_),j.error("添加设备失败")}finally{O.value=!1}}),F=R(!1),W=R(null),c=_=>{W.value=_,F.value=!0},i=_=>{j.info("编辑设备功能开发中...")},a=_=>{i()},s=_=>oe(null,null,function*(){try{yield tt.confirm(`确定要移除设备 "${_.serialNumber}" 吗？`,"确认移除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),yield me.removeDeviceFromCustomer(g.customerId,_.id),j.success("设备移除成功"),Y()}catch(r){r!=="cancel"&&(console.error("移除设备失败:",r),j.error("移除设备失败"))}}),V=_=>({pending:"info",active:"success",offline:"warning",maintenance:"primary",retired:"danger"})[_]||"info",I=_=>({pending:"待激活",active:"使用中",offline:"离线",maintenance:"维护中",retired:"已退役"})[_]||_,X=_=>{if(!_)return"offline";const r=new Date,u=new Date(_),n=(r.getTime()-u.getTime())/(1e3*60);return n<5?"online":n<60?"warning":"offline"},K=_=>_>=80?"#67C23A":_>=60?"#E6A23C":"#F56C6C",N=_=>_?new Date(_).toLocaleString("zh-CN"):"-",T=_=>{if(!_)return"从未在线";const r=new Date,u=new Date(_),n=r.getTime()-u.getTime(),z=Math.floor(n/(1e3*60));if(z<1)return"刚刚在线";if(z<5)return"在线";if(z<60)return`${z}分钟前`;const J=Math.floor(z/60);return J<24?`${J}小时前`:`${Math.floor(J/24)}天前`},te=()=>{try{const _=`ws://localhost:8080/ws/devices/${g.customerId}`;b=new WebSocket(_),b.onopen=()=>{console.log("设备状态WebSocket连接已建立"),H.value=!0},b.onmessage=r=>{try{const u=JSON.parse(r.data);ae(u)}catch(u){console.error("解析WebSocket消息失败:",u)}},b.onclose=()=>{console.log("设备状态WebSocket连接已关闭"),H.value=!1,setTimeout(()=>{(!b||b.readyState===WebSocket.CLOSED)&&te()},5e3)},b.onerror=r=>{console.error("WebSocket连接错误:",r),H.value=!1}}catch(_){console.error("初始化WebSocket失败:",_),G()}},ae=_=>{const{deviceId:r,status:u,lastOnlineAt:n,healthScore:z,usageStats:J}=_,E=S.value.findIndex(se=>se.id===r);E!==-1&&(S.value[E]=Ve(Ce({},S.value[E]),{status:u,lastOnlineAt:n,healthScore:z||S.value[E].healthScore,usageStats:J||S.value[E].usageStats}),console.log(`设备 ${r} 状态已更新:`,u))};let Q=null;const G=()=>{Q||(Q=setInterval(()=>oe(null,null,function*(){try{S.value.forEach((_,r)=>{if(Math.random()>.8){const u=new Date().toISOString();S.value[r]=Ve(Ce({},_),{lastOnlineAt:u,healthScore:Math.max(60,Math.min(100,_.healthScore+(Math.random()-.5)*10))})}})}catch(_){console.error("轮询设备状态失败:",_)}}),3e4))},v=()=>{Q&&(clearInterval(Q),Q=null)},de=()=>{b&&(b.close(),b=null),H.value=!1,v()};return $e(()=>{S.value=g.devices,te()}),Pe(()=>{de()}),(_,r)=>{const u=m("el-icon"),n=m("el-button"),z=m("el-table-column"),J=m("el-tag"),E=m("el-progress"),se=m("el-table"),P=m("el-input"),re=m("el-form-item"),ne=m("el-option"),be=m("el-select"),le=m("el-radio"),ye=m("el-radio-group"),we=m("el-date-picker"),De=m("el-form"),ke=m("el-dialog"),Se=Le("loading");return y(),C("div",Ds,[e("div",ks,[e("div",Ss,[r[9]||(r[9]=e("h4",null,"设备管理",-1)),e("div",Cs,[t(u,{class:he(H.value?"connected":"disconnected")},{default:l(()=>[t(A(Ie))]),_:1},8,["class"]),e("span",Vs,o(H.value?"实时监控中":"离线模式"),1)])]),e("div",Is,[t(n,{type:"primary",size:"small",onClick:k},{default:l(()=>[t(u,null,{default:l(()=>[t(A(Ae))]),_:1}),r[10]||(r[10]=f(" 添加设备 ",-1))]),_:1,__:[10]}),t(n,{size:"small",onClick:Y},{default:l(()=>[t(u,null,{default:l(()=>[t(A(Re))]),_:1}),r[11]||(r[11]=f(" 刷新 ",-1))]),_:1,__:[11]})])]),e("div",Ts,[e("div",zs,[e("div",As,o(w.value.total),1),r[12]||(r[12]=e("div",{class:"stat-label"},"设备总数",-1))]),e("div",Rs,[e("div",Us,o(w.value.purchased),1),r[13]||(r[13]=e("div",{class:"stat-label"},"购买设备",-1))]),e("div",Ms,[e("div",Os,o(w.value.rental),1),r[14]||(r[14]=e("div",{class:"stat-label"},"租赁设备",-1))]),e("div",xs,[e("div",Ls,o(w.value.active),1),r[15]||(r[15]=e("div",{class:"stat-label"},"在线设备",-1))])]),e("div",Fs,[Fe((y(),Z(se,{data:S.value,stripe:""},{default:l(()=>[t(z,{prop:"serialNumber",label:"设备序列号",width:"150"}),t(z,{prop:"model",label:"设备型号",width:"120"}),t(z,{prop:"type",label:"设备类型",width:"100"},{default:l(({row:d})=>[t(J,{type:d.type==="purchased"?"success":"warning",size:"small"},{default:l(()=>[f(o(d.type==="purchased"?"购买":"租赁"),1)]),_:2},1032,["type"])]),_:1}),t(z,{prop:"status",label:"设备状态",width:"100"},{default:l(({row:d})=>[t(J,{type:V(d.status),size:"small"},{default:l(()=>[f(o(I(d.status)),1)]),_:2},1032,["type"])]),_:1}),t(z,{prop:"activatedAt",label:"激活时间",width:"150"},{default:l(({row:d})=>[f(o(N(d.activatedAt)),1)]),_:1}),t(z,{prop:"lastOnlineAt",label:"最后在线",width:"150"},{default:l(({row:d})=>[e("div",Ns,[t(u,{class:he([X(d.lastOnlineAt),"status-icon"])},{default:l(()=>[t(A(Ie))]),_:2},1032,["class"]),f(" "+o(T(d.lastOnlineAt)),1)])]),_:1}),t(z,{prop:"firmwareVersion",label:"固件版本",width:"100"}),t(z,{prop:"healthScore",label:"健康度",width:"100"},{default:l(({row:d})=>[e("div",Es,[t(E,{percentage:d.healthScore,color:K(d.healthScore),"stroke-width":6,"show-text":!1},null,8,["percentage","color"]),e("span",qs,o(d.healthScore)+"%",1)])]),_:1}),t(z,{label:"使用统计",width:"150"},{default:l(({row:d})=>{var ue,ce;return[e("div",Bs,[e("div",js,[r[16]||(r[16]=e("span",{class:"stat-label"},"使用时长:",-1)),e("span",Hs,o(((ue=d.usageStats)==null?void 0:ue.totalUsageHours)||0)+"h",1)]),e("div",Ys,[r[17]||(r[17]=e("span",{class:"stat-label"},"完成课程:",-1)),e("span",Ws,o(((ce=d.usageStats)==null?void 0:ce.coursesCompleted)||0),1)])])]}),_:1}),t(z,{label:"操作",width:"150",fixed:"right"},{default:l(({row:d})=>[t(n,{text:"",type:"primary",size:"small",onClick:ue=>c(d)},{default:l(()=>r[18]||(r[18]=[f(" 详情 ",-1)])),_:2,__:[18]},1032,["onClick"]),t(n,{text:"",type:"primary",size:"small",onClick:ue=>i(d)},{default:l(()=>r[19]||(r[19]=[f(" 编辑 ",-1)])),_:2,__:[19]},1032,["onClick"]),t(n,{text:"",type:"danger",size:"small",onClick:ue=>s(d)},{default:l(()=>r[20]||(r[20]=[f(" 移除 ",-1)])),_:2,__:[20]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Se,h.value]])]),t(ke,{modelValue:U.value,"onUpdate:modelValue":r[7]||(r[7]=d=>U.value=d),title:"添加设备",width:"600px"},{footer:l(()=>[e("div",Ps,[t(n,{onClick:r[6]||(r[6]=d=>U.value=!1)},{default:l(()=>r[23]||(r[23]=[f("取消",-1)])),_:1,__:[23]}),t(n,{type:"primary",onClick:D,loading:O.value},{default:l(()=>r[24]||(r[24]=[f(" 添加 ",-1)])),_:1,__:[24]},8,["loading"])])]),default:l(()=>[t(De,{ref_key:"deviceFormRef",ref:M,model:p,rules:ee,"label-width":"100px"},{default:l(()=>[t(re,{label:"设备序列号",prop:"serialNumber"},{default:l(()=>[t(P,{modelValue:p.serialNumber,"onUpdate:modelValue":r[0]||(r[0]=d=>p.serialNumber=d),placeholder:"请输入设备序列号",maxlength:"50"},null,8,["modelValue"])]),_:1}),t(re,{label:"设备型号",prop:"model"},{default:l(()=>[t(be,{modelValue:p.model,"onUpdate:modelValue":r[1]||(r[1]=d=>p.model=d),placeholder:"请选择设备型号"},{default:l(()=>[t(ne,{label:"YX-Robot-V1",value:"YX-Robot-V1"}),t(ne,{label:"YX-Robot-V2",value:"YX-Robot-V2"}),t(ne,{label:"YX-Robot-Pro",value:"YX-Robot-Pro"})]),_:1},8,["modelValue"])]),_:1}),t(re,{label:"设备类型",prop:"type"},{default:l(()=>[t(ye,{modelValue:p.type,"onUpdate:modelValue":r[2]||(r[2]=d=>p.type=d)},{default:l(()=>[t(le,{value:"purchased"},{default:l(()=>r[21]||(r[21]=[f("购买",-1)])),_:1,__:[21]}),t(le,{value:"rental"},{default:l(()=>r[22]||(r[22]=[f("租赁",-1)])),_:1,__:[22]})]),_:1},8,["modelValue"])]),_:1}),t(re,{label:"设备状态",prop:"status"},{default:l(()=>[t(be,{modelValue:p.status,"onUpdate:modelValue":r[3]||(r[3]=d=>p.status=d),placeholder:"请选择设备状态"},{default:l(()=>[t(ne,{label:"待激活",value:"pending"}),t(ne,{label:"使用中",value:"active"}),t(ne,{label:"离线",value:"offline"}),t(ne,{label:"维护中",value:"maintenance"}),t(ne,{label:"已退役",value:"retired"})]),_:1},8,["modelValue"])]),_:1}),p.status!=="pending"?(y(),Z(re,{key:0,label:"激活时间",prop:"activatedAt"},{default:l(()=>[t(we,{modelValue:p.activatedAt,"onUpdate:modelValue":r[4]||(r[4]=d=>p.activatedAt=d),type:"datetime",placeholder:"选择激活时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})):q("",!0),t(re,{label:"备注",prop:"notes"},{default:l(()=>[t(P,{modelValue:p.notes,"onUpdate:modelValue":r[5]||(r[5]=d=>p.notes=d),type:"textarea",rows:3,placeholder:"请输入备注信息",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(ws,{modelValue:F.value,"onUpdate:modelValue":r[8]||(r[8]=d=>F.value=d),device:W.value,onEdit:a},null,8,["modelValue","device"])])}}}),Js=fe(Xs,[["__scopeId","data-v-97d0e39b"]]),Ks={class:"customer-order-history"},Gs={class:"order-header"},Qs={class:"header-actions"},Zs={class:"order-stats"},el={class:"stat-item"},tl={class:"stat-value"},sl={class:"stat-item"},ll={class:"stat-value"},ol={class:"stat-item"},al={class:"stat-value"},nl={class:"stat-item"},il={class:"stat-value"},dl={class:"order-table"},rl={class:"product-info"},ul={class:"product-name"},cl={class:"product-details"},ml={class:"quantity"},pl={class:"model"},vl={class:"amount-display"},_l={class:"amount"},fl={key:0,class:"unit-price"},gl={key:0,class:"rental-info"},yl={class:"rental-period"},bl={class:"value"},hl={class:"rental-dates"},$l={class:"date-item"},wl={class:"value"},Dl={class:"date-item"},kl={class:"value"},Sl={key:1,class:"not-applicable"},Cl={key:0,class:"pagination-wrapper"},Vl={key:0,class:"order-detail"},Il={class:"detail-section"},Tl={class:"detail-grid"},zl={class:"detail-item"},Al={class:"detail-item"},Rl={class:"detail-item"},Ul={class:"detail-item"},Ml={class:"detail-section"},Ol={class:"detail-grid"},xl={class:"detail-item"},Ll={class:"detail-item"},Fl={class:"detail-item"},Nl={class:"detail-item"},El={class:"detail-item"},ql={class:"amount-highlight"},Bl={key:0,class:"detail-section"},jl={class:"detail-grid"},Hl={class:"detail-item"},Yl={class:"detail-item"},Wl={class:"detail-item"},Pl={class:"detail-item"},Xl={key:1,class:"detail-section"},Jl={class:"notes-content"},Kl=_e({__name:"CustomerOrderHistory",props:{customerId:{},orders:{}},setup(B){const x=B,g=R(!1),L=R([]),h=R(""),S=R(""),U=R(1),O=R(10),M=R(!1),b=R(null),H=ie(()=>{let a=L.value;h.value&&(a=a.filter(I=>I.type===h.value)),S.value&&(a=a.filter(I=>I.status===S.value));const s=(U.value-1)*O.value,V=s+O.value;return a.slice(s,V)}),p=ie(()=>{const a={total:L.value.length,totalAmount:0,completed:0,processing:0};return L.value.forEach(s=>{a.totalAmount+=s.amount,s.status==="completed"&&a.completed++,s.status==="processing"&&a.processing++}),a}),ee=ie(()=>L.value.some(a=>a.type==="rental")),w=()=>oe(null,null,function*(){g.value=!0;try{const a=yield me.getCustomerOrders(x.customerId);L.value=a.data.list||a.data}catch(a){console.error("加载订单历史失败:",a),j.error("加载订单历史失败")}finally{g.value=!1}}),$=()=>{w()},Y=()=>{U.value=1},k=a=>{O.value=a,U.value=1},D=a=>{U.value=a},F=a=>{b.value=a,M.value=!0},W=a=>({pending:"warning",processing:"primary",completed:"success",cancelled:"danger"})[a]||"info",c=a=>({pending:"待处理",processing:"进行中",completed:"已完成",cancelled:"已取消"})[a]||a,i=a=>a?new Date(a).toLocaleString("zh-CN"):"-";return $e(()=>{L.value=x.orders}),(a,s)=>{const V=m("el-option"),I=m("el-select"),X=m("el-icon"),K=m("el-button"),N=m("el-table-column"),T=m("el-tag"),te=m("el-table"),ae=m("el-pagination"),Q=m("el-dialog"),G=Le("loading");return y(),C("div",Ks,[e("div",Gs,[s[6]||(s[6]=e("h4",null,"订单历史",-1)),e("div",Qs,[t(I,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=v=>h.value=v),placeholder:"订单类型",size:"small",onChange:Y},{default:l(()=>[t(V,{label:"全部订单",value:""}),t(V,{label:"销售订单",value:"sales"}),t(V,{label:"租赁订单",value:"rental"})]),_:1},8,["modelValue"]),t(I,{modelValue:S.value,"onUpdate:modelValue":s[1]||(s[1]=v=>S.value=v),placeholder:"订单状态",size:"small",onChange:Y},{default:l(()=>[t(V,{label:"全部状态",value:""}),t(V,{label:"待处理",value:"pending"}),t(V,{label:"进行中",value:"processing"}),t(V,{label:"已完成",value:"completed"}),t(V,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"]),t(K,{size:"small",onClick:$},{default:l(()=>[t(X,null,{default:l(()=>[t(A(Re))]),_:1}),s[5]||(s[5]=f(" 刷新 ",-1))]),_:1,__:[5]})])]),e("div",Zs,[e("div",el,[e("div",tl,o(p.value.total),1),s[7]||(s[7]=e("div",{class:"stat-label"},"订单总数",-1))]),e("div",sl,[e("div",ll,"¥"+o(p.value.totalAmount.toLocaleString()),1),s[8]||(s[8]=e("div",{class:"stat-label"},"订单总额",-1))]),e("div",ol,[e("div",al,o(p.value.completed),1),s[9]||(s[9]=e("div",{class:"stat-label"},"已完成",-1))]),e("div",nl,[e("div",il,o(p.value.processing),1),s[10]||(s[10]=e("div",{class:"stat-label"},"进行中",-1))])]),e("div",dl,[Fe((y(),Z(te,{data:H.value,stripe:""},{default:l(()=>[t(N,{prop:"orderNumber",label:"订单号",width:"150"}),t(N,{prop:"type",label:"订单类型",width:"100"},{default:l(({row:v})=>[t(T,{type:v.type==="sales"?"success":"primary",size:"small"},{default:l(()=>[f(o(v.type==="sales"?"销售":"租赁"),1)]),_:2},1032,["type"])]),_:1}),t(N,{label:"产品信息",width:"200"},{default:l(({row:v})=>[e("div",rl,[e("div",ul,o(v.productName),1),e("div",cl,[e("span",ml,"数量: "+o(v.quantity),1),e("span",pl,"型号: "+o(v.productModel),1)])])]),_:1}),t(N,{prop:"amount",label:"订单金额",width:"120"},{default:l(({row:v})=>[e("div",vl,[e("span",_l,"¥"+o(v.amount.toLocaleString()),1),v.quantity>1?(y(),C("span",fl," (¥"+o((v.amount/v.quantity).toFixed(2))+"/台) ",1)):q("",!0)])]),_:1}),t(N,{prop:"status",label:"订单状态",width:"100"},{default:l(({row:v})=>[t(T,{type:W(v.status),size:"small"},{default:l(()=>[f(o(c(v.status)),1)]),_:2},1032,["type"])]),_:1}),t(N,{prop:"createdAt",label:"下单时间",width:"150"},{default:l(({row:v})=>[f(o(i(v.createdAt)),1)]),_:1}),ee.value?(y(),Z(N,{key:0,label:"租赁信息",width:"180"},{default:l(({row:v})=>[v.type==="rental"?(y(),C("div",gl,[e("div",yl,[s[11]||(s[11]=e("span",{class:"label"},"租期:",-1)),e("span",bl,o(v.rentalDays)+"天",1)]),e("div",hl,[e("div",$l,[s[12]||(s[12]=e("span",{class:"label"},"开始:",-1)),e("span",wl,o(i(v.rentalStartDate)),1)]),e("div",Dl,[s[13]||(s[13]=e("span",{class:"label"},"结束:",-1)),e("span",kl,o(i(v.rentalEndDate)),1)])])])):(y(),C("span",Sl,"-"))]),_:1})):q("",!0),t(N,{label:"操作",width:"120",fixed:"right"},{default:l(({row:v})=>[t(K,{text:"",type:"primary",size:"small",onClick:de=>F(v)},{default:l(()=>s[14]||(s[14]=[f(" 查看详情 ",-1)])),_:2,__:[14]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[G,g.value]]),L.value.length>O.value?(y(),C("div",Cl,[t(ae,{"current-page":U.value,"onUpdate:currentPage":s[2]||(s[2]=v=>U.value=v),"page-size":O.value,"onUpdate:pageSize":s[3]||(s[3]=v=>O.value=v),"page-sizes":[10,20,50],total:L.value.length,layout:"total, sizes, prev, pager, next",onSizeChange:k,onCurrentChange:D},null,8,["current-page","page-size","total"])])):q("",!0)]),t(Q,{modelValue:M.value,"onUpdate:modelValue":s[4]||(s[4]=v=>M.value=v),title:"订单详情",width:"700px"},{default:l(()=>[b.value?(y(),C("div",Vl,[e("div",Il,[s[19]||(s[19]=e("h5",null,"基本信息",-1)),e("div",Tl,[e("div",zl,[s[15]||(s[15]=e("label",null,"订单号:",-1)),e("span",null,o(b.value.orderNumber),1)]),e("div",Al,[s[16]||(s[16]=e("label",null,"订单类型:",-1)),t(T,{type:b.value.type==="sales"?"success":"primary",size:"small"},{default:l(()=>[f(o(b.value.type==="sales"?"销售订单":"租赁订单"),1)]),_:1},8,["type"])]),e("div",Rl,[s[17]||(s[17]=e("label",null,"订单状态:",-1)),t(T,{type:W(b.value.status),size:"small"},{default:l(()=>[f(o(c(b.value.status)),1)]),_:1},8,["type"])]),e("div",Ul,[s[18]||(s[18]=e("label",null,"下单时间:",-1)),e("span",null,o(i(b.value.createdAt)),1)])])]),e("div",Ml,[s[25]||(s[25]=e("h5",null,"产品信息",-1)),e("div",Ol,[e("div",xl,[s[20]||(s[20]=e("label",null,"产品名称:",-1)),e("span",null,o(b.value.productName),1)]),e("div",Ll,[s[21]||(s[21]=e("label",null,"产品型号:",-1)),e("span",null,o(b.value.productModel),1)]),e("div",Fl,[s[22]||(s[22]=e("label",null,"购买数量:",-1)),e("span",null,o(b.value.quantity)+"台",1)]),e("div",Nl,[s[23]||(s[23]=e("label",null,"单价:",-1)),e("span",null,"¥"+o((b.value.amount/b.value.quantity).toFixed(2)),1)]),e("div",El,[s[24]||(s[24]=e("label",null,"订单总额:",-1)),e("span",ql,"¥"+o(b.value.amount.toLocaleString()),1)])])]),b.value.type==="rental"?(y(),C("div",Bl,[s[30]||(s[30]=e("h5",null,"租赁信息",-1)),e("div",jl,[e("div",Hl,[s[26]||(s[26]=e("label",null,"租赁天数:",-1)),e("span",null,o(b.value.rentalDays)+"天",1)]),e("div",Yl,[s[27]||(s[27]=e("label",null,"日租金:",-1)),e("span",null,"¥"+o((b.value.amount/b.value.rentalDays).toFixed(2))+"/天",1)]),e("div",Wl,[s[28]||(s[28]=e("label",null,"开始日期:",-1)),e("span",null,o(i(b.value.rentalStartDate)),1)]),e("div",Pl,[s[29]||(s[29]=e("label",null,"结束日期:",-1)),e("span",null,o(i(b.value.rentalEndDate)),1)])])])):q("",!0),b.value.notes?(y(),C("div",Xl,[s[31]||(s[31]=e("h5",null,"备注信息",-1)),e("div",Jl,o(b.value.notes),1)])):q("",!0)])):q("",!0)]),_:1},8,["modelValue"])])}}}),Gl=fe(Kl,[["__scopeId","data-v-f98c5ff7"]]),Ql={key:0,class:"service-record-detail"},Zl={class:"detail-section"},eo={class:"section-header"},to={class:"record-status"},so={class:"info-grid"},lo={class:"info-item"},oo={class:"service-subject"},ao={class:"info-item"},no={class:"info-item"},io={class:"info-item"},ro={class:"cost-amount"},uo={class:"info-item"},co={class:"info-item"},mo={class:"detail-section"},po={class:"service-description"},vo={key:0,class:"detail-section"},_o={class:"device-info"},fo={class:"device-card"},go={class:"device-icon"},yo={class:"device-details"},bo={class:"device-id"},ho={class:"device-status"},$o={class:"detail-section"},wo={class:"service-progress"},Do={key:1,class:"detail-section"},ko={class:"attachments-list"},So=["onClick"],Co={class:"attachment-icon"},Vo={class:"attachment-info"},Io={class:"attachment-name"},To={class:"attachment-size"},zo={class:"attachment-actions"},Ao={class:"detail-section"},Ro={class:"service-timeline"},Uo={class:"timeline-content"},Mo={class:"event-title"},Oo={key:0,class:"event-description"},xo={key:1,class:"event-operator"},Lo={key:2,class:"detail-section"},Fo={class:"customer-feedback"},No={class:"feedback-rating"},Eo={class:"feedback-comment"},qo={class:"comment-text"},Bo={class:"feedback-time"},jo={class:"dialog-footer"},Ho=_e({__name:"ServiceRecordDetailDialog",props:{modelValue:{type:Boolean},record:{default:null}},emits:["update:modelValue","edit","complete"],setup(B,{emit:x}){var c,i;const g=B,L=x,h=ie({get:()=>g.modelValue,set:a=>L("update:modelValue",a)}),S=R([{id:"1",type:"created",title:"服务记录创建",description:"客户提交服务请求",operator:"系统",timestamp:((c=g.record)==null?void 0:c.createdAt)||new Date().toISOString()},{id:"2",type:"assigned",title:"分配服务人员",description:"服务已分配给相关技术人员",operator:"客服主管",timestamp:new Date(Date.now()-1e3*60*60*2).toISOString()},{id:"3",type:"processing",title:"开始处理",description:"技术人员开始处理服务请求",operator:((i=g.record)==null?void 0:i.serviceStaff)||"技术人员",timestamp:new Date(Date.now()-1e3*60*60).toISOString()}]),U=R({rating:5,comment:"服务很及时，技术人员很专业，问题得到了很好的解决。",createdAt:new Date().toISOString()}),O=()=>{h.value=!1},M=()=>{g.record&&(L("edit",g.record),O())},b=()=>{g.record&&(L("complete",g.record),O())},H=a=>{window.open(a.url,"_blank")},p=a=>{const s=document.createElement("a");s.href=a.url,s.download=a.name,document.body.appendChild(s),s.click(),document.body.removeChild(s),j.success("文件下载已开始")},ee=a=>({in_progress:"primary",completed:"success",cancelled:"danger"})[a]||"info",w=a=>({in_progress:"进行中",completed:"已完成",cancelled:"已取消"})[a]||a,$=a=>({maintenance:"warning",upgrade:"success",consultation:"primary",complaint:"danger"})[a]||"info",Y=a=>({maintenance:"维修记录",upgrade:"升级记录",consultation:"咨询记录",complaint:"投诉处理"})[a]||a,k=a=>({in_progress:1,completed:2,cancelled:0})[a]||0,D=a=>({created:"primary",assigned:"info",processing:"warning",completed:"success",cancelled:"danger"})[a]||"primary",F=a=>a?new Date(a).toLocaleString("zh-CN"):"-",W=a=>{if(a===0)return"0 B";const s=1024,V=["B","KB","MB","GB"],I=Math.floor(Math.log(a)/Math.log(s));return parseFloat((a/Math.pow(s,I)).toFixed(2))+" "+V[I]};return(a,s)=>{const V=m("el-tag"),I=m("el-icon"),X=m("el-step"),K=m("el-steps"),N=m("el-button"),T=m("el-timeline-item"),te=m("el-timeline"),ae=m("el-rate"),Q=m("el-dialog");return y(),Z(Q,{modelValue:h.value,"onUpdate:modelValue":s[1]||(s[1]=G=>h.value=G),title:"服务记录详情",width:"800px","before-close":O,"destroy-on-close":""},{footer:l(()=>{var G,v;return[e("div",jo,[t(N,{onClick:O},{default:l(()=>s[19]||(s[19]=[f("关闭",-1)])),_:1,__:[19]}),((G=a.record)==null?void 0:G.status)!=="completed"?(y(),Z(N,{key:0,type:"primary",onClick:M},{default:l(()=>s[20]||(s[20]=[f(" 编辑记录 ",-1)])),_:1,__:[20]})):q("",!0),((v=a.record)==null?void 0:v.status)==="in_progress"?(y(),Z(N,{key:1,type:"success",onClick:b},{default:l(()=>s[21]||(s[21]=[f(" 标记完成 ",-1)])),_:1,__:[21]})):q("",!0)])]}),default:l(()=>{var G;return[a.record?(y(),C("div",Ql,[e("div",Zl,[e("div",eo,[s[2]||(s[2]=e("h4",null,"基本信息",-1)),e("div",to,[t(V,{type:ee(a.record.status),size:"large"},{default:l(()=>[f(o(w(a.record.status)),1)]),_:1},8,["type"]),t(V,{type:$(a.record.type),size:"large"},{default:l(()=>[f(o(Y(a.record.type)),1)]),_:1},8,["type"])])]),e("div",so,[e("div",lo,[s[3]||(s[3]=e("label",null,"服务主题",-1)),e("span",oo,o(a.record.subject),1)]),e("div",ao,[s[4]||(s[4]=e("label",null,"服务类型",-1)),e("span",null,o(Y(a.record.type)),1)]),e("div",no,[s[5]||(s[5]=e("label",null,"服务人员",-1)),e("span",null,o(a.record.serviceStaff),1)]),e("div",io,[s[6]||(s[6]=e("label",null,"服务费用",-1)),e("span",ro,o(a.record.cost?`¥${a.record.cost.toLocaleString()}`:"免费"),1)]),e("div",uo,[s[7]||(s[7]=e("label",null,"创建时间",-1)),e("span",null,o(F(a.record.createdAt)),1)]),e("div",co,[s[8]||(s[8]=e("label",null,"更新时间",-1)),e("span",null,o(F(a.record.updatedAt)),1)])])]),e("div",mo,[s[9]||(s[9]=e("h4",null,"服务描述",-1)),e("div",po,o(a.record.description),1)]),a.record.deviceId?(y(),C("div",vo,[s[11]||(s[11]=e("h4",null,"相关设备",-1)),e("div",_o,[e("div",fo,[e("div",go,[t(I,null,{default:l(()=>[t(A(Ue))]),_:1})]),e("div",yo,[e("div",bo,"设备ID: "+o(a.record.deviceId),1),e("div",ho,[t(V,{type:"success",size:"small"},{default:l(()=>s[10]||(s[10]=[f("正常运行",-1)])),_:1,__:[10]})])])])])])):q("",!0),e("div",$o,[s[12]||(s[12]=e("h4",null,"服务进度",-1)),e("div",wo,[t(K,{active:k(a.record.status),"finish-status":"success"},{default:l(()=>[t(X,{title:"服务创建",description:"记录服务需求"}),t(X,{title:"处理中",description:"正在处理服务"}),t(X,{title:"服务完成",description:"服务已完成"})]),_:1},8,["active"])])]),(G=a.record.attachments)!=null&&G.length?(y(),C("div",Do,[s[14]||(s[14]=e("h4",null,"相关附件",-1)),e("div",ko,[(y(!0),C(pe,null,ve(a.record.attachments,v=>(y(),C("div",{key:v.id,class:"attachment-item",onClick:de=>H(v)},[e("div",Co,[t(I,null,{default:l(()=>[t(A(ge))]),_:1})]),e("div",Vo,[e("div",Io,o(v.name),1),e("div",To,o(W(v.size)),1)]),e("div",zo,[t(N,{text:"",type:"primary",size:"small",onClick:Xe(de=>p(v),["stop"])},{default:l(()=>[t(I,null,{default:l(()=>[t(A(st))]),_:1}),s[13]||(s[13]=f(" 下载 ",-1))]),_:2,__:[13]},1032,["onClick"])])],8,So))),128))])])):q("",!0),e("div",Ao,[s[15]||(s[15]=e("h4",null,"服务时间线",-1)),e("div",Ro,[t(te,null,{default:l(()=>[(y(!0),C(pe,null,ve(S.value,v=>(y(),Z(T,{key:v.id,timestamp:F(v.timestamp),type:D(v.type)},{default:l(()=>[e("div",Uo,[e("div",Mo,o(v.title),1),v.description?(y(),C("div",Oo,o(v.description),1)):q("",!0),v.operator?(y(),C("div",xo,"操作人: "+o(v.operator),1)):q("",!0)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})])]),U.value?(y(),C("div",Lo,[s[18]||(s[18]=e("h4",null,"客户反馈",-1)),e("div",Fo,[e("div",No,[s[16]||(s[16]=e("span",{class:"rating-label"},"满意度评分:",-1)),t(ae,{modelValue:U.value.rating,"onUpdate:modelValue":s[0]||(s[0]=v=>U.value.rating=v),disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue"])]),e("div",Eo,[s[17]||(s[17]=e("span",{class:"comment-label"},"客户评价:",-1)),e("div",qo,o(U.value.comment),1)]),e("div",Bo," 反馈时间: "+o(F(U.value.createdAt)),1)])])):q("",!0)])):q("",!0)]}),_:1},8,["modelValue"])}}}),Yo=fe(Ho,[["__scopeId","data-v-149c2268"]]),Wo={class:"customer-service-records"},Po={class:"service-header"},Xo={class:"header-actions"},Jo={class:"service-stats"},Ko={class:"stat-item"},Go={class:"stat-value"},Qo={class:"stat-item"},Zo={class:"stat-value"},ea={class:"stat-item"},ta={class:"stat-value"},sa={class:"stat-item"},la={class:"stat-value"},oa={class:"service-timeline"},aa={class:"timeline-content"},na={class:"record-header"},ia={class:"record-title"},da={class:"record-subject"},ra={class:"record-actions"},ua={class:"record-content"},ca={class:"record-description"},ma={class:"record-meta"},pa={key:0,class:"meta-item"},va={key:1,class:"meta-item"},_a={key:2,class:"meta-item"},fa={class:"meta-item"},ga={key:0,class:"record-attachments"},ya={class:"attachments-list"},ba={key:0,class:"empty-records"},ha={class:"dialog-footer"},$a=_e({__name:"CustomerServiceRecords",props:{customerId:{},records:{}},emits:["refresh"],setup(B,{emit:x}){const g=B,L=x,h=R(!1),S=R([]),U=R([]),O=R(""),M=R(!1),b=R(!1),H=R(),p=xe({type:"",subject:"",deviceId:"",serviceStaff:"",cost:0,status:"in_progress",description:"",attachments:[]}),ee={type:[{required:!0,message:"请选择记录类型",trigger:"change"}],subject:[{required:!0,message:"请输入服务主题",trigger:"blur"},{min:2,max:100,message:"服务主题长度在2-100个字符",trigger:"blur"}],serviceStaff:[{required:!0,message:"请输入服务人员姓名",trigger:"blur"}],status:[{required:!0,message:"请选择服务状态",trigger:"change"}],description:[{required:!0,message:"请输入服务描述",trigger:"blur"},{min:10,max:500,message:"服务描述长度在10-500个字符",trigger:"blur"}]},w=ie(()=>"/api/upload/service-attachments"),$=ie(()=>({Authorization:`Bearer ${localStorage.getItem("token")||""}`})),Y=ie(()=>O.value?S.value.filter(u=>u.type===O.value):S.value),k=ie(()=>{const u={total:S.value.length,maintenance:0,upgrade:0,consultation:0,complaint:0};return S.value.forEach(n=>{n.type==="maintenance"&&u.maintenance++,n.type==="upgrade"&&u.upgrade++,n.type==="consultation"&&u.consultation++,n.type==="complaint"&&u.complaint++}),u}),D=()=>oe(null,null,function*(){h.value=!0;try{const u=yield me.getCustomerServiceRecords(g.customerId);S.value=u.data.list||u.data}catch(u){console.error("加载服务记录失败:",u),j.error("加载服务记录失败")}finally{h.value=!1}}),F=()=>oe(null,null,function*(){try{const u=yield me.getCustomerDevices(g.customerId);U.value=u.data.list||u.data}catch(u){console.error("加载客户设备失败:",u)}}),W=()=>{D(),L("refresh")},c=()=>{},i=()=>{Object.assign(p,{type:"",subject:"",deviceId:"",serviceStaff:"",cost:0,status:"in_progress",description:"",attachments:[]}),M.value=!0},a=()=>oe(null,null,function*(){if(H.value)try{yield H.value.validate(),b.value=!0;const u={customerId:g.customerId,type:p.type,subject:p.subject,deviceId:p.deviceId||void 0,serviceStaff:p.serviceStaff,cost:p.cost,status:p.status,description:p.description,attachments:p.attachments.map(n=>{var z;return{name:n.name,url:((z=n.response)==null?void 0:z.url)||n.url,size:n.size}})};yield me.createServiceRecord(g.customerId,u),j.success("服务记录添加成功"),M.value=!1,W()}catch(u){console.error("添加服务记录失败:",u),j.error("添加服务记录失败")}finally{b.value=!1}}),s=R(!1),V=R(null),I=u=>{V.value=u,s.value=!0},X=u=>{j.info("编辑记录功能开发中...")},K=u=>{X()},N=u=>oe(null,null,function*(){try{yield me.createServiceRecord(g.customerId,{type:u.type,subject:u.subject,description:u.description,deviceId:u.deviceId,serviceStaff:u.serviceStaff,cost:u.cost,status:"completed",attachments:u.attachments}),j.success("服务记录已标记为完成"),W()}catch(n){console.error("更新服务记录失败:",n),j.error("更新服务记录失败")}}),T=u=>{window.open(u.url,"_blank")},te=u=>{const n=["image/jpeg","image/png","image/gif","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(u.type),z=u.size/1024/1024<10;return n?z?!0:(j.error("文件大小不能超过10MB"),!1):(j.error("只支持图片、PDF、Word格式文件"),!1)},ae=u=>({maintenance:"warning",upgrade:"success",consultation:"primary",complaint:"danger"})[u]||"info",Q=u=>({maintenance:"维修记录",upgrade:"升级记录",consultation:"咨询记录",complaint:"投诉处理"})[u]||u,G=u=>({in_progress:"primary",completed:"success",cancelled:"danger"})[u]||"info",v=u=>({in_progress:"进行中",completed:"已完成",cancelled:"已取消"})[u]||u,de=u=>({maintenance:"warning",upgrade:"success",consultation:"primary",complaint:"danger"})[u]||"info",_=u=>({maintenance:Ee,upgrade:Upgrade,consultation:at,complaint:ot})[u]||ge,r=u=>u?new Date(u).toLocaleString("zh-CN"):"-";return $e(()=>{S.value=g.records,F()}),(u,n)=>{const z=m("el-icon"),J=m("el-button"),E=m("el-option"),se=m("el-select"),P=m("el-tag"),re=m("el-timeline-item"),ne=m("el-timeline"),be=m("el-empty"),le=m("el-form-item"),ye=m("el-input"),we=m("el-input-number"),De=m("el-upload"),ke=m("el-form"),Se=m("el-dialog");return y(),C("div",Wo,[e("div",Po,[n[14]||(n[14]=e("h4",null,"服务记录",-1)),e("div",Xo,[t(J,{type:"primary",size:"small",onClick:i},{default:l(()=>[t(z,null,{default:l(()=>[t(A(Ae))]),_:1}),n[12]||(n[12]=f(" 添加记录 ",-1))]),_:1,__:[12]}),t(se,{modelValue:O.value,"onUpdate:modelValue":n[0]||(n[0]=d=>O.value=d),placeholder:"记录类型",size:"small",onChange:c},{default:l(()=>[t(E,{label:"全部类型",value:""}),t(E,{label:"维修记录",value:"maintenance"}),t(E,{label:"升级记录",value:"upgrade"}),t(E,{label:"咨询记录",value:"consultation"}),t(E,{label:"投诉处理",value:"complaint"})]),_:1},8,["modelValue"]),t(J,{size:"small",onClick:W},{default:l(()=>[t(z,null,{default:l(()=>[t(A(Re))]),_:1}),n[13]||(n[13]=f(" 刷新 ",-1))]),_:1,__:[13]})])]),e("div",Jo,[e("div",Ko,[e("div",Go,o(k.value.total),1),n[15]||(n[15]=e("div",{class:"stat-label"},"服务总数",-1))]),e("div",Qo,[e("div",Zo,o(k.value.maintenance),1),n[16]||(n[16]=e("div",{class:"stat-label"},"维修记录",-1))]),e("div",ea,[e("div",ta,o(k.value.upgrade),1),n[17]||(n[17]=e("div",{class:"stat-label"},"升级记录",-1))]),e("div",sa,[e("div",la,o(k.value.consultation),1),n[18]||(n[18]=e("div",{class:"stat-label"},"咨询记录",-1))])]),e("div",oa,[t(ne,null,{default:l(()=>[(y(!0),C(pe,null,ve(Y.value,d=>(y(),Z(re,{key:d.id,timestamp:r(d.createdAt),placement:"top",type:de(d.type),icon:_(d.type)},{default:l(()=>{var ue;return[e("div",aa,[e("div",na,[e("div",ia,[t(P,{type:ae(d.type),size:"small"},{default:l(()=>[f(o(Q(d.type)),1)]),_:2},1032,["type"]),e("span",da,o(d.subject),1)]),e("div",ra,[t(J,{text:"",type:"primary",size:"small",onClick:ce=>I(d)},{default:l(()=>n[19]||(n[19]=[f(" 查看详情 ",-1)])),_:2,__:[19]},1032,["onClick"]),t(J,{text:"",type:"primary",size:"small",onClick:ce=>X(d)},{default:l(()=>n[20]||(n[20]=[f(" 编辑 ",-1)])),_:2,__:[20]},1032,["onClick"])])]),e("div",ua,[e("p",ca,o(d.description),1),e("div",ma,[d.deviceId?(y(),C("div",pa,[t(z,null,{default:l(()=>[t(A(Ue))]),_:1}),e("span",null,"设备: "+o(d.deviceId),1)])):q("",!0),d.serviceStaff?(y(),C("div",va,[t(z,null,{default:l(()=>[t(A(lt))]),_:1}),e("span",null,"服务人员: "+o(d.serviceStaff),1)])):q("",!0),d.cost?(y(),C("div",_a,[t(z,null,{default:l(()=>[t(A(qe))]),_:1}),e("span",null,"费用: ¥"+o(d.cost.toLocaleString()),1)])):q("",!0),e("div",fa,[t(z,null,{default:l(()=>[t(A(ze))]),_:1}),n[21]||(n[21]=e("span",null,"状态: ",-1)),t(P,{type:G(d.status),size:"small"},{default:l(()=>[f(o(v(d.status)),1)]),_:2},1032,["type"])])]),(ue=d.attachments)!=null&&ue.length?(y(),C("div",ga,[n[22]||(n[22]=e("div",{class:"attachments-label"},"附件:",-1)),e("div",ya,[(y(!0),C(pe,null,ve(d.attachments,ce=>(y(),Z(P,{key:ce.id,size:"small",type:"info",class:"attachment-tag",onClick:Za=>T(ce)},{default:l(()=>[t(z,null,{default:l(()=>[t(A(ge))]),_:1}),f(" "+o(ce.name),1)]),_:2},1032,["onClick"]))),128))])])):q("",!0)])])]}),_:2},1032,["timestamp","type","icon"]))),128))]),_:1}),Y.value.length===0?(y(),C("div",ba,[t(be,{description:"暂无服务记录"})])):q("",!0)]),t(Se,{modelValue:M.value,"onUpdate:modelValue":n[10]||(n[10]=d=>M.value=d),title:"添加服务记录",width:"700px"},{footer:l(()=>[e("div",ha,[t(J,{onClick:n[9]||(n[9]=d=>M.value=!1)},{default:l(()=>n[25]||(n[25]=[f("取消",-1)])),_:1,__:[25]}),t(J,{type:"primary",onClick:a,loading:b.value},{default:l(()=>n[26]||(n[26]=[f(" 添加 ",-1)])),_:1,__:[26]},8,["loading"])])]),default:l(()=>[t(ke,{ref_key:"recordFormRef",ref:H,model:p,rules:ee,"label-width":"100px"},{default:l(()=>[t(le,{label:"记录类型",prop:"type"},{default:l(()=>[t(se,{modelValue:p.type,"onUpdate:modelValue":n[1]||(n[1]=d=>p.type=d),placeholder:"请选择记录类型"},{default:l(()=>[t(E,{label:"维修记录",value:"maintenance"}),t(E,{label:"升级记录",value:"upgrade"}),t(E,{label:"咨询记录",value:"consultation"}),t(E,{label:"投诉处理",value:"complaint"})]),_:1},8,["modelValue"])]),_:1}),t(le,{label:"服务主题",prop:"subject"},{default:l(()=>[t(ye,{modelValue:p.subject,"onUpdate:modelValue":n[2]||(n[2]=d=>p.subject=d),placeholder:"请输入服务主题",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(le,{label:"相关设备",prop:"deviceId"},{default:l(()=>[t(se,{modelValue:p.deviceId,"onUpdate:modelValue":n[3]||(n[3]=d=>p.deviceId=d),placeholder:"请选择相关设备",clearable:""},{default:l(()=>[(y(!0),C(pe,null,ve(U.value,d=>(y(),Z(E,{key:d.id,label:`${d.serialNumber} (${d.model})`,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(le,{label:"服务人员",prop:"serviceStaff"},{default:l(()=>[t(ye,{modelValue:p.serviceStaff,"onUpdate:modelValue":n[4]||(n[4]=d=>p.serviceStaff=d),placeholder:"请输入服务人员姓名",maxlength:"50"},null,8,["modelValue"])]),_:1}),t(le,{label:"服务费用",prop:"cost"},{default:l(()=>[t(we,{modelValue:p.cost,"onUpdate:modelValue":n[5]||(n[5]=d=>p.cost=d),min:0,precision:2,placeholder:"请输入服务费用",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(le,{label:"服务状态",prop:"status"},{default:l(()=>[t(se,{modelValue:p.status,"onUpdate:modelValue":n[6]||(n[6]=d=>p.status=d),placeholder:"请选择服务状态"},{default:l(()=>[t(E,{label:"进行中",value:"in_progress"}),t(E,{label:"已完成",value:"completed"}),t(E,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),t(le,{label:"服务描述",prop:"description"},{default:l(()=>[t(ye,{modelValue:p.description,"onUpdate:modelValue":n[7]||(n[7]=d=>p.description=d),type:"textarea",rows:4,placeholder:"请详细描述服务内容",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(le,{label:"附件上传",prop:"attachments"},{default:l(()=>[t(De,{"file-list":p.attachments,"onUpdate:fileList":n[8]||(n[8]=d=>p.attachments=d),action:w.value,headers:$.value,"before-upload":te,multiple:"",limit:5},{tip:l(()=>n[24]||(n[24]=[e("div",{class:"upload-tip"},"支持图片、文档格式，单个文件不超过10MB，最多5个文件",-1)])),default:l(()=>[t(J,{size:"small"},{default:l(()=>[t(z,null,{default:l(()=>[t(A(Ne))]),_:1}),n[23]||(n[23]=f(" 上传附件 ",-1))]),_:1,__:[23]})]),_:1},8,["file-list","action","headers"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(Yo,{modelValue:s.value,"onUpdate:modelValue":n[11]||(n[11]=d=>s.value=d),record:V.value,onEdit:K,onComplete:N},null,8,["modelValue","record"])])}}}),wa=fe($a,[["__scopeId","data-v-45458d6c"]]),Da={class:"customer-detail"},ka={class:"page-header"},Sa={class:"header-left"},Ca={class:"customer-title"},Va={class:"title-info"},Ia={class:"customer-meta"},Ta={class:"customer-id"},za={class:"header-right"},Aa={class:"overview-cards"},Ra={class:"stat-card"},Ua={class:"stat-icon devices"},Ma={class:"stat-content"},Oa={class:"stat-value"},xa={class:"stat-breakdown"},La={class:"stat-card"},Fa={class:"stat-icon revenue"},Na={class:"stat-content"},Ea={class:"stat-value"},qa={class:"stat-breakdown"},Ba={class:"stat-card"},ja={class:"stat-icon orders"},Ha={class:"stat-content"},Ya={class:"stat-value"},Wa={class:"stat-breakdown"},Pa={class:"stat-card"},Xa={class:"stat-icon activity"},Ja={class:"stat-content"},Ka={class:"stat-value"},Ga={class:"stat-breakdown"},Qa=_e({__name:"CustomerDetail",setup(B){const x=Je(),g=Ke(),L=R(x.params.id),h=R(null),S=R("basic"),U=R(!1),O=()=>{g.back()},M=()=>oe(null,null,function*(){U.value=!0;try{const k=yield rt.getCustomer(L.value);h.value=k.data}catch(k){console.error("加载客户详情失败:",k),j.error("加载客户详情失败")}finally{U.value=!1}}),b=()=>{const k=document.querySelector(".customer-basic-info");if(k){const D=k.querySelector("button");D==null||D.click()}},H=()=>{S.value="devices",Ge(()=>{const k=document.querySelector(".customer-device-list");if(k){const D=k.querySelector('button[type="primary"]');D==null||D.click()}})},p=()=>{M()},ee=k=>({regular:"",vip:"warning",premium:"success"})[k||""]||"",w=k=>({regular:"普通客户",vip:"VIP客户",premium:"高级客户"})[k||""]||k||"",$=k=>k?new Date(k).toLocaleDateString("zh-CN"):"",Y=k=>{if(!k)return"";const D=new Date,F=new Date(k),W=D.getTime()-F.getTime(),c=Math.floor(W/(1e3*60*60*24));return c===0?"今天":c===1?"昨天":c<7?`${c}天前`:c<30?`${Math.floor(c/7)}周前`:`${Math.floor(c/30)}月前`};return $e(()=>{M()}),(k,D)=>{var V,I,X,K,N,T,te,ae,Q,G,v,de,_,r,u,n,z,J,E,se;const F=m("el-button"),W=m("el-avatar"),c=m("el-tag"),i=m("el-icon"),a=m("el-tab-pane"),s=m("el-tabs");return y(),C("div",Da,[e("div",ka,[e("div",Sa,[t(F,{onClick:O,icon:A(nt)},{default:l(()=>D[1]||(D[1]=[f("返回",-1)])),_:1,__:[1]},8,["icon"]),e("div",Ca,[t(W,{src:(V=h.value)==null?void 0:V.avatar,size:48,icon:A(it)},null,8,["src","icon"]),e("div",Va,[e("h2",null,o((I=h.value)==null?void 0:I.name),1),e("div",Ia,[t(c,{type:ee((X=h.value)==null?void 0:X.level),size:"large"},{default:l(()=>{var P;return[f(o(w((P=h.value)==null?void 0:P.level)),1)]}),_:1},8,["type"]),e("span",Ta,"ID: "+o((K=h.value)==null?void 0:K.id),1)])])])]),e("div",za,[t(F,{onClick:b},{default:l(()=>[t(i,null,{default:l(()=>[t(A(Te))]),_:1}),D[2]||(D[2]=f(" 编辑客户 ",-1))]),_:1,__:[2]}),t(F,{type:"primary",onClick:H},{default:l(()=>[t(i,null,{default:l(()=>[t(A(Ae))]),_:1}),D[3]||(D[3]=f(" 添加设备 ",-1))]),_:1,__:[3]})])]),e("div",Aa,[e("div",Ra,[e("div",Ua,[t(i,null,{default:l(()=>[t(A(Ue))]),_:1})]),e("div",Ma,[e("div",Oa,o(((T=(N=h.value)==null?void 0:N.deviceCount)==null?void 0:T.total)||0),1),D[4]||(D[4]=e("div",{class:"stat-label"},"设备总数",-1)),e("div",xa," 购买"+o(((ae=(te=h.value)==null?void 0:te.deviceCount)==null?void 0:ae.purchased)||0)+" · 租赁"+o(((G=(Q=h.value)==null?void 0:Q.deviceCount)==null?void 0:G.rental)||0),1)])]),e("div",La,[e("div",Fa,[t(i,null,{default:l(()=>[t(A(qe))]),_:1})]),e("div",Na,[e("div",Ea,"¥"+o(((de=(v=h.value)==null?void 0:v.totalSpent)==null?void 0:de.toLocaleString())||0),1),D[5]||(D[5]=e("div",{class:"stat-label"},"总消费金额",-1)),e("div",qa," 客户价值评分: "+o(((r=(_=h.value)==null?void 0:_.customerValue)==null?void 0:r.toFixed(1))||0),1)])]),e("div",Ba,[e("div",ja,[t(i,null,{default:l(()=>[t(A(ge))]),_:1})]),e("div",Ha,[e("div",Ya,o(((n=(u=h.value)==null?void 0:u.orders)==null?void 0:n.length)||0),1),D[6]||(D[6]=e("div",{class:"stat-label"},"订单数量",-1)),e("div",Wa," 服务记录"+o(((J=(z=h.value)==null?void 0:z.serviceRecords)==null?void 0:J.length)||0)+"条 ",1)])]),e("div",Pa,[e("div",Xa,[t(i,null,{default:l(()=>[t(A(ze))]),_:1})]),e("div",Ja,[e("div",Ka,o(Y((E=h.value)==null?void 0:E.lastActiveAt)),1),D[7]||(D[7]=e("div",{class:"stat-label"},"最后活跃",-1)),e("div",Ga," 注册于"+o($((se=h.value)==null?void 0:se.registeredAt)),1)])])]),t(s,{modelValue:S.value,"onUpdate:modelValue":D[0]||(D[0]=P=>S.value=P),type:"border-card",class:"detail-tabs"},{default:l(()=>[t(a,{label:"基本信息",name:"basic"},{default:l(()=>[t(It,{customer:h.value,onUpdate:p},null,8,["customer"])]),_:1}),t(a,{label:"设备管理",name:"devices"},{default:l(()=>{var P;return[t(Js,{"customer-id":L.value,devices:((P=h.value)==null?void 0:P.devices)||[],onRefresh:M},null,8,["customer-id","devices"])]}),_:1}),t(a,{label:"订单历史",name:"orders"},{default:l(()=>{var P;return[t(Gl,{"customer-id":L.value,orders:((P=h.value)==null?void 0:P.orders)||[]},null,8,["customer-id","orders"])]}),_:1}),t(a,{label:"服务记录",name:"service"},{default:l(()=>{var P;return[t(wa,{"customer-id":L.value,records:((P=h.value)==null?void 0:P.serviceRecords)||[],onRefresh:M},null,8,["customer-id","records"])]}),_:1})]),_:1},8,["modelValue"])])}}}),rn=fe(Qa,[["__scopeId","data-v-1265ed9c"]]);export{rn as default};
