var H=(S,_,u)=>new Promise((c,s)=>{var g=n=>{try{r(u.next(n))}catch(d){s(d)}},B=n=>{try{r(u.throw(n))}catch(d){s(d)}},r=n=>n.done?c(n.value):Promise.resolve(n.value).then(g,B);r((u=u.apply(S,_)).next())});import{n as M}from"./element-plus-B_LAMX2W.js";import{x as ee,r as f,c as T,al as h,y,z as l,Q as P,K as v,I as w,H as p,P as C,a6 as te,B as E,M as b,O as z}from"./vue-C2NPAEWw.js";/* empty css                                                                  */import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"data-table"},ne={key:0,class:"table-pagination"},le=ee({__name:"DataTable",props:{data:{default:()=>[]},columns:{default:()=>[]},loading:{type:Boolean,default:!1},showSelection:{type:Boolean,default:!1},showIndex:{type:Boolean,default:!0},showActions:{type:Boolean,default:!0},showEdit:{type:Boolean,default:!0},showDelete:{type:Boolean,default:!0},showPagination:{type:Boolean,default:!0},tableHeight:{},maxHeight:{},stripe:{type:Boolean,default:!0},border:{type:Boolean,default:!0},size:{default:"default"},emptyText:{default:"暂无数据"},actionWidth:{default:150},pageSizes:{default:()=>[10,20,50,100]},paginationLayout:{default:"total, sizes, prev, pager, next, jumper"}},emits:["edit","delete","selection-change","sort-change","row-click","row-dblclick","page-change","size-change"],setup(S,{expose:_,emit:u}){const c=S,s=u,g=f(),B=f([]),r=f(1),n=f(20),d=f(""),x=f(""),I=T(()=>c.columns.filter(e=>e.prop!=="actions")),V=T(()=>c.data.length),L=T(()=>{let e=[...c.data];if(d.value&&x.value&&e.sort((t,o)=>{const m=t[d.value],k=o[d.value];return x.value==="ascending"?m>k?1:-1:m<k?1:-1}),c.showPagination){const t=(r.value-1)*n.value,o=t+n.value;e=e.slice(t,o)}return e}),N=e=>(r.value-1)*n.value+e+1,Y=(e,t)=>{var o;return((o=t==null?void 0:t[e])==null?void 0:o.type)||"info"},F=(e,t)=>{var o;return((o=t==null?void 0:t[e])==null?void 0:o.text)||e},O=(e,t="YYYY-MM-DD HH:mm:ss")=>e?new Date(e).toLocaleString("zh-CN"):"",W=e=>e?e.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,","):"0.00",A=(e,t)=>{s("edit",e,t)},U=(e,t)=>H(null,null,function*(){try{yield M.confirm("确定要删除这条记录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),s("delete",e,t)}catch(o){}}),$=e=>{B.value=e,s("selection-change",e)},j=({column:e,prop:t,order:o})=>{d.value=t,x.value=o,s("sort-change",{column:e,prop:t,order:o})},K=(e,t,o)=>{s("row-click",e,t,o)},Q=(e,t,o)=>{s("row-dblclick",e,t,o)},q=e=>{r.value=e,s("page-change",e)},G=e=>{n.value=e,r.value=1,s("size-change",e)};return _({clearSelection:()=>{var e;return(e=g.value)==null?void 0:e.clearSelection()},toggleRowSelection:(e,t)=>{var o;return(o=g.value)==null?void 0:o.toggleRowSelection(e,t)},setCurrentRow:e=>{var t;return(t=g.value)==null?void 0:t.setCurrentRow(e)}}),(e,t)=>{const o=h("el-table-column"),m=h("el-tag"),k=h("el-image"),R=h("el-button"),J=h("el-table"),X=h("el-pagination");return l(),y("div",oe,[P(J,{ref_key:"tableRef",ref:g,data:L.value,loading:e.loading,height:e.tableHeight,"max-height":e.maxHeight,stripe:e.stripe,border:e.border,size:e.size,"empty-text":e.emptyText,onSelectionChange:$,onSortChange:j,onRowClick:K,onRowDblclick:Q,class:"data-table-main"},{default:w(()=>[e.showSelection?(l(),p(o,{key:0,type:"selection",width:"55",align:"center",fixed:"left"})):v("",!0),e.showIndex?(l(),p(o,{key:1,type:"index",label:"序号",width:"80",align:"center",fixed:"left",index:N})):v("",!0),(l(!0),y(C,null,te(I.value,a=>(l(),p(o,{key:a.prop,prop:a.prop,label:a.label,width:a.width,"min-width":a.minWidth,fixed:a.fixed,sortable:a.sortable,align:a.align||"left","show-overflow-tooltip":a.showOverflowTooltip!==!1},{default:w(({row:i,column:D,$index:Z})=>[E(e.$slots,a.prop,{row:i,column:D,index:Z,value:i[a.prop]},()=>[a.type==="tag"?(l(),p(m,{key:0,type:Y(i[a.prop],a.tagMap),size:e.size},{default:w(()=>[b(z(F(i[a.prop],a.tagMap)),1)]),_:2},1032,["type","size"])):a.type==="image"?(l(),p(k,{key:1,src:i[a.prop],"preview-src-list":[i[a.prop]],fit:"cover",class:"table-image"},null,8,["src","preview-src-list"])):a.type==="date"?(l(),y(C,{key:2},[b(z(O(i[a.prop],a.format)),1)],64)):a.type==="currency"?(l(),y(C,{key:3},[b(" ¥"+z(W(i[a.prop])),1)],64)):(l(),y(C,{key:4},[b(z(i[a.prop]),1)],64))],!0)]),_:2},1032,["prop","label","width","min-width","fixed","sortable","align","show-overflow-tooltip"]))),128)),e.showActions?(l(),p(o,{key:2,label:"操作",width:e.actionWidth,fixed:"right",align:"center"},{default:w(({row:a,$index:i})=>[E(e.$slots,"actions",{row:a,index:i},()=>[e.showEdit?(l(),p(R,{key:0,type:"primary",size:"small",text:"",onClick:D=>A(a,i)},{default:w(()=>t[2]||(t[2]=[b(" 编辑 ",-1)])),_:2,__:[2]},1032,["onClick"])):v("",!0),e.showDelete?(l(),p(R,{key:1,type:"danger",size:"small",text:"",onClick:D=>U(a,i)},{default:w(()=>t[3]||(t[3]=[b(" 删除 ",-1)])),_:2,__:[3]},1032,["onClick"])):v("",!0)],!0)]),_:3},8,["width"])):v("",!0)]),_:3},8,["data","loading","height","max-height","stripe","border","size","empty-text"]),e.showPagination?(l(),y("div",ne,[P(X,{"current-page":r.value,"onUpdate:currentPage":t[0]||(t[0]=a=>r.value=a),"page-size":n.value,"onUpdate:pageSize":t[1]||(t[1]=a=>n.value=a),"page-sizes":e.pageSizes,total:V.value,layout:e.paginationLayout,background:!0,onSizeChange:G,onCurrentChange:q},null,8,["current-page","page-size","page-sizes","total","layout"])])):v("",!0)])}}}),ue=ae(le,[["__scopeId","data-v-605bda15"]]);export{ue as D};
