var Be=Object.defineProperty,je=Object.defineProperties;var He=Object.getOwnPropertyDescriptors;var Me=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable;var Oe=(B,x,b)=>x in B?Be(B,x,{enumerable:!0,configurable:!0,writable:!0,value:b}):B[x]=b,Se=(B,x)=>{for(var b in x||(x={}))Ye.call(x,b)&&Oe(B,b,x[b]);if(Me)for(var b of Me(x))Pe.call(x,b)&&Oe(B,b,x[b]);return B},Ve=(B,x)=>je(B,He(x));var oe=(B,x,b)=>new Promise((L,h)=>{var C=M=>{try{O(b.next(M))}catch(y){h(y)}},U=M=>{try{O(b.throw(M))}catch(y){h(y)}},O=M=>M.done?L(M.value):Promise.resolve(M.value).then(C,U);O((b=b.apply(B,x)).next())});import{x as _e,r as R,al as m,y as S,z as g,A as e,Q as t,I as l,M as _,u as A,K as q,O as o,P as pe,a6 as ve,H as Z,c as ie,D as he,X as xe,h as $e,S as We,ar as Le,J as Fe,V as Xe,aA as Je,az as Ke,n as Ge}from"./vue-C2NPAEWw.js";import{e as Ie,a3 as ze,F as Te,a4 as Qe,c as ge,y as Ze,a5 as et,w as Ne,t as Ee,b as j,q as Ae,r as Re,n as tt,m as Ue,a6 as st,u as lt,A as qe,W as ot,g as at,a7 as nt,a2 as it}from"./element-plus-B_LAMX2W.js";import{C as dt}from"./CustomerFormDialog-C4eKcTzS.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{m as re}from"./order-DgpU5ivT.js";const rt={class:"customer-basic-info"},ut={class:"info-header"},ct={class:"info-content"},mt={class:"info-grid"},pt={class:"info-item"},vt={class:"info-item"},_t={class:"info-item"},ft={class:"info-item"},gt={class:"info-item"},yt={class:"info-item"},bt={class:"info-item"},ht={class:"info-item"},$t={class:"info-item full-width"},wt={key:0,class:"info-item full-width"},Dt={class:"tags-container"},kt={key:1,class:"info-item full-width"},Ct={class:"notes-content"},St=_e({__name:"CustomerBasicInfo",props:{customer:{}},emits:["update"],setup(B,{emit:x}){const b=B,L=x,h=R(!1),C=()=>{h.value=!0},U=()=>{L("update")},O=w=>({regular:"",vip:"warning",premium:"success"})[w||""]||"",M=w=>({regular:"普通客户",vip:"VIP客户",premium:"高级客户"})[w||""]||w||"",y=w=>({active:"success",inactive:"warning",suspended:"danger"})[w||""]||"info",H=w=>({active:"活跃",inactive:"非活跃",suspended:"已暂停"})[w||""]||w||"",p=w=>w?new Date(w).toLocaleString("zh-CN"):"-",ee=()=>{var D;if(!((D=b.customer)!=null&&D.address))return"-";const{province:w,city:$,detail:Y}=b.customer.address,k=[w,$,Y].filter(Boolean);return k.length>0?k.join(" "):"-"};return(w,$)=>{var F,P,c,i,a,s,V,z,X,K,N;const Y=m("el-icon"),k=m("el-button"),D=m("el-tag");return g(),S("div",rt,[e("div",ut,[$[2]||($[2]=e("h4",null,"基本信息",-1)),t(k,{type:"primary",size:"small",onClick:C},{default:l(()=>[t(Y,null,{default:l(()=>[t(A(Ie))]),_:1}),$[1]||($[1]=_(" 编辑信息 ",-1))]),_:1,__:[1]})]),e("div",ct,[e("div",mt,[e("div",pt,[$[3]||($[3]=e("label",null,"客户姓名",-1)),e("span",null,o(((F=w.customer)==null?void 0:F.name)||"-"),1)]),e("div",vt,[$[4]||($[4]=e("label",null,"客户等级",-1)),t(D,{type:O((P=w.customer)==null?void 0:P.level)},{default:l(()=>{var I;return[_(o(M((I=w.customer)==null?void 0:I.level)),1)]}),_:1},8,["type"])]),e("div",_t,[$[5]||($[5]=e("label",null,"联系电话",-1)),e("span",null,o(((c=w.customer)==null?void 0:c.phone)||"-"),1)]),e("div",ft,[$[6]||($[6]=e("label",null,"邮箱地址",-1)),e("span",null,o(((i=w.customer)==null?void 0:i.email)||"-"),1)]),e("div",gt,[$[7]||($[7]=e("label",null,"公司名称",-1)),e("span",null,o(((a=w.customer)==null?void 0:a.company)||"-"),1)]),e("div",yt,[$[8]||($[8]=e("label",null,"客户状态",-1)),t(D,{type:y((s=w.customer)==null?void 0:s.status)},{default:l(()=>{var I;return[_(o(H((I=w.customer)==null?void 0:I.status)),1)]}),_:1},8,["type"])]),e("div",bt,[$[9]||($[9]=e("label",null,"注册时间",-1)),e("span",null,o(p((V=w.customer)==null?void 0:V.registeredAt)),1)]),e("div",ht,[$[10]||($[10]=e("label",null,"最后活跃",-1)),e("span",null,o(p((z=w.customer)==null?void 0:z.lastActiveAt)),1)]),e("div",$t,[$[11]||($[11]=e("label",null,"联系地址",-1)),e("span",null,o(ee()),1)]),(K=(X=w.customer)==null?void 0:X.tags)!=null&&K.length?(g(),S("div",wt,[$[12]||($[12]=e("label",null,"客户标签",-1)),e("div",Dt,[(g(!0),S(pe,null,ve(w.customer.tags,I=>(g(),Z(D,{key:I,size:"small",type:"info",class:"tag-item"},{default:l(()=>[_(o(I),1)]),_:2},1024))),128))])])):q("",!0),(N=w.customer)!=null&&N.notes?(g(),S("div",kt,[$[13]||($[13]=e("label",null,"备注信息",-1)),e("div",Ct,o(w.customer.notes),1)])):q("",!0)])]),t(dt,{modelValue:h.value,"onUpdate:modelValue":$[0]||($[0]=I=>h.value=I),customer:w.customer,onSuccess:U},null,8,["modelValue","customer"])])}}}),Vt=fe(St,[["__scopeId","data-v-f2d16cba"]]),zt={key:0,class:"device-detail"},It={class:"detail-section"},Tt={class:"section-header"},At={class:"device-status"},Rt={class:"online-indicator"},Ut={class:"info-grid"},Mt={class:"info-item"},Ot={class:"serial-number"},xt={class:"info-item"},Lt={class:"info-item"},Ft={class:"info-item"},Nt={class:"info-item"},Et={class:"info-item"},qt={class:"detail-section"},Bt={class:"health-overview"},jt={class:"health-score"},Ht={class:"score-circle"},Yt={class:"score-text"},Pt={class:"health-details"},Wt={class:"health-item"},Xt={key:0,class:"detail-section"},Jt={class:"usage-stats"},Kt={class:"stat-card"},Gt={class:"stat-icon"},Qt={class:"stat-content"},Zt={class:"stat-value"},es={class:"stat-card"},ts={class:"stat-icon"},ss={class:"stat-content"},ls={class:"stat-value"},os={class:"stat-card"},as={class:"stat-icon"},ns={class:"stat-content"},is={class:"stat-value"},ds={class:"stat-card"},rs={class:"stat-icon"},us={class:"stat-content"},cs={class:"stat-value"},ms={class:"detail-section"},ps={class:"device-actions"},vs={class:"detail-section"},_s={class:"device-logs"},fs={class:"log-content"},gs={class:"log-message"},ys={key:0,class:"log-details"},bs={class:"dialog-footer"},hs=_e({__name:"DeviceDetailDialog",props:{modelValue:{type:Boolean},device:{default:null}},emits:["update:modelValue","edit"],setup(B,{emit:x}){const b=B,L=x,h=ie({get:()=>b.modelValue,set:c=>L("update:modelValue",c)}),C=R([{id:"1",timestamp:new Date(Date.now()-1e3*60*30).toISOString(),level:"info",message:"设备正常启动",details:"所有系统组件初始化完成"},{id:"2",timestamp:new Date(Date.now()-1e3*60*60*2).toISOString(),level:"info",message:"用户开始练字课程",details:"课程：楷书基础练习"},{id:"3",timestamp:new Date(Date.now()-1e3*60*60*4).toISOString(),level:"warning",message:"网络连接不稳定",details:"检测到间歇性网络中断"},{id:"4",timestamp:new Date(Date.now()-1e3*60*60*6).toISOString(),level:"info",message:"固件更新完成",details:"版本更新至 v2.1.0"}]),U=()=>{h.value=!1},O=()=>{b.device&&(L("edit",b.device),U())},M=()=>{j.info("远程控制功能开发中...")},y=()=>{j.info("设备重启指令已发送")},H=()=>{j.info("固件更新功能开发中...")},p=()=>{j.info("查看完整日志功能开发中...")},ee=()=>{j.info("维护模式功能开发中...")},w=c=>({pending:"info",active:"success",offline:"warning",maintenance:"primary",retired:"danger"})[c]||"info",$=c=>({pending:"待激活",active:"使用中",offline:"离线",maintenance:"维护中",retired:"已退役"})[c]||c,Y=c=>{if(!c)return"offline";const i=new Date,a=new Date(c),s=(i.getTime()-a.getTime())/(1e3*60);return s<5?"online":s<60?"warning":"offline"},k=c=>c>=80?"#67C23A":c>=60?"#E6A23C":"#F56C6C",D=c=>({info:"primary",warning:"warning",error:"danger",success:"success"})[c]||"primary",F=c=>c?new Date(c).toLocaleString("zh-CN"):"-",P=c=>{if(!c)return"从未在线";const i=new Date,a=new Date(c),s=i.getTime()-a.getTime(),V=Math.floor(s/(1e3*60));if(V<1)return"刚刚在线";if(V<5)return"在线";if(V<60)return`${V}分钟前`;const z=Math.floor(V/60);return z<24?`${z}小时前`:`${Math.floor(z/24)}天前`};return(c,i)=>{const a=m("el-tag"),s=m("el-icon"),V=m("el-progress"),z=m("el-button"),X=m("el-timeline-item"),K=m("el-timeline"),N=m("el-dialog");return g(),Z(N,{modelValue:h.value,"onUpdate:modelValue":i[0]||(i[0]=I=>h.value=I),title:"设备详情",width:"900px","before-close":U,"destroy-on-close":""},{footer:l(()=>[e("div",bs,[t(z,{onClick:U},{default:l(()=>i[26]||(i[26]=[_("关闭",-1)])),_:1,__:[26]}),t(z,{type:"primary",onClick:O},{default:l(()=>i[27]||(i[27]=[_("编辑设备",-1)])),_:1,__:[27]})])]),default:l(()=>[c.device?(g(),S("div",zt,[e("div",It,[e("div",Tt,[i[1]||(i[1]=e("h4",null,"基本信息",-1)),e("div",At,[t(a,{type:w(c.device.status),size:"large"},{default:l(()=>[_(o($(c.device.status)),1)]),_:1},8,["type"]),e("div",Rt,[t(s,{class:he(Y(c.device.lastOnlineAt))},{default:l(()=>[t(A(ze))]),_:1},8,["class"]),e("span",null,o(P(c.device.lastOnlineAt)),1)])])]),e("div",Ut,[e("div",Mt,[i[2]||(i[2]=e("label",null,"设备序列号",-1)),e("span",Ot,o(c.device.serialNumber),1)]),e("div",xt,[i[3]||(i[3]=e("label",null,"设备型号",-1)),e("span",null,o(c.device.model),1)]),e("div",Lt,[i[4]||(i[4]=e("label",null,"设备类型",-1)),t(a,{type:c.device.type==="purchased"?"success":"warning",size:"small"},{default:l(()=>[_(o(c.device.type==="purchased"?"购买":"租赁"),1)]),_:1},8,["type"])]),e("div",Ft,[i[5]||(i[5]=e("label",null,"固件版本",-1)),e("span",null,o(c.device.firmwareVersion),1)]),e("div",Nt,[i[6]||(i[6]=e("label",null,"激活时间",-1)),e("span",null,o(F(c.device.activatedAt)),1)]),e("div",Et,[i[7]||(i[7]=e("label",null,"最后在线",-1)),e("span",null,o(F(c.device.lastOnlineAt)),1)])])]),e("div",qt,[i[13]||(i[13]=e("h4",null,"设备健康状况",-1)),e("div",Bt,[e("div",jt,[e("div",Ht,[t(V,{type:"circle",percentage:c.device.healthScore,color:k(c.device.healthScore),width:120,"stroke-width":8},{default:l(({percentage:I})=>[e("span",Yt,o(I)+"%",1),i[8]||(i[8]=e("span",{class:"score-label"},"健康度",-1))]),_:1},8,["percentage","color"])])]),e("div",Pt,[i[10]||(i[10]=e("div",{class:"health-item"},[e("div",{class:"health-label"},"运行状态"),e("div",{class:"health-value good"},"正常")],-1)),i[11]||(i[11]=e("div",{class:"health-item"},[e("div",{class:"health-label"},"硬件状态"),e("div",{class:"health-value good"},"良好")],-1)),e("div",Wt,[i[9]||(i[9]=e("div",{class:"health-label"},"网络连接",-1)),e("div",{class:he(["health-value",c.device.lastOnlineAt?"good":"warning"])},o(c.device.lastOnlineAt?"正常":"离线"),3)]),i[12]||(i[12]=e("div",{class:"health-item"},[e("div",{class:"health-label"},"存储空间"),e("div",{class:"health-value good"},"充足")],-1))])])]),c.device.usageStats?(g(),S("div",Xt,[i[18]||(i[18]=e("h4",null,"使用统计",-1)),e("div",Jt,[e("div",Kt,[e("div",Gt,[t(s,null,{default:l(()=>[t(A(Te))]),_:1})]),e("div",Qt,[e("div",Zt,o(c.device.usageStats.totalUsageHours)+"h",1),i[14]||(i[14]=e("div",{class:"stat-label"},"总使用时长",-1))])]),e("div",es,[e("div",ts,[t(s,null,{default:l(()=>[t(A(Qe))]),_:1})]),e("div",ss,[e("div",ls,o(c.device.usageStats.dailyAverageUsage)+"h",1),i[15]||(i[15]=e("div",{class:"stat-label"},"日均使用",-1))])]),e("div",os,[e("div",as,[t(s,null,{default:l(()=>[t(A(ge))]),_:1})]),e("div",ns,[e("div",is,o(c.device.usageStats.coursesCompleted),1),i[16]||(i[16]=e("div",{class:"stat-label"},"完成课程",-1))])]),e("div",ds,[e("div",rs,[t(s,null,{default:l(()=>[t(A(Ie))]),_:1})]),e("div",us,[e("div",cs,o(c.device.usageStats.charactersWritten),1),i[17]||(i[17]=e("div",{class:"stat-label"},"练习字数",-1))])])])])):q("",!0),e("div",ms,[i[24]||(i[24]=e("h4",null,"设备操作",-1)),e("div",ps,[t(z,{type:"primary",onClick:M},{default:l(()=>[t(s,null,{default:l(()=>[t(A(Ze))]),_:1}),i[19]||(i[19]=_(" 远程控制 ",-1))]),_:1,__:[19]}),t(z,{onClick:y},{default:l(()=>[t(s,null,{default:l(()=>[t(A(et))]),_:1}),i[20]||(i[20]=_(" 重启设备 ",-1))]),_:1,__:[20]}),t(z,{onClick:H},{default:l(()=>[t(s,null,{default:l(()=>[t(A(Ne))]),_:1}),i[21]||(i[21]=_(" 固件更新 ",-1))]),_:1,__:[21]}),t(z,{onClick:p},{default:l(()=>[t(s,null,{default:l(()=>[t(A(ge))]),_:1}),i[22]||(i[22]=_(" 查看日志 ",-1))]),_:1,__:[22]}),t(z,{type:"warning",onClick:ee},{default:l(()=>[t(s,null,{default:l(()=>[t(A(Ee))]),_:1}),i[23]||(i[23]=_(" 维护模式 ",-1))]),_:1,__:[23]})])]),e("div",vs,[i[25]||(i[25]=e("h4",null,"最近日志",-1)),e("div",_s,[t(K,null,{default:l(()=>[(g(!0),S(pe,null,ve(C.value,I=>(g(),Z(X,{key:I.id,timestamp:F(I.timestamp),type:D(I.level)},{default:l(()=>[e("div",fs,[e("div",gs,o(I.message),1),I.details?(g(),S("div",ys,o(I.details),1)):q("",!0)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})])])])):q("",!0)]),_:1},8,["modelValue"])}}}),$s=fe(hs,[["__scopeId","data-v-29917aa2"]]),ws={class:"customer-device-list"},Ds={class:"device-header"},ks={class:"header-left"},Cs={class:"connection-status"},Ss={class:"status-text"},Vs={class:"header-actions"},zs={class:"device-stats"},Is={class:"stat-item"},Ts={class:"stat-value"},As={class:"stat-item"},Rs={class:"stat-value"},Us={class:"stat-item"},Ms={class:"stat-value"},Os={class:"stat-item"},xs={class:"stat-value"},Ls={class:"device-table"},Fs={class:"online-status"},Ns={class:"health-score"},Es={class:"score-text"},qs={class:"usage-stats"},Bs={class:"stat-line"},js={class:"stat-value"},Hs={class:"stat-line"},Ys={class:"stat-value"},Ps={class:"dialog-footer"},Ws=_e({__name:"CustomerDeviceList",props:{customerId:{},devices:{}},emits:["refresh"],setup(B,{emit:x}){const b=B,L=x,h=R(!1),C=R([]),U=R(!1),O=R(!1),M=R();let y=null;const H=R(!1),p=xe({serialNumber:"",model:"",type:"purchased",status:"pending",activatedAt:"",notes:""}),ee={serialNumber:[{required:!0,message:"请输入设备序列号",trigger:"blur"},{min:5,max:50,message:"设备序列号长度在5-50个字符",trigger:"blur"}],model:[{required:!0,message:"请选择设备型号",trigger:"change"}],type:[{required:!0,message:"请选择设备类型",trigger:"change"}],status:[{required:!0,message:"请选择设备状态",trigger:"change"}]},w=ie(()=>{const f={total:C.value.length,purchased:0,rental:0,active:0};return C.value.forEach(r=>{r.type==="purchased"&&f.purchased++,r.type==="rental"&&f.rental++,r.status==="active"&&f.active++}),f}),$=()=>oe(null,null,function*(){h.value=!0;try{const f=yield re.getCustomerDevices(b.customerId);C.value=f.data}catch(f){console.error("加载设备列表失败:",f),j.error("加载设备列表失败")}finally{h.value=!1}}),Y=()=>{$(),L("refresh")},k=()=>{Object.assign(p,{serialNumber:"",model:"",type:"purchased",status:"pending",activatedAt:"",notes:""}),U.value=!0},D=()=>oe(null,null,function*(){if(M.value)try{yield M.value.validate(),O.value=!0;const f={customerId:b.customerId,serialNumber:p.serialNumber,model:p.model,type:p.type,status:p.status,activatedAt:p.activatedAt||void 0,notes:p.notes};yield re.addCustomerDevice(f),j.success("设备添加成功"),U.value=!1,Y()}catch(f){console.error("添加设备失败:",f),j.error("添加设备失败")}finally{O.value=!1}}),F=R(!1),P=R(null),c=f=>{P.value=f,F.value=!0},i=f=>{j.info("编辑设备功能开发中...")},a=f=>{i()},s=f=>oe(null,null,function*(){try{yield tt.confirm(`确定要移除设备 "${f.serialNumber}" 吗？`,"确认移除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),yield re.removeCustomerDevice(b.customerId,f.id),j.success("设备移除成功"),Y()}catch(r){r!=="cancel"&&(console.error("移除设备失败:",r),j.error("移除设备失败"))}}),V=f=>({pending:"info",active:"success",offline:"warning",maintenance:"primary",retired:"danger"})[f]||"info",z=f=>({pending:"待激活",active:"使用中",offline:"离线",maintenance:"维护中",retired:"已退役"})[f]||f,X=f=>{if(!f)return"offline";const r=new Date,u=new Date(f),n=(r.getTime()-u.getTime())/(1e3*60);return n<5?"online":n<60?"warning":"offline"},K=f=>f>=80?"#67C23A":f>=60?"#E6A23C":"#F56C6C",N=f=>f?new Date(f).toLocaleString("zh-CN"):"-",I=f=>{if(!f)return"从未在线";const r=new Date,u=new Date(f),n=r.getTime()-u.getTime(),T=Math.floor(n/(1e3*60));if(T<1)return"刚刚在线";if(T<5)return"在线";if(T<60)return`${T}分钟前`;const J=Math.floor(T/60);return J<24?`${J}小时前`:`${Math.floor(J/24)}天前`},te=()=>{try{const f=`ws://localhost:8080/ws/devices/${b.customerId}`;y=new WebSocket(f),y.onopen=()=>{console.log("设备状态WebSocket连接已建立"),H.value=!0},y.onmessage=r=>{try{const u=JSON.parse(r.data);ae(u)}catch(u){console.error("解析WebSocket消息失败:",u)}},y.onclose=()=>{console.log("设备状态WebSocket连接已关闭"),H.value=!1,setTimeout(()=>{(!y||y.readyState===WebSocket.CLOSED)&&te()},5e3)},y.onerror=r=>{console.error("WebSocket连接错误:",r),H.value=!1}}catch(f){console.error("初始化WebSocket失败:",f),G()}},ae=f=>{const{deviceId:r,status:u,lastOnlineAt:n,healthScore:T,usageStats:J}=f,E=C.value.findIndex(se=>se.id===r);E!==-1&&(C.value[E]=Ve(Se({},C.value[E]),{status:u,lastOnlineAt:n,healthScore:T||C.value[E].healthScore,usageStats:J||C.value[E].usageStats}),console.log(`设备 ${r} 状态已更新:`,u))};let Q=null;const G=()=>{Q||(Q=setInterval(()=>oe(null,null,function*(){try{C.value.forEach((f,r)=>{if(Math.random()>.8){const u=new Date().toISOString();C.value[r]=Ve(Se({},f),{lastOnlineAt:u,healthScore:Math.max(60,Math.min(100,f.healthScore+(Math.random()-.5)*10))})}})}catch(f){console.error("轮询设备状态失败:",f)}}),3e4))},v=()=>{Q&&(clearInterval(Q),Q=null)},de=()=>{y&&(y.close(),y=null),H.value=!1,v()};return $e(()=>{C.value=b.devices,te()}),We(()=>{de()}),(f,r)=>{const u=m("el-icon"),n=m("el-button"),T=m("el-table-column"),J=m("el-tag"),E=m("el-progress"),se=m("el-table"),W=m("el-input"),ue=m("el-form-item"),ne=m("el-option"),be=m("el-select"),le=m("el-radio"),ye=m("el-radio-group"),we=m("el-date-picker"),De=m("el-form"),ke=m("el-dialog"),Ce=Le("loading");return g(),S("div",ws,[e("div",Ds,[e("div",ks,[r[9]||(r[9]=e("h4",null,"设备管理",-1)),e("div",Cs,[t(u,{class:he(H.value?"connected":"disconnected")},{default:l(()=>[t(A(ze))]),_:1},8,["class"]),e("span",Ss,o(H.value?"实时监控中":"离线模式"),1)])]),e("div",Vs,[t(n,{type:"primary",size:"small",onClick:k},{default:l(()=>[t(u,null,{default:l(()=>[t(A(Ae))]),_:1}),r[10]||(r[10]=_(" 添加设备 ",-1))]),_:1,__:[10]}),t(n,{size:"small",onClick:Y},{default:l(()=>[t(u,null,{default:l(()=>[t(A(Re))]),_:1}),r[11]||(r[11]=_(" 刷新 ",-1))]),_:1,__:[11]})])]),e("div",zs,[e("div",Is,[e("div",Ts,o(w.value.total),1),r[12]||(r[12]=e("div",{class:"stat-label"},"设备总数",-1))]),e("div",As,[e("div",Rs,o(w.value.purchased),1),r[13]||(r[13]=e("div",{class:"stat-label"},"购买设备",-1))]),e("div",Us,[e("div",Ms,o(w.value.rental),1),r[14]||(r[14]=e("div",{class:"stat-label"},"租赁设备",-1))]),e("div",Os,[e("div",xs,o(w.value.active),1),r[15]||(r[15]=e("div",{class:"stat-label"},"在线设备",-1))])]),e("div",Ls,[Fe((g(),Z(se,{data:C.value,stripe:""},{default:l(()=>[t(T,{prop:"serialNumber",label:"设备序列号",width:"150"}),t(T,{prop:"model",label:"设备型号",width:"120"}),t(T,{prop:"type",label:"设备类型",width:"100"},{default:l(({row:d})=>[t(J,{type:d.type==="purchased"?"success":"warning",size:"small"},{default:l(()=>[_(o(d.type==="purchased"?"购买":"租赁"),1)]),_:2},1032,["type"])]),_:1}),t(T,{prop:"status",label:"设备状态",width:"100"},{default:l(({row:d})=>[t(J,{type:V(d.status),size:"small"},{default:l(()=>[_(o(z(d.status)),1)]),_:2},1032,["type"])]),_:1}),t(T,{prop:"activatedAt",label:"激活时间",width:"150"},{default:l(({row:d})=>[_(o(N(d.activatedAt)),1)]),_:1}),t(T,{prop:"lastOnlineAt",label:"最后在线",width:"150"},{default:l(({row:d})=>[e("div",Fs,[t(u,{class:he([X(d.lastOnlineAt),"status-icon"])},{default:l(()=>[t(A(ze))]),_:2},1032,["class"]),_(" "+o(I(d.lastOnlineAt)),1)])]),_:1}),t(T,{prop:"firmwareVersion",label:"固件版本",width:"100"}),t(T,{prop:"healthScore",label:"健康度",width:"100"},{default:l(({row:d})=>[e("div",Ns,[t(E,{percentage:d.healthScore,color:K(d.healthScore),"stroke-width":6,"show-text":!1},null,8,["percentage","color"]),e("span",Es,o(d.healthScore)+"%",1)])]),_:1}),t(T,{label:"使用统计",width:"150"},{default:l(({row:d})=>{var ce,me;return[e("div",qs,[e("div",Bs,[r[16]||(r[16]=e("span",{class:"stat-label"},"使用时长:",-1)),e("span",js,o(((ce=d.usageStats)==null?void 0:ce.totalUsageHours)||0)+"h",1)]),e("div",Hs,[r[17]||(r[17]=e("span",{class:"stat-label"},"完成课程:",-1)),e("span",Ys,o(((me=d.usageStats)==null?void 0:me.coursesCompleted)||0),1)])])]}),_:1}),t(T,{label:"操作",width:"150",fixed:"right"},{default:l(({row:d})=>[t(n,{text:"",type:"primary",size:"small",onClick:ce=>c(d)},{default:l(()=>r[18]||(r[18]=[_(" 详情 ",-1)])),_:2,__:[18]},1032,["onClick"]),t(n,{text:"",type:"primary",size:"small",onClick:ce=>i(d)},{default:l(()=>r[19]||(r[19]=[_(" 编辑 ",-1)])),_:2,__:[19]},1032,["onClick"]),t(n,{text:"",type:"danger",size:"small",onClick:ce=>s(d)},{default:l(()=>r[20]||(r[20]=[_(" 移除 ",-1)])),_:2,__:[20]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Ce,h.value]])]),t(ke,{modelValue:U.value,"onUpdate:modelValue":r[7]||(r[7]=d=>U.value=d),title:"添加设备",width:"600px"},{footer:l(()=>[e("div",Ps,[t(n,{onClick:r[6]||(r[6]=d=>U.value=!1)},{default:l(()=>r[23]||(r[23]=[_("取消",-1)])),_:1,__:[23]}),t(n,{type:"primary",onClick:D,loading:O.value},{default:l(()=>r[24]||(r[24]=[_(" 添加 ",-1)])),_:1,__:[24]},8,["loading"])])]),default:l(()=>[t(De,{ref_key:"deviceFormRef",ref:M,model:p,rules:ee,"label-width":"100px"},{default:l(()=>[t(ue,{label:"设备序列号",prop:"serialNumber"},{default:l(()=>[t(W,{modelValue:p.serialNumber,"onUpdate:modelValue":r[0]||(r[0]=d=>p.serialNumber=d),placeholder:"请输入设备序列号",maxlength:"50"},null,8,["modelValue"])]),_:1}),t(ue,{label:"设备型号",prop:"model"},{default:l(()=>[t(be,{modelValue:p.model,"onUpdate:modelValue":r[1]||(r[1]=d=>p.model=d),placeholder:"请选择设备型号"},{default:l(()=>[t(ne,{label:"YX-Robot-V1",value:"YX-Robot-V1"}),t(ne,{label:"YX-Robot-V2",value:"YX-Robot-V2"}),t(ne,{label:"YX-Robot-Pro",value:"YX-Robot-Pro"})]),_:1},8,["modelValue"])]),_:1}),t(ue,{label:"设备类型",prop:"type"},{default:l(()=>[t(ye,{modelValue:p.type,"onUpdate:modelValue":r[2]||(r[2]=d=>p.type=d)},{default:l(()=>[t(le,{value:"purchased"},{default:l(()=>r[21]||(r[21]=[_("购买",-1)])),_:1,__:[21]}),t(le,{value:"rental"},{default:l(()=>r[22]||(r[22]=[_("租赁",-1)])),_:1,__:[22]})]),_:1},8,["modelValue"])]),_:1}),t(ue,{label:"设备状态",prop:"status"},{default:l(()=>[t(be,{modelValue:p.status,"onUpdate:modelValue":r[3]||(r[3]=d=>p.status=d),placeholder:"请选择设备状态"},{default:l(()=>[t(ne,{label:"待激活",value:"pending"}),t(ne,{label:"使用中",value:"active"}),t(ne,{label:"离线",value:"offline"}),t(ne,{label:"维护中",value:"maintenance"}),t(ne,{label:"已退役",value:"retired"})]),_:1},8,["modelValue"])]),_:1}),p.status!=="pending"?(g(),Z(ue,{key:0,label:"激活时间",prop:"activatedAt"},{default:l(()=>[t(we,{modelValue:p.activatedAt,"onUpdate:modelValue":r[4]||(r[4]=d=>p.activatedAt=d),type:"datetime",placeholder:"选择激活时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})):q("",!0),t(ue,{label:"备注",prop:"notes"},{default:l(()=>[t(W,{modelValue:p.notes,"onUpdate:modelValue":r[5]||(r[5]=d=>p.notes=d),type:"textarea",rows:3,placeholder:"请输入备注信息",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t($s,{modelValue:F.value,"onUpdate:modelValue":r[8]||(r[8]=d=>F.value=d),device:P.value,onEdit:a},null,8,["modelValue","device"])])}}}),Xs=fe(Ws,[["__scopeId","data-v-ac580635"]]),Js={class:"customer-order-history"},Ks={class:"order-header"},Gs={class:"header-actions"},Qs={class:"order-stats"},Zs={class:"stat-item"},el={class:"stat-value"},tl={class:"stat-item"},sl={class:"stat-value"},ll={class:"stat-item"},ol={class:"stat-value"},al={class:"stat-item"},nl={class:"stat-value"},il={class:"order-table"},dl={class:"product-info"},rl={class:"product-name"},ul={class:"product-details"},cl={class:"quantity"},ml={class:"model"},pl={class:"amount-display"},vl={class:"amount"},_l={key:0,class:"unit-price"},fl={key:0,class:"rental-info"},gl={class:"rental-period"},yl={class:"value"},bl={class:"rental-dates"},hl={class:"date-item"},$l={class:"value"},wl={class:"date-item"},Dl={class:"value"},kl={key:1,class:"not-applicable"},Cl={key:0,class:"pagination-wrapper"},Sl={key:0,class:"order-detail"},Vl={class:"detail-section"},zl={class:"detail-grid"},Il={class:"detail-item"},Tl={class:"detail-item"},Al={class:"detail-item"},Rl={class:"detail-item"},Ul={class:"detail-section"},Ml={class:"detail-grid"},Ol={class:"detail-item"},xl={class:"detail-item"},Ll={class:"detail-item"},Fl={class:"detail-item"},Nl={class:"detail-item"},El={class:"amount-highlight"},ql={key:0,class:"detail-section"},Bl={class:"detail-grid"},jl={class:"detail-item"},Hl={class:"detail-item"},Yl={class:"detail-item"},Pl={class:"detail-item"},Wl={key:1,class:"detail-section"},Xl={class:"notes-content"},Jl=_e({__name:"CustomerOrderHistory",props:{customerId:{},orders:{}},setup(B){const x=B,b=R(!1),L=R([]),h=R(""),C=R(""),U=R(1),O=R(10),M=R(!1),y=R(null),H=ie(()=>{let a=L.value;h.value&&(a=a.filter(z=>z.type===h.value)),C.value&&(a=a.filter(z=>z.status===C.value));const s=(U.value-1)*O.value,V=s+O.value;return a.slice(s,V)}),p=ie(()=>{const a={total:L.value.length,totalAmount:0,completed:0,processing:0};return L.value.forEach(s=>{a.totalAmount+=s.amount,s.status==="completed"&&a.completed++,s.status==="processing"&&a.processing++}),a}),ee=ie(()=>L.value.some(a=>a.type==="rental")),w=()=>oe(null,null,function*(){b.value=!0;try{const a=yield re.getCustomerOrders(x.customerId);L.value=a.data}catch(a){console.error("加载订单历史失败:",a),j.error("加载订单历史失败")}finally{b.value=!1}}),$=()=>{w()},Y=()=>{U.value=1},k=a=>{O.value=a,U.value=1},D=a=>{U.value=a},F=a=>{y.value=a,M.value=!0},P=a=>({pending:"warning",processing:"primary",completed:"success",cancelled:"danger"})[a]||"info",c=a=>({pending:"待处理",processing:"进行中",completed:"已完成",cancelled:"已取消"})[a]||a,i=a=>a?new Date(a).toLocaleString("zh-CN"):"-";return $e(()=>{L.value=x.orders}),(a,s)=>{const V=m("el-option"),z=m("el-select"),X=m("el-icon"),K=m("el-button"),N=m("el-table-column"),I=m("el-tag"),te=m("el-table"),ae=m("el-pagination"),Q=m("el-dialog"),G=Le("loading");return g(),S("div",Js,[e("div",Ks,[s[6]||(s[6]=e("h4",null,"订单历史",-1)),e("div",Gs,[t(z,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=v=>h.value=v),placeholder:"订单类型",size:"small",onChange:Y},{default:l(()=>[t(V,{label:"全部订单",value:""}),t(V,{label:"销售订单",value:"sales"}),t(V,{label:"租赁订单",value:"rental"})]),_:1},8,["modelValue"]),t(z,{modelValue:C.value,"onUpdate:modelValue":s[1]||(s[1]=v=>C.value=v),placeholder:"订单状态",size:"small",onChange:Y},{default:l(()=>[t(V,{label:"全部状态",value:""}),t(V,{label:"待处理",value:"pending"}),t(V,{label:"进行中",value:"processing"}),t(V,{label:"已完成",value:"completed"}),t(V,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"]),t(K,{size:"small",onClick:$},{default:l(()=>[t(X,null,{default:l(()=>[t(A(Re))]),_:1}),s[5]||(s[5]=_(" 刷新 ",-1))]),_:1,__:[5]})])]),e("div",Qs,[e("div",Zs,[e("div",el,o(p.value.total),1),s[7]||(s[7]=e("div",{class:"stat-label"},"订单总数",-1))]),e("div",tl,[e("div",sl,"¥"+o(p.value.totalAmount.toLocaleString()),1),s[8]||(s[8]=e("div",{class:"stat-label"},"订单总额",-1))]),e("div",ll,[e("div",ol,o(p.value.completed),1),s[9]||(s[9]=e("div",{class:"stat-label"},"已完成",-1))]),e("div",al,[e("div",nl,o(p.value.processing),1),s[10]||(s[10]=e("div",{class:"stat-label"},"进行中",-1))])]),e("div",il,[Fe((g(),Z(te,{data:H.value,stripe:""},{default:l(()=>[t(N,{prop:"orderNumber",label:"订单号",width:"150"}),t(N,{prop:"type",label:"订单类型",width:"100"},{default:l(({row:v})=>[t(I,{type:v.type==="sales"?"success":"primary",size:"small"},{default:l(()=>[_(o(v.type==="sales"?"销售":"租赁"),1)]),_:2},1032,["type"])]),_:1}),t(N,{label:"产品信息",width:"200"},{default:l(({row:v})=>[e("div",dl,[e("div",rl,o(v.productName),1),e("div",ul,[e("span",cl,"数量: "+o(v.quantity),1),e("span",ml,"型号: "+o(v.productModel),1)])])]),_:1}),t(N,{prop:"amount",label:"订单金额",width:"120"},{default:l(({row:v})=>[e("div",pl,[e("span",vl,"¥"+o(v.amount.toLocaleString()),1),v.quantity>1?(g(),S("span",_l," (¥"+o((v.amount/v.quantity).toFixed(2))+"/台) ",1)):q("",!0)])]),_:1}),t(N,{prop:"status",label:"订单状态",width:"100"},{default:l(({row:v})=>[t(I,{type:P(v.status),size:"small"},{default:l(()=>[_(o(c(v.status)),1)]),_:2},1032,["type"])]),_:1}),t(N,{prop:"createdAt",label:"下单时间",width:"150"},{default:l(({row:v})=>[_(o(i(v.createdAt)),1)]),_:1}),ee.value?(g(),Z(N,{key:0,label:"租赁信息",width:"180"},{default:l(({row:v})=>[v.type==="rental"?(g(),S("div",fl,[e("div",gl,[s[11]||(s[11]=e("span",{class:"label"},"租期:",-1)),e("span",yl,o(v.rentalDays)+"天",1)]),e("div",bl,[e("div",hl,[s[12]||(s[12]=e("span",{class:"label"},"开始:",-1)),e("span",$l,o(i(v.rentalStartDate)),1)]),e("div",wl,[s[13]||(s[13]=e("span",{class:"label"},"结束:",-1)),e("span",Dl,o(i(v.rentalEndDate)),1)])])])):(g(),S("span",kl,"-"))]),_:1})):q("",!0),t(N,{label:"操作",width:"120",fixed:"right"},{default:l(({row:v})=>[t(K,{text:"",type:"primary",size:"small",onClick:de=>F(v)},{default:l(()=>s[14]||(s[14]=[_(" 查看详情 ",-1)])),_:2,__:[14]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[G,b.value]]),L.value.length>O.value?(g(),S("div",Cl,[t(ae,{"current-page":U.value,"onUpdate:currentPage":s[2]||(s[2]=v=>U.value=v),"page-size":O.value,"onUpdate:pageSize":s[3]||(s[3]=v=>O.value=v),"page-sizes":[10,20,50],total:L.value.length,layout:"total, sizes, prev, pager, next",onSizeChange:k,onCurrentChange:D},null,8,["current-page","page-size","total"])])):q("",!0)]),t(Q,{modelValue:M.value,"onUpdate:modelValue":s[4]||(s[4]=v=>M.value=v),title:"订单详情",width:"700px"},{default:l(()=>[y.value?(g(),S("div",Sl,[e("div",Vl,[s[19]||(s[19]=e("h5",null,"基本信息",-1)),e("div",zl,[e("div",Il,[s[15]||(s[15]=e("label",null,"订单号:",-1)),e("span",null,o(y.value.orderNumber),1)]),e("div",Tl,[s[16]||(s[16]=e("label",null,"订单类型:",-1)),t(I,{type:y.value.type==="sales"?"success":"primary",size:"small"},{default:l(()=>[_(o(y.value.type==="sales"?"销售订单":"租赁订单"),1)]),_:1},8,["type"])]),e("div",Al,[s[17]||(s[17]=e("label",null,"订单状态:",-1)),t(I,{type:P(y.value.status),size:"small"},{default:l(()=>[_(o(c(y.value.status)),1)]),_:1},8,["type"])]),e("div",Rl,[s[18]||(s[18]=e("label",null,"下单时间:",-1)),e("span",null,o(i(y.value.createdAt)),1)])])]),e("div",Ul,[s[25]||(s[25]=e("h5",null,"产品信息",-1)),e("div",Ml,[e("div",Ol,[s[20]||(s[20]=e("label",null,"产品名称:",-1)),e("span",null,o(y.value.productName),1)]),e("div",xl,[s[21]||(s[21]=e("label",null,"产品型号:",-1)),e("span",null,o(y.value.productModel),1)]),e("div",Ll,[s[22]||(s[22]=e("label",null,"购买数量:",-1)),e("span",null,o(y.value.quantity)+"台",1)]),e("div",Fl,[s[23]||(s[23]=e("label",null,"单价:",-1)),e("span",null,"¥"+o((y.value.amount/y.value.quantity).toFixed(2)),1)]),e("div",Nl,[s[24]||(s[24]=e("label",null,"订单总额:",-1)),e("span",El,"¥"+o(y.value.amount.toLocaleString()),1)])])]),y.value.type==="rental"?(g(),S("div",ql,[s[30]||(s[30]=e("h5",null,"租赁信息",-1)),e("div",Bl,[e("div",jl,[s[26]||(s[26]=e("label",null,"租赁天数:",-1)),e("span",null,o(y.value.rentalDays)+"天",1)]),e("div",Hl,[s[27]||(s[27]=e("label",null,"日租金:",-1)),e("span",null,"¥"+o((y.value.amount/y.value.rentalDays).toFixed(2))+"/天",1)]),e("div",Yl,[s[28]||(s[28]=e("label",null,"开始日期:",-1)),e("span",null,o(i(y.value.rentalStartDate)),1)]),e("div",Pl,[s[29]||(s[29]=e("label",null,"结束日期:",-1)),e("span",null,o(i(y.value.rentalEndDate)),1)])])])):q("",!0),y.value.notes?(g(),S("div",Wl,[s[31]||(s[31]=e("h5",null,"备注信息",-1)),e("div",Xl,o(y.value.notes),1)])):q("",!0)])):q("",!0)]),_:1},8,["modelValue"])])}}}),Kl=fe(Jl,[["__scopeId","data-v-90a6789b"]]),Gl={key:0,class:"service-record-detail"},Ql={class:"detail-section"},Zl={class:"section-header"},eo={class:"record-status"},to={class:"info-grid"},so={class:"info-item"},lo={class:"service-subject"},oo={class:"info-item"},ao={class:"info-item"},no={class:"info-item"},io={class:"cost-amount"},ro={class:"info-item"},uo={class:"info-item"},co={class:"detail-section"},mo={class:"service-description"},po={key:0,class:"detail-section"},vo={class:"device-info"},_o={class:"device-card"},fo={class:"device-icon"},go={class:"device-details"},yo={class:"device-id"},bo={class:"device-status"},ho={class:"detail-section"},$o={class:"service-progress"},wo={key:1,class:"detail-section"},Do={class:"attachments-list"},ko=["onClick"],Co={class:"attachment-icon"},So={class:"attachment-info"},Vo={class:"attachment-name"},zo={class:"attachment-size"},Io={class:"attachment-actions"},To={class:"detail-section"},Ao={class:"service-timeline"},Ro={class:"timeline-content"},Uo={class:"event-title"},Mo={key:0,class:"event-description"},Oo={key:1,class:"event-operator"},xo={key:2,class:"detail-section"},Lo={class:"customer-feedback"},Fo={class:"feedback-rating"},No={class:"feedback-comment"},Eo={class:"comment-text"},qo={class:"feedback-time"},Bo={class:"dialog-footer"},jo=_e({__name:"ServiceRecordDetailDialog",props:{modelValue:{type:Boolean},record:{default:null}},emits:["update:modelValue","edit","complete"],setup(B,{emit:x}){var c,i;const b=B,L=x,h=ie({get:()=>b.modelValue,set:a=>L("update:modelValue",a)}),C=R([{id:"1",type:"created",title:"服务记录创建",description:"客户提交服务请求",operator:"系统",timestamp:((c=b.record)==null?void 0:c.createdAt)||new Date().toISOString()},{id:"2",type:"assigned",title:"分配服务人员",description:"服务已分配给相关技术人员",operator:"客服主管",timestamp:new Date(Date.now()-1e3*60*60*2).toISOString()},{id:"3",type:"processing",title:"开始处理",description:"技术人员开始处理服务请求",operator:((i=b.record)==null?void 0:i.serviceStaff)||"技术人员",timestamp:new Date(Date.now()-1e3*60*60).toISOString()}]),U=R({rating:5,comment:"服务很及时，技术人员很专业，问题得到了很好的解决。",createdAt:new Date().toISOString()}),O=()=>{h.value=!1},M=()=>{b.record&&(L("edit",b.record),O())},y=()=>{b.record&&(L("complete",b.record),O())},H=a=>{window.open(a.url,"_blank")},p=a=>{const s=document.createElement("a");s.href=a.url,s.download=a.name,document.body.appendChild(s),s.click(),document.body.removeChild(s),j.success("文件下载已开始")},ee=a=>({in_progress:"primary",completed:"success",cancelled:"danger"})[a]||"info",w=a=>({in_progress:"进行中",completed:"已完成",cancelled:"已取消"})[a]||a,$=a=>({maintenance:"warning",upgrade:"success",consultation:"primary",complaint:"danger"})[a]||"info",Y=a=>({maintenance:"维修记录",upgrade:"升级记录",consultation:"咨询记录",complaint:"投诉处理"})[a]||a,k=a=>({in_progress:1,completed:2,cancelled:0})[a]||0,D=a=>({created:"primary",assigned:"info",processing:"warning",completed:"success",cancelled:"danger"})[a]||"primary",F=a=>a?new Date(a).toLocaleString("zh-CN"):"-",P=a=>{if(a===0)return"0 B";const s=1024,V=["B","KB","MB","GB"],z=Math.floor(Math.log(a)/Math.log(s));return parseFloat((a/Math.pow(s,z)).toFixed(2))+" "+V[z]};return(a,s)=>{const V=m("el-tag"),z=m("el-icon"),X=m("el-step"),K=m("el-steps"),N=m("el-button"),I=m("el-timeline-item"),te=m("el-timeline"),ae=m("el-rate"),Q=m("el-dialog");return g(),Z(Q,{modelValue:h.value,"onUpdate:modelValue":s[1]||(s[1]=G=>h.value=G),title:"服务记录详情",width:"800px","before-close":O,"destroy-on-close":""},{footer:l(()=>{var G,v;return[e("div",Bo,[t(N,{onClick:O},{default:l(()=>s[19]||(s[19]=[_("关闭",-1)])),_:1,__:[19]}),((G=a.record)==null?void 0:G.status)!=="completed"?(g(),Z(N,{key:0,type:"primary",onClick:M},{default:l(()=>s[20]||(s[20]=[_(" 编辑记录 ",-1)])),_:1,__:[20]})):q("",!0),((v=a.record)==null?void 0:v.status)==="in_progress"?(g(),Z(N,{key:1,type:"success",onClick:y},{default:l(()=>s[21]||(s[21]=[_(" 标记完成 ",-1)])),_:1,__:[21]})):q("",!0)])]}),default:l(()=>{var G;return[a.record?(g(),S("div",Gl,[e("div",Ql,[e("div",Zl,[s[2]||(s[2]=e("h4",null,"基本信息",-1)),e("div",eo,[t(V,{type:ee(a.record.status),size:"large"},{default:l(()=>[_(o(w(a.record.status)),1)]),_:1},8,["type"]),t(V,{type:$(a.record.type),size:"large"},{default:l(()=>[_(o(Y(a.record.type)),1)]),_:1},8,["type"])])]),e("div",to,[e("div",so,[s[3]||(s[3]=e("label",null,"服务主题",-1)),e("span",lo,o(a.record.subject),1)]),e("div",oo,[s[4]||(s[4]=e("label",null,"服务类型",-1)),e("span",null,o(Y(a.record.type)),1)]),e("div",ao,[s[5]||(s[5]=e("label",null,"服务人员",-1)),e("span",null,o(a.record.serviceStaff),1)]),e("div",no,[s[6]||(s[6]=e("label",null,"服务费用",-1)),e("span",io,o(a.record.cost?`¥${a.record.cost.toLocaleString()}`:"免费"),1)]),e("div",ro,[s[7]||(s[7]=e("label",null,"创建时间",-1)),e("span",null,o(F(a.record.createdAt)),1)]),e("div",uo,[s[8]||(s[8]=e("label",null,"更新时间",-1)),e("span",null,o(F(a.record.updatedAt)),1)])])]),e("div",co,[s[9]||(s[9]=e("h4",null,"服务描述",-1)),e("div",mo,o(a.record.description),1)]),a.record.deviceId?(g(),S("div",po,[s[11]||(s[11]=e("h4",null,"相关设备",-1)),e("div",vo,[e("div",_o,[e("div",fo,[t(z,null,{default:l(()=>[t(A(Ue))]),_:1})]),e("div",go,[e("div",yo,"设备ID: "+o(a.record.deviceId),1),e("div",bo,[t(V,{type:"success",size:"small"},{default:l(()=>s[10]||(s[10]=[_("正常运行",-1)])),_:1,__:[10]})])])])])])):q("",!0),e("div",ho,[s[12]||(s[12]=e("h4",null,"服务进度",-1)),e("div",$o,[t(K,{active:k(a.record.status),"finish-status":"success"},{default:l(()=>[t(X,{title:"服务创建",description:"记录服务需求"}),t(X,{title:"处理中",description:"正在处理服务"}),t(X,{title:"服务完成",description:"服务已完成"})]),_:1},8,["active"])])]),(G=a.record.attachments)!=null&&G.length?(g(),S("div",wo,[s[14]||(s[14]=e("h4",null,"相关附件",-1)),e("div",Do,[(g(!0),S(pe,null,ve(a.record.attachments,v=>(g(),S("div",{key:v.id,class:"attachment-item",onClick:de=>H(v)},[e("div",Co,[t(z,null,{default:l(()=>[t(A(ge))]),_:1})]),e("div",So,[e("div",Vo,o(v.name),1),e("div",zo,o(P(v.size)),1)]),e("div",Io,[t(N,{text:"",type:"primary",size:"small",onClick:Xe(de=>p(v),["stop"])},{default:l(()=>[t(z,null,{default:l(()=>[t(A(st))]),_:1}),s[13]||(s[13]=_(" 下载 ",-1))]),_:2,__:[13]},1032,["onClick"])])],8,ko))),128))])])):q("",!0),e("div",To,[s[15]||(s[15]=e("h4",null,"服务时间线",-1)),e("div",Ao,[t(te,null,{default:l(()=>[(g(!0),S(pe,null,ve(C.value,v=>(g(),Z(I,{key:v.id,timestamp:F(v.timestamp),type:D(v.type)},{default:l(()=>[e("div",Ro,[e("div",Uo,o(v.title),1),v.description?(g(),S("div",Mo,o(v.description),1)):q("",!0),v.operator?(g(),S("div",Oo,"操作人: "+o(v.operator),1)):q("",!0)])]),_:2},1032,["timestamp","type"]))),128))]),_:1})])]),U.value?(g(),S("div",xo,[s[18]||(s[18]=e("h4",null,"客户反馈",-1)),e("div",Lo,[e("div",Fo,[s[16]||(s[16]=e("span",{class:"rating-label"},"满意度评分:",-1)),t(ae,{modelValue:U.value.rating,"onUpdate:modelValue":s[0]||(s[0]=v=>U.value.rating=v),disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue"])]),e("div",No,[s[17]||(s[17]=e("span",{class:"comment-label"},"客户评价:",-1)),e("div",Eo,o(U.value.comment),1)]),e("div",qo," 反馈时间: "+o(F(U.value.createdAt)),1)])])):q("",!0)])):q("",!0)]}),_:1},8,["modelValue"])}}}),Ho=fe(jo,[["__scopeId","data-v-149c2268"]]),Yo={class:"customer-service-records"},Po={class:"service-header"},Wo={class:"header-actions"},Xo={class:"service-stats"},Jo={class:"stat-item"},Ko={class:"stat-value"},Go={class:"stat-item"},Qo={class:"stat-value"},Zo={class:"stat-item"},ea={class:"stat-value"},ta={class:"stat-item"},sa={class:"stat-value"},la={class:"service-timeline"},oa={class:"timeline-content"},aa={class:"record-header"},na={class:"record-title"},ia={class:"record-subject"},da={class:"record-actions"},ra={class:"record-content"},ua={class:"record-description"},ca={class:"record-meta"},ma={key:0,class:"meta-item"},pa={key:1,class:"meta-item"},va={key:2,class:"meta-item"},_a={class:"meta-item"},fa={key:0,class:"record-attachments"},ga={class:"attachments-list"},ya={key:0,class:"empty-records"},ba={class:"dialog-footer"},ha=_e({__name:"CustomerServiceRecords",props:{customerId:{},records:{}},emits:["refresh"],setup(B,{emit:x}){const b=B,L=x,h=R(!1),C=R([]),U=R([]),O=R(""),M=R(!1),y=R(!1),H=R(),p=xe({type:"",subject:"",deviceId:"",serviceStaff:"",cost:0,status:"in_progress",description:"",attachments:[]}),ee={type:[{required:!0,message:"请选择记录类型",trigger:"change"}],subject:[{required:!0,message:"请输入服务主题",trigger:"blur"},{min:2,max:100,message:"服务主题长度在2-100个字符",trigger:"blur"}],serviceStaff:[{required:!0,message:"请输入服务人员姓名",trigger:"blur"}],status:[{required:!0,message:"请选择服务状态",trigger:"change"}],description:[{required:!0,message:"请输入服务描述",trigger:"blur"},{min:10,max:500,message:"服务描述长度在10-500个字符",trigger:"blur"}]},w=ie(()=>"/api/upload/service-attachments"),$=ie(()=>({Authorization:`Bearer ${localStorage.getItem("token")||""}`})),Y=ie(()=>O.value?C.value.filter(u=>u.type===O.value):C.value),k=ie(()=>{const u={total:C.value.length,maintenance:0,upgrade:0,consultation:0,complaint:0};return C.value.forEach(n=>{n.type==="maintenance"&&u.maintenance++,n.type==="upgrade"&&u.upgrade++,n.type==="consultation"&&u.consultation++,n.type==="complaint"&&u.complaint++}),u}),D=()=>oe(null,null,function*(){h.value=!0;try{const u=yield re.getCustomerServiceRecords(b.customerId);C.value=u.data}catch(u){console.error("加载服务记录失败:",u),j.error("加载服务记录失败")}finally{h.value=!1}}),F=()=>oe(null,null,function*(){try{const u=yield re.getCustomerDevices(b.customerId);U.value=u.data}catch(u){console.error("加载客户设备失败:",u)}}),P=()=>{D(),L("refresh")},c=()=>{},i=()=>{Object.assign(p,{type:"",subject:"",deviceId:"",serviceStaff:"",cost:0,status:"in_progress",description:"",attachments:[]}),M.value=!0},a=()=>oe(null,null,function*(){if(H.value)try{yield H.value.validate(),y.value=!0;const u={customerId:b.customerId,type:p.type,subject:p.subject,deviceId:p.deviceId||void 0,serviceStaff:p.serviceStaff,cost:p.cost,status:p.status,description:p.description,attachments:p.attachments.map(n=>{var T;return{name:n.name,url:((T=n.response)==null?void 0:T.url)||n.url,size:n.size}})};yield re.addCustomerServiceRecord(u),j.success("服务记录添加成功"),M.value=!1,P()}catch(u){console.error("添加服务记录失败:",u),j.error("添加服务记录失败")}finally{y.value=!1}}),s=R(!1),V=R(null),z=u=>{V.value=u,s.value=!0},X=u=>{j.info("编辑记录功能开发中...")},K=u=>{X()},N=u=>oe(null,null,function*(){try{yield re.updateCustomerServiceRecord(b.customerId,u.id,{status:"completed",updatedAt:new Date().toISOString()}),j.success("服务记录已标记为完成"),P()}catch(n){console.error("更新服务记录失败:",n),j.error("更新服务记录失败")}}),I=u=>{window.open(u.url,"_blank")},te=u=>{const n=["image/jpeg","image/png","image/gif","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(u.type),T=u.size/1024/1024<10;return n?T?!0:(j.error("文件大小不能超过10MB"),!1):(j.error("只支持图片、PDF、Word格式文件"),!1)},ae=u=>({maintenance:"warning",upgrade:"success",consultation:"primary",complaint:"danger"})[u]||"info",Q=u=>({maintenance:"维修记录",upgrade:"升级记录",consultation:"咨询记录",complaint:"投诉处理"})[u]||u,G=u=>({in_progress:"primary",completed:"success",cancelled:"danger"})[u]||"info",v=u=>({in_progress:"进行中",completed:"已完成",cancelled:"已取消"})[u]||u,de=u=>({maintenance:"warning",upgrade:"success",consultation:"primary",complaint:"danger"})[u]||"info",f=u=>({maintenance:Ee,upgrade:Upgrade,consultation:at,complaint:ot})[u]||ge,r=u=>u?new Date(u).toLocaleString("zh-CN"):"-";return $e(()=>{C.value=b.records,F()}),(u,n)=>{const T=m("el-icon"),J=m("el-button"),E=m("el-option"),se=m("el-select"),W=m("el-tag"),ue=m("el-timeline-item"),ne=m("el-timeline"),be=m("el-empty"),le=m("el-form-item"),ye=m("el-input"),we=m("el-input-number"),De=m("el-upload"),ke=m("el-form"),Ce=m("el-dialog");return g(),S("div",Yo,[e("div",Po,[n[14]||(n[14]=e("h4",null,"服务记录",-1)),e("div",Wo,[t(J,{type:"primary",size:"small",onClick:i},{default:l(()=>[t(T,null,{default:l(()=>[t(A(Ae))]),_:1}),n[12]||(n[12]=_(" 添加记录 ",-1))]),_:1,__:[12]}),t(se,{modelValue:O.value,"onUpdate:modelValue":n[0]||(n[0]=d=>O.value=d),placeholder:"记录类型",size:"small",onChange:c},{default:l(()=>[t(E,{label:"全部类型",value:""}),t(E,{label:"维修记录",value:"maintenance"}),t(E,{label:"升级记录",value:"upgrade"}),t(E,{label:"咨询记录",value:"consultation"}),t(E,{label:"投诉处理",value:"complaint"})]),_:1},8,["modelValue"]),t(J,{size:"small",onClick:P},{default:l(()=>[t(T,null,{default:l(()=>[t(A(Re))]),_:1}),n[13]||(n[13]=_(" 刷新 ",-1))]),_:1,__:[13]})])]),e("div",Xo,[e("div",Jo,[e("div",Ko,o(k.value.total),1),n[15]||(n[15]=e("div",{class:"stat-label"},"服务总数",-1))]),e("div",Go,[e("div",Qo,o(k.value.maintenance),1),n[16]||(n[16]=e("div",{class:"stat-label"},"维修记录",-1))]),e("div",Zo,[e("div",ea,o(k.value.upgrade),1),n[17]||(n[17]=e("div",{class:"stat-label"},"升级记录",-1))]),e("div",ta,[e("div",sa,o(k.value.consultation),1),n[18]||(n[18]=e("div",{class:"stat-label"},"咨询记录",-1))])]),e("div",la,[t(ne,null,{default:l(()=>[(g(!0),S(pe,null,ve(Y.value,d=>(g(),Z(ue,{key:d.id,timestamp:r(d.createdAt),placement:"top",type:de(d.type),icon:f(d.type)},{default:l(()=>{var ce;return[e("div",oa,[e("div",aa,[e("div",na,[t(W,{type:ae(d.type),size:"small"},{default:l(()=>[_(o(Q(d.type)),1)]),_:2},1032,["type"]),e("span",ia,o(d.subject),1)]),e("div",da,[t(J,{text:"",type:"primary",size:"small",onClick:me=>z(d)},{default:l(()=>n[19]||(n[19]=[_(" 查看详情 ",-1)])),_:2,__:[19]},1032,["onClick"]),t(J,{text:"",type:"primary",size:"small",onClick:me=>X(d)},{default:l(()=>n[20]||(n[20]=[_(" 编辑 ",-1)])),_:2,__:[20]},1032,["onClick"])])]),e("div",ra,[e("p",ua,o(d.description),1),e("div",ca,[d.deviceId?(g(),S("div",ma,[t(T,null,{default:l(()=>[t(A(Ue))]),_:1}),e("span",null,"设备: "+o(d.deviceId),1)])):q("",!0),d.serviceStaff?(g(),S("div",pa,[t(T,null,{default:l(()=>[t(A(lt))]),_:1}),e("span",null,"服务人员: "+o(d.serviceStaff),1)])):q("",!0),d.cost?(g(),S("div",va,[t(T,null,{default:l(()=>[t(A(qe))]),_:1}),e("span",null,"费用: ¥"+o(d.cost.toLocaleString()),1)])):q("",!0),e("div",_a,[t(T,null,{default:l(()=>[t(A(Te))]),_:1}),n[21]||(n[21]=e("span",null,"状态: ",-1)),t(W,{type:G(d.status),size:"small"},{default:l(()=>[_(o(v(d.status)),1)]),_:2},1032,["type"])])]),(ce=d.attachments)!=null&&ce.length?(g(),S("div",fa,[n[22]||(n[22]=e("div",{class:"attachments-label"},"附件:",-1)),e("div",ga,[(g(!0),S(pe,null,ve(d.attachments,me=>(g(),Z(W,{key:me.id,size:"small",type:"info",class:"attachment-tag",onClick:Qa=>I(me)},{default:l(()=>[t(T,null,{default:l(()=>[t(A(ge))]),_:1}),_(" "+o(me.name),1)]),_:2},1032,["onClick"]))),128))])])):q("",!0)])])]}),_:2},1032,["timestamp","type","icon"]))),128))]),_:1}),Y.value.length===0?(g(),S("div",ya,[t(be,{description:"暂无服务记录"})])):q("",!0)]),t(Ce,{modelValue:M.value,"onUpdate:modelValue":n[10]||(n[10]=d=>M.value=d),title:"添加服务记录",width:"700px"},{footer:l(()=>[e("div",ba,[t(J,{onClick:n[9]||(n[9]=d=>M.value=!1)},{default:l(()=>n[25]||(n[25]=[_("取消",-1)])),_:1,__:[25]}),t(J,{type:"primary",onClick:a,loading:y.value},{default:l(()=>n[26]||(n[26]=[_(" 添加 ",-1)])),_:1,__:[26]},8,["loading"])])]),default:l(()=>[t(ke,{ref_key:"recordFormRef",ref:H,model:p,rules:ee,"label-width":"100px"},{default:l(()=>[t(le,{label:"记录类型",prop:"type"},{default:l(()=>[t(se,{modelValue:p.type,"onUpdate:modelValue":n[1]||(n[1]=d=>p.type=d),placeholder:"请选择记录类型"},{default:l(()=>[t(E,{label:"维修记录",value:"maintenance"}),t(E,{label:"升级记录",value:"upgrade"}),t(E,{label:"咨询记录",value:"consultation"}),t(E,{label:"投诉处理",value:"complaint"})]),_:1},8,["modelValue"])]),_:1}),t(le,{label:"服务主题",prop:"subject"},{default:l(()=>[t(ye,{modelValue:p.subject,"onUpdate:modelValue":n[2]||(n[2]=d=>p.subject=d),placeholder:"请输入服务主题",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(le,{label:"相关设备",prop:"deviceId"},{default:l(()=>[t(se,{modelValue:p.deviceId,"onUpdate:modelValue":n[3]||(n[3]=d=>p.deviceId=d),placeholder:"请选择相关设备",clearable:""},{default:l(()=>[(g(!0),S(pe,null,ve(U.value,d=>(g(),Z(E,{key:d.id,label:`${d.serialNumber} (${d.model})`,value:d.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(le,{label:"服务人员",prop:"serviceStaff"},{default:l(()=>[t(ye,{modelValue:p.serviceStaff,"onUpdate:modelValue":n[4]||(n[4]=d=>p.serviceStaff=d),placeholder:"请输入服务人员姓名",maxlength:"50"},null,8,["modelValue"])]),_:1}),t(le,{label:"服务费用",prop:"cost"},{default:l(()=>[t(we,{modelValue:p.cost,"onUpdate:modelValue":n[5]||(n[5]=d=>p.cost=d),min:0,precision:2,placeholder:"请输入服务费用",style:{width:"100%"}},null,8,["modelValue"])]),_:1}),t(le,{label:"服务状态",prop:"status"},{default:l(()=>[t(se,{modelValue:p.status,"onUpdate:modelValue":n[6]||(n[6]=d=>p.status=d),placeholder:"请选择服务状态"},{default:l(()=>[t(E,{label:"进行中",value:"in_progress"}),t(E,{label:"已完成",value:"completed"}),t(E,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),t(le,{label:"服务描述",prop:"description"},{default:l(()=>[t(ye,{modelValue:p.description,"onUpdate:modelValue":n[7]||(n[7]=d=>p.description=d),type:"textarea",rows:4,placeholder:"请详细描述服务内容",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(le,{label:"附件上传",prop:"attachments"},{default:l(()=>[t(De,{"file-list":p.attachments,"onUpdate:fileList":n[8]||(n[8]=d=>p.attachments=d),action:w.value,headers:$.value,"before-upload":te,multiple:"",limit:5},{tip:l(()=>n[24]||(n[24]=[e("div",{class:"upload-tip"},"支持图片、文档格式，单个文件不超过10MB，最多5个文件",-1)])),default:l(()=>[t(J,{size:"small"},{default:l(()=>[t(T,null,{default:l(()=>[t(A(Ne))]),_:1}),n[23]||(n[23]=_(" 上传附件 ",-1))]),_:1,__:[23]})]),_:1},8,["file-list","action","headers"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(Ho,{modelValue:s.value,"onUpdate:modelValue":n[11]||(n[11]=d=>s.value=d),record:V.value,onEdit:K,onComplete:N},null,8,["modelValue","record"])])}}}),$a=fe(ha,[["__scopeId","data-v-dad24506"]]),wa={class:"customer-detail"},Da={class:"page-header"},ka={class:"header-left"},Ca={class:"customer-title"},Sa={class:"title-info"},Va={class:"customer-meta"},za={class:"customer-id"},Ia={class:"header-right"},Ta={class:"overview-cards"},Aa={class:"stat-card"},Ra={class:"stat-icon devices"},Ua={class:"stat-content"},Ma={class:"stat-value"},Oa={class:"stat-breakdown"},xa={class:"stat-card"},La={class:"stat-icon revenue"},Fa={class:"stat-content"},Na={class:"stat-value"},Ea={class:"stat-breakdown"},qa={class:"stat-card"},Ba={class:"stat-icon orders"},ja={class:"stat-content"},Ha={class:"stat-value"},Ya={class:"stat-breakdown"},Pa={class:"stat-card"},Wa={class:"stat-icon activity"},Xa={class:"stat-content"},Ja={class:"stat-value"},Ka={class:"stat-breakdown"},Ga=_e({__name:"CustomerDetail",setup(B){const x=Je(),b=Ke(),L=R(x.params.id),h=R(null),C=R("basic"),U=R(!1),O=()=>{b.back()},M=()=>oe(null,null,function*(){U.value=!0;try{const k=yield re.getCustomerById(L.value);h.value=k.data}catch(k){console.error("加载客户详情失败:",k),j.error("加载客户详情失败")}finally{U.value=!1}}),y=()=>{const k=document.querySelector(".customer-basic-info");if(k){const D=k.querySelector("button");D==null||D.click()}},H=()=>{C.value="devices",Ge(()=>{const k=document.querySelector(".customer-device-list");if(k){const D=k.querySelector('button[type="primary"]');D==null||D.click()}})},p=()=>{M()},ee=k=>({regular:"",vip:"warning",premium:"success"})[k||""]||"",w=k=>({regular:"普通客户",vip:"VIP客户",premium:"高级客户"})[k||""]||k||"",$=k=>k?new Date(k).toLocaleDateString("zh-CN"):"",Y=k=>{if(!k)return"";const D=new Date,F=new Date(k),P=D.getTime()-F.getTime(),c=Math.floor(P/(1e3*60*60*24));return c===0?"今天":c===1?"昨天":c<7?`${c}天前`:c<30?`${Math.floor(c/7)}周前`:`${Math.floor(c/30)}月前`};return $e(()=>{M()}),(k,D)=>{var V,z,X,K,N,I,te,ae,Q,G,v,de,f,r,u,n,T,J,E,se;const F=m("el-button"),P=m("el-avatar"),c=m("el-tag"),i=m("el-icon"),a=m("el-tab-pane"),s=m("el-tabs");return g(),S("div",wa,[e("div",Da,[e("div",ka,[t(F,{onClick:O,icon:A(nt)},{default:l(()=>D[1]||(D[1]=[_("返回",-1)])),_:1,__:[1]},8,["icon"]),e("div",Ca,[t(P,{src:(V=h.value)==null?void 0:V.avatar,size:48,icon:A(it)},null,8,["src","icon"]),e("div",Sa,[e("h2",null,o((z=h.value)==null?void 0:z.name),1),e("div",Va,[t(c,{type:ee((X=h.value)==null?void 0:X.level),size:"large"},{default:l(()=>{var W;return[_(o(w((W=h.value)==null?void 0:W.level)),1)]}),_:1},8,["type"]),e("span",za,"ID: "+o((K=h.value)==null?void 0:K.id),1)])])])]),e("div",Ia,[t(F,{onClick:y},{default:l(()=>[t(i,null,{default:l(()=>[t(A(Ie))]),_:1}),D[2]||(D[2]=_(" 编辑客户 ",-1))]),_:1,__:[2]}),t(F,{type:"primary",onClick:H},{default:l(()=>[t(i,null,{default:l(()=>[t(A(Ae))]),_:1}),D[3]||(D[3]=_(" 添加设备 ",-1))]),_:1,__:[3]})])]),e("div",Ta,[e("div",Aa,[e("div",Ra,[t(i,null,{default:l(()=>[t(A(Ue))]),_:1})]),e("div",Ua,[e("div",Ma,o(((I=(N=h.value)==null?void 0:N.deviceCount)==null?void 0:I.total)||0),1),D[4]||(D[4]=e("div",{class:"stat-label"},"设备总数",-1)),e("div",Oa," 购买"+o(((ae=(te=h.value)==null?void 0:te.deviceCount)==null?void 0:ae.purchased)||0)+" · 租赁"+o(((G=(Q=h.value)==null?void 0:Q.deviceCount)==null?void 0:G.rental)||0),1)])]),e("div",xa,[e("div",La,[t(i,null,{default:l(()=>[t(A(qe))]),_:1})]),e("div",Fa,[e("div",Na,"¥"+o(((de=(v=h.value)==null?void 0:v.totalSpent)==null?void 0:de.toLocaleString())||0),1),D[5]||(D[5]=e("div",{class:"stat-label"},"总消费金额",-1)),e("div",Ea," 客户价值评分: "+o(((r=(f=h.value)==null?void 0:f.customerValue)==null?void 0:r.toFixed(1))||0),1)])]),e("div",qa,[e("div",Ba,[t(i,null,{default:l(()=>[t(A(ge))]),_:1})]),e("div",ja,[e("div",Ha,o(((n=(u=h.value)==null?void 0:u.orders)==null?void 0:n.length)||0),1),D[6]||(D[6]=e("div",{class:"stat-label"},"订单数量",-1)),e("div",Ya," 服务记录"+o(((J=(T=h.value)==null?void 0:T.serviceRecords)==null?void 0:J.length)||0)+"条 ",1)])]),e("div",Pa,[e("div",Wa,[t(i,null,{default:l(()=>[t(A(Te))]),_:1})]),e("div",Xa,[e("div",Ja,o(Y((E=h.value)==null?void 0:E.lastActiveAt)),1),D[7]||(D[7]=e("div",{class:"stat-label"},"最后活跃",-1)),e("div",Ka," 注册于"+o($((se=h.value)==null?void 0:se.registeredAt)),1)])])]),t(s,{modelValue:C.value,"onUpdate:modelValue":D[0]||(D[0]=W=>C.value=W),type:"border-card",class:"detail-tabs"},{default:l(()=>[t(a,{label:"基本信息",name:"basic"},{default:l(()=>[t(Vt,{customer:h.value,onUpdate:p},null,8,["customer"])]),_:1}),t(a,{label:"设备管理",name:"devices"},{default:l(()=>{var W;return[t(Xs,{"customer-id":L.value,devices:((W=h.value)==null?void 0:W.devices)||[],onRefresh:M},null,8,["customer-id","devices"])]}),_:1}),t(a,{label:"订单历史",name:"orders"},{default:l(()=>{var W;return[t(Kl,{"customer-id":L.value,orders:((W=h.value)==null?void 0:W.orders)||[]},null,8,["customer-id","orders"])]}),_:1}),t(a,{label:"服务记录",name:"service"},{default:l(()=>{var W;return[t($a,{"customer-id":L.value,records:((W=h.value)==null?void 0:W.serviceRecords)||[],onRefresh:M},null,8,["customer-id","records"])]}),_:1})]),_:1},8,["modelValue"])])}}}),an=fe(Ga,[["__scopeId","data-v-38c69943"]]);export{an as default};
