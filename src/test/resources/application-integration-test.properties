# 订单管理系统集成测试配置文件
# 用于系统集成测试和部署验证

# 应用基础配置
spring.application.name=YXRobot-Integration-Test
server.port=8081

# 数据库配置 - 使用实际数据库进行集成测试
spring.datasource.url=jdbc:mysql://yun.finiot.cn:3306/YXRobot?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false&allowPublicKeyRetrieval=true
spring.datasource.username=YXRobot
spring.datasource.password=2200548qq
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# 连接池配置
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# MyBatis配置
mybatis.mapper-locations=classpath:mapper/*.xml
mybatis.type-aliases-package=com.yxrobot.entity
mybatis.configuration.map-underscore-to-camel-case=true
mybatis.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl

# 日志配置 - 集成测试详细日志
logging.level.root=INFO
logging.level.com.yxrobot=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.test=DEBUG
logging.level.org.mybatis=DEBUG

# 测试专用日志文件
logging.file.name=logs/integration-test.log
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# 事务配置
spring.transaction.default-timeout=30
spring.transaction.rollback-on-commit-failure=true

# 测试环境标识
test.environment=integration
test.data.cleanup.enabled=false
test.performance.monitoring.enabled=true

# API测试配置
test.api.base-url=http://localhost:8081
test.api.timeout=5000
test.api.retry.max-attempts=3
test.api.retry.delay=1000

# 测试数据配置
test.data.prefix=INTEGRATION_TEST_
test.data.cleanup.on-success=false
test.data.cleanup.on-failure=false

# 性能测试阈值配置
test.performance.list-query.max-time=2000
test.performance.search-query.max-time=1000
test.performance.stats-query.max-time=1000
test.performance.create-order.max-time=1000
test.performance.update-order.max-time=1000

# 并发测试配置
test.concurrency.thread-count=5
test.concurrency.timeout=10000

# 验证配置
test.validation.strict-mode=true
test.validation.field-mapping.check=true
test.validation.response-format.check=true

# 前端集成配置
test.frontend.base-url=http://localhost:8081
test.frontend.orders-page=/admin/business/orders
test.frontend.api-prefix=/api/admin

# 部署验证配置
test.deployment.environment=local
test.deployment.database.check=true
test.deployment.api.check=true
test.deployment.performance.check=true

# 错误处理测试配置
test.error-handling.simulate-errors=true
test.error-handling.recovery-check=true

# 统计数据验证配置
test.statistics.accuracy-check=true
test.statistics.consistency-check=true
test.statistics.real-time-update=true

# 搜索功能测试配置
test.search.keyword-test=true
test.search.filter-test=true
test.search.pagination-test=true
test.search.performance-test=true

# 状态管理测试配置
test.status.flow-validation=true
test.status.history-tracking=true
test.status.batch-operations=true

# 数据完整性测试配置
test.data-integrity.foreign-key-check=true
test.data-integrity.constraint-check=true
test.data-integrity.cascade-check=true

# 缓存配置（禁用缓存以确保测试数据实时性）
spring.cache.type=none

# 安全配置（测试环境简化）
test.security.enabled=false
test.auth.bypass=true

# 监控配置
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.metrics.export.simple.enabled=true

# 测试报告配置
test.report.generate=true
test.report.format=html,json
test.report.output-dir=target/integration-test-reports

# JVM配置建议
# -Xmx1024m -Xms512m -XX:+UseG1GC -XX:MaxGCPauseMillis=200