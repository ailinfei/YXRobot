# 测试环境配置文件
spring:
  profiles:
    active: test
  
  # 数据源配置 - 使用内存数据库进行测试
  datasource:
    url: jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
    driver-class-name: org.h2.Driver
    username: sa
    password: 
    
  # H2数据库控制台配置
  h2:
    console:
      enabled: true
      path: /h2-console
      
  # JPA配置
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.H2Dialect
        
  # MyBatis配置
  mybatis:
    mapper-locations: classpath:mapper/*.xml
    type-aliases-package: com.yxrobot.entity
    configuration:
      map-underscore-to-camel-case: true
      cache-enabled: true
      lazy-loading-enabled: true
      multiple-result-sets-enabled: true
      use-column-label: true
      use-generated-keys: true
      auto-mapping-behavior: partial
      auto-mapping-unknown-column-behavior: warning
      default-statement-timeout: 25
      default-fetch-size: 100
      safe-row-bounds-enabled: false
      local-cache-scope: session
      jdbc-type-for-null: other
      lazy-load-trigger-methods: equals,clone,hashCode,toString
      
# 日志配置
logging:
  level:
    com.yxrobot: DEBUG
    org.springframework.test: DEBUG
    org.mybatis: DEBUG
    org.springframework.transaction: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
    
# 测试专用配置
test:
  # 数据库初始化
  database:
    init-schema: true
    init-data: true
    
  # 缓存配置
  cache:
    enabled: false
    
  # 性能监控
  performance:
    enabled: false
    
  # 外部服务模拟
  mock:
    enabled: true
    
# 租赁模块测试配置
rental:
  test:
    # 测试数据配置
    data:
      customer-count: 10
      device-count: 20
      record-count: 50
      
    # 验证配置
    validation:
      strict-mode: true
      
    # 性能测试配置
    performance:
      max-response-time: 2000
      concurrent-users: 10
      
    # 模拟数据配置
    mock:
      enable-real-data: false
      use-random-data: true