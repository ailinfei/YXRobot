# å®¢æˆ·ç®¡ç†APIé›†æˆæµ‹è¯•

æœ¬ç›®å½•åŒ…å«å®¢æˆ·ç®¡ç†åŠŸèƒ½çš„å‰åç«¯APIé›†æˆæµ‹è¯•ï¼Œç”¨äºéªŒè¯å‰åç«¯å¯¹æ¥çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ã€‚

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

### æµ‹è¯•ç›®æ ‡
- âœ… éªŒè¯APIæ¥å£å®Œæ•´æ€§
- âœ… éªŒè¯æ•°æ®æ ¼å¼åŒ¹é…
- âœ… éªŒè¯å­—æ®µæ˜ å°„æ­£ç¡®æ€§
- âœ… éªŒè¯åŠŸèƒ½å®Œæ•´æ”¯æŒ
- âœ… éªŒè¯æ€§èƒ½è¦æ±‚æ»¡è¶³
- âœ… éªŒè¯é”™è¯¯å¤„ç†å®Œå–„

### æµ‹è¯•èŒƒå›´
1. **APIæ¥å£å®Œæ•´æ€§éªŒè¯**
   - å®¢æˆ·ç»Ÿè®¡API
   - å®¢æˆ·åˆ—è¡¨API
   - å®¢æˆ·è¯¦æƒ…API
   - å®¢æˆ·CRUDæ“ä½œAPI
   - å®¢æˆ·å…³è”æ•°æ®API

2. **æ•°æ®æ ¼å¼åŒ¹é…éªŒè¯**
   - å“åº”æ•°æ®ç»“æ„éªŒè¯
   - å­—æ®µç±»å‹éªŒè¯
   - æšä¸¾å€¼éªŒè¯
   - æ—¥æœŸæ ¼å¼éªŒè¯

3. **å­—æ®µæ˜ å°„éªŒè¯**
   - æ•°æ®åº“å­—æ®µåˆ°å‰ç«¯å­—æ®µæ˜ å°„
   - camelCaseå‘½åè§„èŒƒéªŒè¯
   - ç¦æ­¢snake_caseå­—æ®µéªŒè¯

4. **æ€§èƒ½è¦æ±‚éªŒè¯**
   - APIå“åº”æ—¶é—´æµ‹è¯•
   - å¹¶å‘è¯·æ±‚æµ‹è¯•
   - å¤§æ•°æ®é‡å¤„ç†æµ‹è¯•

5. **é”™è¯¯å¤„ç†éªŒè¯**
   - æ— æ•ˆå‚æ•°å¤„ç†
   - ä¸å­˜åœ¨èµ„æºå¤„ç†
   - ç½‘ç»œé”™è¯¯å¤„ç†

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®æ¡ä»¶
1. åç«¯æœåŠ¡å·²å¯åŠ¨ (`mvn spring-boot:run`)
2. æ•°æ®åº“è¿æ¥æ­£å¸¸
3. Node.js å’Œ npm å·²å®‰è£…
4. å‰ç«¯ä¾èµ–å·²å®‰è£… (`npm install`)

### è¿è¡Œæµ‹è¯•

#### æ–¹æ³•1: ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
# Windows
scripts/run-integration-tests.bat
```

#### æ–¹æ³•2: ä½¿ç”¨npmè„šæœ¬
```bash
cd src/frontend
npm run test:integration
```

#### æ–¹æ³•3: æ‰‹åŠ¨è¿è¡Œå•ä¸ªæµ‹è¯•
```bash
cd src/frontend

# APIæ¥å£å®Œæ•´æ€§æµ‹è¯•
npx vitest run src/__tests__/integration/customerApiIntegration.test.ts

# å­—æ®µæ˜ å°„éªŒè¯æµ‹è¯•
npx vitest run src/__tests__/validation/fieldMappingValidation.test.ts

# APIæ€§èƒ½éªŒè¯æµ‹è¯•
npx vitest run src/__tests__/performance/apiPerformanceValidation.test.ts
```

#### æ–¹æ³•4: ä½¿ç”¨æµ‹è¯•è¿è¡Œå™¨
```bash
cd src/frontend
npx ts-node src/__tests__/runIntegrationTests.ts
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
src/__tests__/
â”œâ”€â”€ README.md                          # æµ‹è¯•è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ config/
â”‚   â””â”€â”€ testConfig.ts                  # æµ‹è¯•é…ç½®æ–‡ä»¶
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ apiResponseValidator.ts        # APIå“åº”éªŒè¯å·¥å…·
â”‚   â””â”€â”€ testReportGenerator.ts         # æµ‹è¯•æŠ¥å‘Šç”Ÿæˆå™¨
â”œâ”€â”€ integration/
â”‚   â””â”€â”€ customerApiIntegration.test.ts # APIé›†æˆæµ‹è¯•
â”œâ”€â”€ validation/
â”‚   â””â”€â”€ fieldMappingValidation.test.ts # å­—æ®µæ˜ å°„éªŒè¯æµ‹è¯•
â”œâ”€â”€ performance/
â”‚   â””â”€â”€ apiPerformanceValidation.test.ts # APIæ€§èƒ½éªŒè¯æµ‹è¯•
â””â”€â”€ runIntegrationTests.ts             # æµ‹è¯•è¿è¡Œè„šæœ¬
```

## âš™ï¸ é…ç½®è¯´æ˜

### APIé…ç½®
```typescript
// testConfig.ts
export const API_CONFIG = {
  baseURL: 'http://localhost:8081',
  timeout: 10000,
  retryAttempts: 3
}
```

### æ€§èƒ½è¦æ±‚é…ç½®
```typescript
export const PERFORMANCE_REQUIREMENTS = {
  customerStats: 1000,      // å®¢æˆ·ç»Ÿè®¡API < 1ç§’
  customerList: 2000,       // å®¢æˆ·åˆ—è¡¨API < 2ç§’
  customerDetail: 1500,     // å®¢æˆ·è¯¦æƒ…API < 1.5ç§’
  customerCreate: 3000,     // å®¢æˆ·åˆ›å»ºAPI < 3ç§’
  // ...
}
```

## ğŸ“Š æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•å®Œæˆåä¼šç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Šï¼ŒåŒ…å«ï¼š

### æ§åˆ¶å°æŠ¥å‘Š
- æµ‹è¯•æ€»ç»“ç»Ÿè®¡
- åˆ†ç±»æµ‹è¯•ç»“æœ
- æ€§èƒ½æµ‹è¯•ç»“æœ
- æ•°æ®éªŒè¯ç»“æœ
- ä¼˜åŒ–å»ºè®®

### ç¤ºä¾‹æŠ¥å‘Šè¾“å‡º
```
ğŸ¯ APIé›†æˆæµ‹è¯•æŠ¥å‘Š
============================================================

ğŸ“Š æµ‹è¯•æ€»ç»“:
------------------------------
æ€»æµ‹è¯•æ•°: 25
é€šè¿‡æµ‹è¯•: 24 âœ…
å¤±è´¥æµ‹è¯•: 1 âŒ
è·³è¿‡æµ‹è¯•: 0 â­ï¸
é€šè¿‡ç‡: 96%
æ€»è€—æ—¶: 15.32ç§’

âš¡ æ€§èƒ½æµ‹è¯•ç»“æœ:
------------------------------
æ€»ä½“é€šè¿‡ç‡: 100%
å¹³å‡å“åº”æ—¶é—´: 456ms

âœ… å®¢æˆ·ç»Ÿè®¡API: 234ms (23.4% of 1000ms)
âœ… å®¢æˆ·åˆ—è¡¨API: 567ms (28.4% of 2000ms)
âœ… å®¢æˆ·è¯¦æƒ…API: 345ms (23.0% of 1500ms)

ğŸ’¡ ä¼˜åŒ–å»ºè®®:
------------------------------
1. æ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡äº†ï¼APIæ¥å£è¿è¡Œè‰¯å¥½ï¼Œå‰åç«¯å¯¹æ¥æˆåŠŸ
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. åç«¯æœåŠ¡è¿æ¥å¤±è´¥
```
âŒ é”™è¯¯: åç«¯æœåŠ¡å¯åŠ¨è¶…æ—¶
```
**è§£å†³æ–¹æ¡ˆ:**
- ç¡®ä¿åç«¯æœåŠ¡å·²å¯åŠ¨: `mvn spring-boot:run`
- æ£€æŸ¥ç«¯å£8081æ˜¯å¦è¢«å ç”¨
- éªŒè¯æ•°æ®åº“è¿æ¥æ˜¯å¦æ­£å¸¸

#### 2. æµ‹è¯•æ•°æ®åˆ›å»ºå¤±è´¥
```
âŒ å®¢æˆ·åˆ›å»ºæµ‹è¯•å¤±è´¥: æ•°æ®éªŒè¯å¤±è´¥
```
**è§£å†³æ–¹æ¡ˆ:**
- æ£€æŸ¥æ•°æ®åº“è¡¨ç»“æ„æ˜¯å¦æ­£ç¡®
- éªŒè¯å¿…éœ€å­—æ®µæ˜¯å¦éƒ½æœ‰å€¼
- æ£€æŸ¥æ•°æ®éªŒè¯è§„åˆ™

#### 3. å­—æ®µæ˜ å°„éªŒè¯å¤±è´¥
```
âŒ å­—æ®µç±»å‹ä¸åŒ¹é…: totalSpent æœŸæœ› number, å®é™… string
```
**è§£å†³æ–¹æ¡ˆ:**
- æ£€æŸ¥MyBatisæ˜ å°„é…ç½®
- éªŒè¯DTOç±»å­—æ®µç±»å‹
- ç¡®è®¤æ•°æ®åº“å­—æ®µç±»å‹

#### 4. æ€§èƒ½æµ‹è¯•å¤±è´¥
```
âŒ å®¢æˆ·åˆ—è¡¨APIæ€§èƒ½æµ‹è¯•å¤±è´¥: 3500ms > 2000ms
```
**è§£å†³æ–¹æ¡ˆ:**
- æ£€æŸ¥æ•°æ®åº“ç´¢å¼•é…ç½®
- ä¼˜åŒ–SQLæŸ¥è¯¢è¯­å¥
- è€ƒè™‘æ·»åŠ ç¼“å­˜æœºåˆ¶

### è°ƒè¯•æŠ€å·§

#### 1. å¯ç”¨è¯¦ç»†æ—¥å¿—
```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export DEBUG=true
export LOG_LEVEL=debug
```

#### 2. å•ç‹¬è¿è¡Œå¤±è´¥çš„æµ‹è¯•
```bash
npx vitest run src/__tests__/integration/customerApiIntegration.test.ts --reporter=verbose
```

#### 3. æ£€æŸ¥APIå“åº”
```bash
# æ‰‹åŠ¨æµ‹è¯•API
curl -X GET "http://localhost:8081/api/admin/customers/stats"
```

## ğŸ“ˆ æŒç»­é›†æˆ

### GitHub Actionsé…ç½®ç¤ºä¾‹
```yaml
name: API Integration Tests
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '16'
      - name: Install dependencies
        run: npm install
      - name: Start backend service
        run: mvn spring-boot:run &
      - name: Wait for backend
        run: sleep 30
      - name: Run integration tests
        run: npm run test:integration
```

## ğŸ“ è´¡çŒ®æŒ‡å—

### æ·»åŠ æ–°æµ‹è¯•
1. åœ¨ç›¸åº”ç›®å½•ä¸‹åˆ›å»ºæµ‹è¯•æ–‡ä»¶
2. éµå¾ªç°æœ‰çš„æµ‹è¯•ç»“æ„å’Œå‘½åè§„èŒƒ
3. æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†å’Œæ¸…ç†é€»è¾‘
4. æ›´æ–°READMEæ–‡æ¡£

### æµ‹è¯•æœ€ä½³å®è·µ
- ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•åç§°
- æ¯ä¸ªæµ‹è¯•åº”è¯¥ç‹¬ç«‹è¿è¡Œ
- æ¸…ç†æµ‹è¯•æ•°æ®
- æ·»åŠ é€‚å½“çš„æ–­è¨€
- å¤„ç†å¼‚æ­¥æ“ä½œ

## ğŸ“ æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜æˆ–éœ€è¦å¸®åŠ©ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æ•…éšœæ’é™¤éƒ¨åˆ†
2. æ£€æŸ¥æµ‹è¯•æ—¥å¿—è¾“å‡º
3. éªŒè¯ç¯å¢ƒé…ç½®
4. è”ç³»å¼€å‘å›¢é˜Ÿ

---

**æ³¨æ„**: è¿™äº›æµ‹è¯•éœ€è¦çœŸå®çš„åç«¯æœåŠ¡å’Œæ•°æ®åº“è¿æ¥ã€‚è¯·ç¡®ä¿åœ¨è¿è¡Œæµ‹è¯•å‰å·²æ­£ç¡®é…ç½®å¼€å‘ç¯å¢ƒã€‚