<!DOCTYPE html>
<html>
<head>
    <title>模拟登录</title>
</head>
<body>
    <h1>YXRobot 模拟登录</h1>
    <button onclick="mockLogin()">模拟管理员登录</button>
    <button onclick="clearLogin()">清除登录状态</button>
    <button onclick="checkStatus()">检查登录状态</button>
    
    <div id="status"></div>
    
    <script>
        function mockLogin() {
            const token = 'mock-jwt-token';
            const userInfo = {
                id: '1',
                username: 'admin',
                name: '管理员',
                email: 'admin@yxrobot.com',
                role: 'admin',
                avatar: 'https://via.placeholder.com/100x100',
                permissions: ['admin:all', 'content:manage', 'product:manage'],
                loginTime: new Date().toISOString(),
                lastActiveTime: new Date().toISOString()
            };
            
            localStorage.setItem('token', token);
            localStorage.setItem('userInfo', JSON.stringify(userInfo));
            
            document.getElementById('status').innerHTML = '<p style="color: green;">✅ 登录成功！现在可以访问管理页面</p>';
            
            // 自动跳转到产品管理页面
            setTimeout(() => {
                window.location.href = 'http://localhost:8081/#/admin/content/products';
            }, 1000);
        }
        
        function clearLogin() {
            localStorage.removeItem('token');
            localStorage.removeItem('userInfo');
            document.getElementById('status').innerHTML = '<p style="color: red;">❌ 已清除登录状态</p>';
        }
        
        function checkStatus() {
            const token = localStorage.getItem('token');
            const userInfo = localStorage.getItem('userInfo');
            
            if (token && userInfo) {
                const user = JSON.parse(userInfo);
                document.getElementById('status').innerHTML = `
                    <p style="color: green;">✅ 已登录</p>
                    <p>用户名: ${user.username}</p>
                    <p>角色: ${user.role}</p>
                    <p>权限: ${user.permissions.join(', ')}</p>
                `;
            } else {
                document.getElementById('status').innerHTML = '<p style="color: red;">❌ 未登录</p>';
            }
        }
        
        // 页面加载时检查状态
        window.onload = function() {
            checkStatus();
        }
    </script>
</body>
</html>