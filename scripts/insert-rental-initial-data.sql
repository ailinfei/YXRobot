-- =====================================================
-- 租赁数据分析模块 - 初始化数据脚本
-- 插入基础测试数据，支持前端页面功能测试
-- 创建时间: 2025-01-28
-- =====================================================

USE YXRobot;

-- =====================================================
-- 1. 插入租赁设备基础数据
-- =====================================================
INSERT INTO `rental_devices` (
  `device_id`, `device_model`, `device_name`, `device_category`, `serial_number`,
  `purchase_date`, `purchase_price`, `daily_rental_price`, `current_status`,
  `location`, `region`, `performance_score`, `signal_strength`, `maintenance_status`,
  `last_maintenance_date`, `next_maintenance_date`, `total_rental_days`, 
  `total_available_days`, `utilization_rate`, `last_rental_date`
) VALUES
-- YX-Robot-Pro 系列设备
('YX-0001', 'YX-Robot-Pro', 'YX练字机器人Pro-001', '高端练字设备', 'PRO20240001', '2024-01-15', 15000.00, 200.00, 'active', '北京朝阳区', '华北', 95, 88, 'normal', '2024-12-01', '2025-03-01', 280, 365, 76.71, '2024-12-25'),
('YX-0002', 'YX-Robot-Pro', 'YX练字机器人Pro-002', '高端练字设备', 'PRO20240002', '2024-01-20', 15000.00, 200.00, 'idle', '上海浦东区', '华东', 92, 85, 'normal', '2024-11-15', '2025-02-15', 245, 365, 67.12, '2024-12-20'),
('YX-0003', 'YX-Robot-Pro', 'YX练字机器人Pro-003', '高端练字设备', 'PRO20240003', '2024-02-01', 15000.00, 200.00, 'active', '深圳南山区', '华南', 98, 92, 'normal', '2024-12-10', '2025-03-10', 290, 365, 79.45, '2024-12-28'),

-- YX-Robot-Standard 系列设备
('YX-0004', 'YX-Robot-Standard', 'YX练字机器人标准-004', '标准练字设备', 'STD20240004', '2024-02-10', 10000.00, 150.00, 'active', '广州天河区', '华南', 88, 82, 'normal', '2024-11-20', '2025-02-20', 220, 365, 60.27, '2024-12-22'),
('YX-0005', 'YX-Robot-Standard', 'YX练字机器人标准-005', '标准练字设备', 'STD20240005', '2024-02-15', 10000.00, 150.00, 'idle', '成都锦江区', '西南', 85, 78, 'warning', '2024-10-15', '2025-01-15', 180, 365, 49.32, '2024-12-10'),
('YX-0006', 'YX-Robot-Standard', 'YX练字机器人标准-006', '标准练字设备', 'STD20240006', '2024-02-20', 10000.00, 150.00, 'active', '杭州西湖区', '华东', 90, 86, 'normal', '2024-12-05', '2025-03-05', 260, 365, 71.23, '2024-12-26'),

-- YX-Robot-Lite 系列设备
('YX-0007', 'YX-Robot-Lite', 'YX练字机器人轻量-007', '轻量练字设备', 'LITE20240007', '2024-03-01', 7000.00, 100.00, 'active', '武汉江汉区', '华中', 82, 75, 'normal', '2024-11-25', '2025-02-25', 200, 365, 54.79, '2024-12-24'),
('YX-0008', 'YX-Robot-Lite', 'YX练字机器人轻量-008', '轻量练字设备', 'LITE20240008', '2024-03-05', 7000.00, 100.00, 'maintenance', '西安雁塔区', '西北', 78, 70, 'urgent', '2024-09-10', '2024-12-10', 150, 365, 41.10, '2024-11-30'),
('YX-0009', 'YX-Robot-Lite', 'YX练字机器人轻量-009', '轻量练字设备', 'LITE20240009', '2024-03-10', 7000.00, 100.00, 'idle', '南京鼓楼区', '华东', 85, 80, 'normal', '2024-12-01', '2025-03-01', 190, 365, 52.05, '2024-12-18'),

-- YX-Robot-Mini 系列设备
('YX-0010', 'YX-Robot-Mini', 'YX练字机器人迷你-010', '迷你练字设备', 'MINI20240010', '2024-03-15', 5000.00, 80.00, 'active', '天津和平区', '华北', 75, 68, 'normal', '2024-11-10', '2025-02-10', 160, 365, 43.84, '2024-12-15'),
('YX-0011', 'YX-Robot-Mini', 'YX练字机器人迷你-011', '迷你练字设备', 'MINI20240011', '2024-03-20', 5000.00, 80.00, 'idle', '重庆渝中区', '西南', 72, 65, 'warning', '2024-10-20', '2025-01-20', 140, 365, 38.36, '2024-12-05'),
('YX-0012', 'YX-Robot-Mini', 'YX练字机器人迷你-012', '迷你练字设备', 'MINI20240012', '2024-03-25', 5000.00, 80.00, 'active', '沈阳沈河区', '东北', 78, 72, 'normal', '2024-12-15', '2025-03-15', 170, 365, 46.58, '2024-12-27');

-- =====================================================
-- 2. 插入租赁客户基础数据
-- =====================================================
INSERT INTO `rental_customers` (
  `customer_name`, `customer_type`, `contact_person`, `phone`, `email`,
  `address`, `region`, `industry`, `credit_level`, `total_rental_amount`,
  `total_rental_days`, `last_rental_date`
) VALUES
('北京教育科技有限公司', 'enterprise', '张经理', '13800138001', 'zhang@bjedu.com', '北京市朝阳区教育路100号', '华北', '教育培训', 'A', 45000.00, 225, '2024-12-25'),
('上海书法培训中心', 'institution', '李老师', '13800138002', 'li@shcalligraphy.com', '上海市浦东区文化路200号', '华东', '艺术培训', 'A', 38000.00, 190, '2024-12-20'),
('深圳智能教育集团', 'enterprise', '王总监', '13800138003', 'wang@szedu.com', '深圳市南山区科技路300号', '华南', '教育科技', 'A', 52000.00, 260, '2024-12-28'),
('广州文化艺术学校', 'institution', '陈校长', '13800138004', 'chen@gzarts.edu', '广州市天河区艺术路400号', '华南', '艺术教育', 'B', 28000.00, 140, '2024-12-22'),
('成都书院培训机构', 'enterprise', '刘主任', '13800138005', 'liu@cdsyuan.com', '成都市锦江区书院路500号', '西南', '传统文化', 'B', 22000.00, 110, '2024-12-10'),
('杭州智慧教育公司', 'enterprise', '赵经理', '13800138006', 'zhao@hzedu.com', '杭州市西湖区智慧路600号', '华东', '教育科技', 'A', 42000.00, 210, '2024-12-26'),
('武汉书法协会', 'institution', '孙会长', '13800138007', 'sun@whcalligraphy.org', '武汉市江汉区文化路700号', '华中', '文化艺术', 'B', 18000.00, 90, '2024-12-24'),
('西安传统文化中心', 'institution', '周主任', '13800138008', 'zhou@xaculture.org', '西安市雁塔区传统路800号', '西北', '传统文化', 'C', 12000.00, 60, '2024-11-30');

-- =====================================================
-- 3. 插入租赁记录基础数据（最近3个月的数据）
-- =====================================================
INSERT INTO `rental_records` (
  `rental_order_number`, `device_id`, `customer_id`, `rental_start_date`, `rental_end_date`,
  `planned_end_date`, `rental_period`, `daily_rental_fee`, `total_rental_fee`,
  `deposit_amount`, `actual_payment`, `payment_status`, `rental_status`,
  `delivery_method`, `delivery_address`, `return_date`, `return_condition`, `notes`
) VALUES
-- 2024年10月租赁记录
('RO202410001', 1, 1, '2024-10-01', '2024-10-31', '2024-10-31', 30, 200.00, 6000.00, 2000.00, 6000.00, 'paid', 'completed', '上门安装', '北京市朝阳区教育路100号', '2024-10-31', '设备完好', '客户满意度很高'),
('RO202410002', 4, 2, '2024-10-05', '2024-11-04', '2024-11-04', 30, 150.00, 4500.00, 1500.00, 4500.00, 'paid', 'completed', '客户自提', '上海市浦东区文化路200号', '2024-11-04', '设备完好', '续租意向强烈'),
('RO202410003', 7, 3, '2024-10-10', '2024-11-09', '2024-11-09', 30, 100.00, 3000.00, 1000.00, 3000.00, 'paid', 'completed', '物流配送', '深圳市南山区科技路300号', '2024-11-09', '设备完好', '使用效果良好'),

-- 2024年11月租赁记录
('RO202411001', 2, 4, '2024-11-01', '2024-11-30', '2024-11-30', 29, 200.00, 5800.00, 2000.00, 5800.00, 'paid', 'completed', '上门安装', '广州市天河区艺术路400号', '2024-11-30', '设备完好', '教学效果显著'),
('RO202411002', 6, 5, '2024-11-05', '2024-12-04', '2024-12-04', 29, 150.00, 4350.00, 1500.00, 4350.00, 'paid', 'completed', '客户自提', '成都市锦江区书院路500号', '2024-12-04', '设备完好', '学员反馈积极'),
('RO202411003', 9, 6, '2024-11-10', '2024-12-09', '2024-12-09', 29, 100.00, 2900.00, 1000.00, 2900.00, 'paid', 'completed', '物流配送', '杭州市西湖区智慧路600号', '2024-12-09', '设备完好', '技术支持及时'),
('RO202411004', 10, 7, '2024-11-15', '2024-12-14', '2024-12-14', 29, 80.00, 2320.00, 800.00, 2320.00, 'paid', 'completed', '上门安装', '武汉市江汉区文化路700号', '2024-12-14', '设备完好', '性价比很高'),

-- 2024年12月租赁记录（部分进行中）
('RO202412001', 1, 1, '2024-12-01', NULL, '2024-12-31', 30, 200.00, 6000.00, 2000.00, 6000.00, 'paid', 'active', '上门安装', '北京市朝阳区教育路100号', NULL, NULL, '续租客户，信誉良好'),
('RO202412002', 3, 3, '2024-12-05', NULL, '2025-01-04', 30, 200.00, 6000.00, 2000.00, 6000.00, 'paid', 'active', '物流配送', '深圳市南山区科技路300号', NULL, NULL, '长期合作客户'),
('RO202412003', 4, 2, '2024-12-10', NULL, '2025-01-09', 30, 150.00, 4500.00, 1500.00, 4500.00, 'paid', 'active', '客户自提', '上海市浦东区文化路200号', NULL, NULL, '教学旺季租赁'),
('RO202412004', 6, 6, '2024-12-15', NULL, '2025-01-14', 30, 150.00, 4500.00, 1500.00, 4500.00, 'paid', 'active', '物流配送', '杭州市西湖区智慧路600号', NULL, NULL, '冬季培训需求'),
('RO202412005', 7, 7, '2024-12-20', NULL, '2025-01-19', 30, 100.00, 3000.00, 1000.00, 3000.00, 'paid', 'active', '上门安装', '武汉市江汉区文化路700号', NULL, NULL, '协会活动使用'),
('RO202412006', 12, 8, '2024-12-25', NULL, '2025-01-24', 30, 80.00, 2400.00, 800.00, 2400.00, 'paid', 'active', '客户自提', '西安市雁塔区传统路800号', NULL, NULL, '文化推广项目');

-- =====================================================
-- 4. 插入租赁统计数据
-- =====================================================
INSERT INTO `rental_stats` (
  `stat_date`, `stat_type`, `total_rental_revenue`, `total_rental_orders`,
  `total_rental_devices`, `active_rental_devices`, `average_rental_period`,
  `average_daily_revenue`, `device_utilization_rate`, `new_customers`,
  `returning_customers`, `top_device_model`, `top_region`,
  `revenue_growth_rate`, `device_growth_rate`
) VALUES
-- 2024年12月统计数据
('2024-12-31', 'monthly', 1285420.00, 156, 12, 6, 29.5, 43400.00, 65.8, 2, 6, 'YX-Robot-Pro', '华东', 18.6, 12.3),
('2024-11-30', 'monthly', 1087650.00, 132, 12, 4, 29.2, 36255.00, 58.2, 1, 5, 'YX-Robot-Pro', '华南', 15.2, 8.7),
('2024-10-31', 'monthly', 945800.00, 118, 12, 3, 30.0, 30512.00, 52.1, 3, 3, 'YX-Robot-Standard', '华北', 12.8, 5.4);

-- =====================================================
-- 5. 插入设备利用率数据
-- =====================================================
INSERT INTO `device_utilization` (
  `device_id`, `stat_date`, `stat_period`, `rental_hours`, `available_hours`,
  `utilization_rate`, `rental_revenue`, `rental_count`, `average_rental_duration`,
  `downtime_hours`, `maintenance_hours`
) VALUES
-- 2024年12月设备利用率数据
(1, '2024-12-31', 'monthly', 552.0, 720.0, 76.67, 12000.00, 2, 276.0, 48.0, 24.0),
(2, '2024-12-31', 'monthly', 483.6, 720.0, 67.17, 5800.00, 1, 483.6, 72.0, 36.0),
(3, '2024-12-31', 'monthly', 576.0, 720.0, 80.00, 12000.00, 2, 288.0, 36.0, 18.0),
(4, '2024-12-31', 'monthly', 435.6, 720.0, 60.50, 9000.00, 2, 217.8, 60.0, 30.0),
(5, '2024-12-31', 'monthly', 348.0, 720.0, 48.33, 4350.00, 1, 348.0, 96.0, 48.0),
(6, '2024-12-31', 'monthly', 522.0, 720.0, 72.50, 7350.00, 2, 261.0, 42.0, 21.0),
(7, '2024-12-31', 'monthly', 390.0, 720.0, 54.17, 5900.00, 2, 195.0, 78.0, 39.0),
(8, '2024-12-31', 'monthly', 0.0, 720.0, 0.00, 0.00, 0, 0.0, 120.0, 180.0),
(9, '2024-12-31', 'monthly', 348.0, 720.0, 48.33, 2900.00, 1, 348.0, 84.0, 42.0),
(10, '2024-12-31', 'monthly', 348.0, 720.0, 48.33, 2320.00, 1, 348.0, 90.0, 45.0),
(11, '2024-12-31', 'monthly', 0.0, 720.0, 0.00, 0.00, 0, 0.0, 150.0, 75.0),
(12, '2024-12-31', 'monthly', 360.0, 720.0, 50.00, 2400.00, 1, 360.0, 72.0, 36.0);

-- =====================================================
-- 数据插入完成提示
-- =====================================================
SELECT 'Rental initial data inserted successfully!' as message;

-- 验证数据插入情况
SELECT COUNT(*) as device_count FROM rental_devices;
SELECT COUNT(*) as customer_count FROM rental_customers;
SELECT COUNT(*) as rental_record_count FROM rental_records;
SELECT COUNT(*) as stats_count FROM rental_stats;
SELECT COUNT(*) as utilization_count FROM device_utilization;