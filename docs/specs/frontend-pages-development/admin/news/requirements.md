# Admin Content - 新闻管理页面需求文档

## 🚨 核心需求要求（强制执行）

### ⚠️ 前端页面与数据库数据完全绑定规范

**本需求文档的核心要求是实现前端页面与数据库数据的完全绑定，确保使用真实数据，并能在前端页面正常显示：**

#### 🔥 前端数据展示强制要求

1. **数据来源要求**：
   - ✅ **必须使用**：通过API接口从数据库获取的真实数据
   - ❌ **严禁使用**：在Vue组件中硬编码的模拟数据
   - ❌ **严禁使用**：在constants文件中定义的静态假数据
   - ❌ **严禁使用**：任何形式的mock数据或示例数据

2. **Vue数据绑定要求**：
   - 所有页面数据必须通过`reactive`或`ref`进行响应式绑定
   - 数据必须通过API调用动态加载，不能预设静态值
   - 页面加载时必须调用对应的API接口获取数据
   - 数据更新后必须重新调用API刷新页面显示

#### 🚨 字段映射一致性要求（最高优先级）

项目开发过程中前端使用的字段名和后端的字段名要匹配，字段映射要正确：

1. **四层数据结构映射**：
   - 数据库表字段 (snake_case) ↔ Java实体类属性 (camelCase)
   - Java实体类属性 (camelCase) ↔ MyBatis XML映射 (column/property)
   - 后端API响应 (camelCase) ↔ 前端TypeScript接口 (camelCase)
   - 前端页面字段 (camelCase) ↔ API调用参数 (camelCase)

2. **字段映射验证要求**：
   - 数据库字段命名使用snake_case：`news_title`、`publish_time`、`is_featured`
   - Java实体类属性使用camelCase：`newsTitle`、`publishTime`、`isFeatured`
   - MyBatis映射正确：`<result column="news_title" property="newsTitle"/>`
   - 前端接口一致：`newsTitle: string`、`publishTime: string`、`isFeatured: boolean`

3. **字段映射检查清单**：
   - [ ] 数据库表结构与Java实体类字段完全对应
   - [ ] MyBatis XML映射文件column和property正确匹配
   - [ ] 前端TypeScript接口与后端DTO字段名称一致
   - [ ] API请求响应参数在前后端保持统一命名
   - [ ] 枚举值在数据库、后端、前端三层完全一致

## 介绍

新闻管理页面是 YXRobot 管理后台内容管理模块的核心功能，为管理员提供官网新闻内容的全面管理。该页面已完成前端开发，包含新闻发布、编辑、删除、状态管理、分类筛选、搜索功能和数据统计等功能。

**核心技术实现要求:**

1. **严禁使用模拟数据**: 
   - 前端页面不得使用任何硬编码的模拟数据，包括新闻列表、统计数据、分类选项等
   - 后端不得在数据初始化时插入任何示例/模拟新闻数据
   - 所有新闻内容必须通过管理后台手动创建，确保数据的真实性

2. **API数据绑定**: 所有前端显示的数据必须通过HTTP API从后端获取

3. **数据库实时查询**: 后端API必须从MySQL数据库实时查询数据，不使用静态数据

4. **空数据状态处理**: 
   - 当数据库中没有新闻数据时，页面应显示空状态提示
   - 空状态应引导用户创建第一条新闻
   - 不得因为数据为空而显示模拟数据

5. **CRUD操作生效**: 所有的创建、编辑、删除操作都必须实际操作数据库并立即反映在前端页面上

6. **数据验证**: 
   - 系统启动时不得自动插入任何示例新闻数据
   - 所有显示的新闻数据必须来自真实的用户创建

**技术实现要求:**
- 前端Vue组件通过axios调用后端Spring Boot API
- 后端通过MyBatis查询MySQL数据库
- 数据传输格式完全匹配前后端接口定义
- **严格执行字段映射一致性**（数据库snake_case ↔ Java camelCase ↔ 前端camelCase）
- 后端DataInitializationService不得插入示例新闻数据
- 前端组件必须正确处理空数据状态

**字段映射实施标准：**
```sql
-- 数据库表字段 (snake_case)
CREATE TABLE news (
  id BIGINT PRIMARY KEY,
  news_title VARCHAR(200),
  publish_time DATETIME,
  is_featured TINYINT(1)
);
```

```java
// Java实体类属性 (camelCase)
public class News {
  private Long id;
  private String newsTitle;
  private LocalDateTime publishTime;
  private Boolean isFeatured;
}
```

```xml
<!-- MyBatis映射配置 -->
<result column="news_title" property="newsTitle"/>
<result column="publish_time" property="publishTime"/>
<result column="is_featured" property="isFeatured"/>
```

```typescript
// 前端TypeScript接口 (camelCase)
interface NewsItem {
  id: number;
  newsTitle: string;
  publishTime: string;
  isFeatured: boolean;
}
```

## 需求

### 需求 1

**用户故事:** 作为新闻管理员，我希望能够查看新闻管理页面的整体布局和导航，包括页面标题、描述和主要操作按钮，并且页面能够正常加载真实的数据库数据，以便快速了解页面功能和进行操作。

#### 验收标准

1. WHEN 用户访问新闻管理页面 THEN 系统 SHALL 显示"新闻管理"页面标题
2. WHEN 显示页面描述 THEN 系统 SHALL 显示"管理官网新闻内容，包括发布、编辑和删除新闻文章"副标题
3. WHEN 页面加载 THEN 系统 SHALL 在页面右上角显示"发布新闻"按钮
4. WHEN 页面布局 THEN 系统 SHALL 使用左右分布的头部布局方式
5. WHEN 页面初始化 THEN 系统 SHALL 通过后端API从数据库加载真实的新闻数据，不使用任何前端模拟数据

### 需求 2

**用户故事:** 作为新闻管理员，我希望能够通过筛选和搜索功能快速找到目标新闻，包括按分类、状态筛选和关键词搜索，并且所有筛选结果都基于数据库的真实查询，以便高效管理大量新闻内容。

#### 验收标准

1. WHEN 用户查看筛选区域 THEN 系统 SHALL 显示搜索输入框、分类选择器、状态选择器
2. WHEN 用户输入搜索关键词 THEN 系统 SHALL 通过API调用数据库LIKE查询实时搜索新闻标题或内容并更新列表
3. WHEN 用户选择分类筛选 THEN 系统 SHALL 从数据库news_categories表动态加载分类选项，而不是使用硬编码的分类列表
4. WHEN 用户选择状态筛选 THEN 系统 SHALL 基于数据库中实际存在的状态值提供筛选选项
5. WHEN 筛选条件变更 THEN 系统 SHALL 通过API发送查询参数到后端，后端执行相应的SQL查询并返回筛选结果

### 需求 3

**用户故事:** 作为新闻管理员，我希望能够查看新闻列表，包含新闻的基本信息、状态、统计数据和操作按钮，并且所有数据都来自数据库的真实记录，以便全面了解新闻情况并进行管理操作。

#### 验收标准

1. WHEN 用户查看新闻列表 THEN 系统 SHALL 通过后端API从数据库查询并显示真实的新闻信息表格
2. WHEN 显示新闻信息 THEN 系统 SHALL 包含数据库中存储的新闻封面图片、标题、摘要、分类、作者信息
3. WHEN 显示新闻状态 THEN 系统 SHALL 根据数据库中的状态字段使用不同颜色的标签显示"已发布"、"草稿"、"已下线"状态
4. WHEN 显示数据统计 THEN 系统 SHALL 从数据库实时查询浏览量、评论数、点赞数三个统计指标
5. WHEN 显示发布时间 THEN 系统 SHALL 显示数据库中存储的真实日期和时间信息

### 需求 4

**用户故事:** 作为新闻管理员，我希望能够对新闻进行各种操作，包括编辑、预览、发布/下线、复制、删除等，以便灵活管理新闻内容。

#### 验收标准

1. WHEN 用户查看操作列 THEN 系统 SHALL 显示"编辑"按钮和更多操作下拉菜单
2. WHEN 用户点击"编辑"按钮 THEN 系统 SHALL 打开新闻编辑对话框并预填充现有数据
3. WHEN 用户点击"预览"操作 THEN 系统 SHALL 在新窗口打开新闻详情页面
4. WHEN 新闻状态为"已发布" THEN 系统 SHALL 显示"下线"操作选项
5. WHEN 新闻状态为"草稿"或"已下线" THEN 系统 SHALL 显示"发布"操作选项

### 需求 5

**用户故事:** 作为新闻管理员，我希望能够创建和编辑新闻，包含完整的新闻信息表单，支持富文本编辑、图片上传、分类选择等功能。

#### 验收标准

1. WHEN 用户点击"发布新闻"或"编辑"按钮 THEN 系统 SHALL 打开新闻编辑对话框
2. WHEN 显示编辑表单 THEN 系统 SHALL 包含标题、摘要、内容、分类、作者、状态、封面图片、标签、发布时间字段
3. WHEN 用户输入新闻标题 THEN 系统 SHALL 限制长度为5-100个字符并显示字数统计
4. WHEN 用户输入新闻摘要 THEN 系统 SHALL 限制长度为10-200个字符并显示字数统计
5. WHEN 用户输入新闻内容 THEN 系统 SHALL 提供多行文本输入框支持HTML格式

### 需求 6

**用户故事:** 作为新闻管理员，我希望新闻表单具有完善的验证机制，确保新闻数据的准确性和完整性。

#### 验收标准

1. WHEN 新闻标题为空 THEN 系统 SHALL 显示"请输入新闻标题"错误提示
2. WHEN 新闻标题长度不符合要求 THEN 系统 SHALL 显示"标题长度应在5-100个字符之间"错误提示
3. WHEN 新闻摘要为空 THEN 系统 SHALL 显示"请输入新闻摘要"错误提示
4. WHEN 新闻内容长度不足 THEN 系统 SHALL 显示"内容长度不能少于50个字符"错误提示
5. WHEN 新闻分类未选择 THEN 系统 SHALL 显示"请选择新闻分类"错误提示

### 需求 7

**用户故事:** 作为新闻管理员，我希望能够上传和管理新闻封面图片，包括图片格式验证、大小限制和预览功能。

#### 验收标准

1. WHEN 用户上传图片 THEN 系统 SHALL 只接受JPG、PNG格式的图片文件
2. WHEN 图片大小超过限制 THEN 系统 SHALL 显示"上传图片大小不能超过2MB"错误提示
3. WHEN 图片格式不正确 THEN 系统 SHALL 显示"上传图片只能是JPG/PNG格式"错误提示
4. WHEN 图片上传成功 THEN 系统 SHALL 显示图片预览
5. WHEN 未上传图片 THEN 系统 SHALL 显示上传提示图标和建议尺寸说明

### 需求 8

**用户故事:** 作为新闻管理员，我希望能够管理新闻标签，支持选择现有标签或创建新标签，以便对新闻进行分类和标记。

#### 验收标准

1. WHEN 用户选择标签 THEN 系统 SHALL 提供多选下拉框支持选择多个标签
2. WHEN 显示常用标签 THEN 系统 SHALL 包含"教育科技"、"人工智能"、"书法教育"、"技术创新"等预设标签
3. WHEN 用户输入新标签 THEN 系统 SHALL 支持创建自定义标签
4. WHEN 标签选择 THEN 系统 SHALL 支持搜索和过滤标签功能
5. WHEN 保存新闻 THEN 系统 SHALL 将选中的标签保存到新闻记录中

### 需求 9

**用户故事:** 作为新闻管理员，我希望能够设置新闻的发布状态和发布时间，支持草稿保存和定时发布功能。

#### 验收标准

1. WHEN 用户选择发布状态 THEN 系统 SHALL 提供"草稿"和"发布"两个选项
2. WHEN 用户点击"保存草稿"按钮 THEN 系统 SHALL 将新闻状态设置为"草稿"并保存
3. WHEN 用户选择发布时间 THEN 系统 SHALL 提供日期时间选择器
4. WHEN 发布时间未设置 THEN 系统 SHALL 使用当前时间作为默认发布时间
5. WHEN 保存新闻 THEN 系统 SHALL 根据状态和时间设置正确的发布状态

### 需求 10

**用户故事:** 作为新闻管理员，我希望新闻列表支持分页功能，能够处理大量新闻数据并提供灵活的分页控制。

#### 验收标准

1. WHEN 显示新闻列表 THEN 系统 SHALL 支持分页显示，默认每页10条记录
2. WHEN 用户切换页码 THEN 系统 SHALL 加载对应页面的新闻数据
3. WHEN 用户修改每页显示数量 THEN 系统 SHALL 提供10、20、50、100的选项
4. WHEN 分页信息显示 THEN 系统 SHALL 显示总记录数、当前页码、总页数等信息
5. WHEN 筛选条件变更 THEN 系统 SHALL 重置分页到第一页

### 需求 11

**用户故事:** 作为新闻管理员，我希望能够执行批量操作，包括批量发布、下线、删除等，以便高效管理多条新闻。

#### 验收标准

1. WHEN 用户选择多条新闻 THEN 系统 SHALL 通过复选框支持多选功能
2. WHEN 执行批量发布 THEN 系统 SHALL 将选中的草稿新闻状态更新为"已发布"
3. WHEN 执行批量下线 THEN 系统 SHALL 将选中的已发布新闻状态更新为"已下线"
4. WHEN 执行批量删除 THEN 系统 SHALL 显示确认对话框并删除选中的新闻
5. WHEN 批量操作完成 THEN 系统 SHALL 显示操作结果提示并刷新列表

### 需求 12

**用户故事:** 作为新闻管理员，我希望系统能够提供基于数据库真实数据的新闻统计信息，包括总数、各状态数量、浏览量等统计信息。

#### 验收标准

1. WHEN 获取新闻统计 THEN 系统 SHALL 通过SQL查询数据库计算总新闻数、已发布数、草稿数、已下线数统计
2. WHEN 显示浏览统计 THEN 系统 SHALL 从数据库聚合查询总浏览量、总评论数、总点赞数
3. WHEN 统计数据更新 THEN 系统 SHALL 在新闻状态变更时通过数据库事务自动更新统计数据
4. WHEN 查看统计信息 THEN 系统 SHALL 通过API实时查询数据库并显示最新统计数据
5. WHEN 前端显示统计 THEN 系统 SHALL 将数据库查询结果直接绑定到前端组件，不使用任何硬编码数据

### 需求 13

**用户故事:** 作为新闻管理员，我希望系统具有良好的用户体验，包括响应式设计、加载状态、错误处理等。

#### 验收标准

1. WHEN 页面在移动设备显示 THEN 系统 SHALL 自动适配屏幕尺寸并调整布局
2. WHEN 数据加载中 THEN 系统 SHALL 显示加载动画和状态提示
3. WHEN 操作执行中 THEN 系统 SHALL 显示相应的处理状态和进度提示
4. WHEN 操作成功 THEN 系统 SHALL 显示成功提示信息并自动刷新相关数据
5. WHEN 操作失败 THEN 系统 SHALL 显示友好的错误提示信息

### 需求 14

**用户故事:** 作为新闻管理员，我希望新闻内容支持富文本编辑功能，能够插入图片、链接、格式化文本等。

#### 验收标准

1. WHEN 用户编辑新闻内容 THEN 系统 SHALL 提供富文本编辑器或支持HTML格式输入
2. WHEN 插入图片 THEN 系统 SHALL 支持图片上传和插入功能
3. WHEN 格式化文本 THEN 系统 SHALL 支持基本的文本格式化功能
4. WHEN 预览内容 THEN 系统 SHALL 能够正确渲染HTML格式的新闻内容
5. WHEN 保存内容 THEN 系统 SHALL 保持内容格式的完整性

### 需求 15

**用户故事:** 作为新闻管理员，我希望系统能够记录新闻的互动数据，包括浏览量、评论数、点赞数等，以便分析新闻效果。

#### 验收标准

1. WHEN 新闻被浏览 THEN 系统 SHALL 自动增加浏览量计数
2. WHEN 新闻被点赞 THEN 系统 SHALL 记录点赞数并支持取消点赞
3. WHEN 新闻被评论 THEN 系统 SHALL 记录评论数并关联评论内容
4. WHEN 显示统计数据 THEN 系统 SHALL 在新闻列表中显示各项互动数据
5. WHEN 数据更新 THEN 系统 SHALL 实时更新互动数据的显示

### 需求 16

**用户故事:** 作为新闻管理员，我希望前端页面能够完全与后端API和数据库数据绑定，确保页面显示的所有内容都是真实的数据库数据，而不是任何形式的模拟数据。

#### 验收标准

1. WHEN 前端页面加载 THEN 系统 SHALL 通过HTTP请求调用后端API获取所有数据
2. WHEN 后端API响应 THEN 系统 SHALL 从MySQL数据库中查询真实的新闻记录并返回
3. WHEN 前端接收数据 THEN 系统 SHALL 将API返回的数据直接绑定到Vue组件的响应式数据中
4. WHEN 用户操作数据 THEN 系统 SHALL 通过API调用实时更新数据库记录并同步前端显示
5. WHEN 页面刷新 THEN 系统 SHALL 重新从数据库加载最新数据，确保数据的实时性和准确性

### 需求 17

**用户故事:** 作为新闻管理员，我希望系统能够正确处理空数据状态，当数据库中没有新闻数据时，页面应显示友好的空状态提示而不是模拟数据，以便我了解当前状态并开始创建真实内容。

#### 验收标准

1. WHEN 数据库中没有新闻数据 THEN 系统 SHALL 显示空状态页面，包含"暂无新闻数据"提示信息
2. WHEN 显示空状态 THEN 系统 SHALL 提供"创建第一条新闻"的引导按钮
3. WHEN 数据库查询返回空结果 THEN 系统 SHALL NOT 显示任何模拟或示例新闻数据
4. WHEN 用户首次访问系统 THEN 系统 SHALL 显示真实的空状态而不是预填充的示例数据
5. WHEN 所有新闻被删除后 THEN 系统 SHALL 重新显示空状态页面

### 需求 18

**用户故事:** 作为系统管理员，我希望确保系统启动时不会自动插入任何模拟新闻数据，所有新闻内容都必须通过管理后台手动创建，以保证数据的真实性和可控性。

#### 验收标准

1. WHEN 系统首次启动 THEN 系统 SHALL NOT 在数据库中插入任何示例新闻数据
2. WHEN DataInitializationService运行 THEN 系统 SHALL 只创建必要的分类和标签数据，不创建新闻内容
3. WHEN 检查数据库初始状态 THEN news表 SHALL 为空，不包含任何预设的新闻记录
4. WHEN 管理员访问新闻管理页面 THEN 系统 SHALL 显示真实的空状态，提示创建第一条新闻
5. WHEN 需要测试功能 THEN 管理员 SHALL 通过前端界面手动创建测试新闻，而不是依赖预设数据